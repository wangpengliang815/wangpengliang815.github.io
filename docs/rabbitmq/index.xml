<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ğŸ‡ RabbitMq on CODE'NOTE</title><link>https://wangpengliang815.github.io/docs/rabbitmq/</link><description>Recent content in ğŸ‡ RabbitMq on CODE'NOTE</description><generator>Hugo</generator><language>zh-cn</language><atom:link href="https://wangpengliang815.github.io/docs/rabbitmq/index.xml" rel="self" type="application/rss+xml"/><item><title/><link>https://wangpengliang815.github.io/docs/rabbitmq/1.1rabbitmq%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%AE%89%E8%A3%85/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangpengliang815.github.io/docs/rabbitmq/1.1rabbitmq%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%AE%89%E8%A3%85/</guid><description>&lt;p&gt;æ¶ˆæ¯(&lt;code&gt;Message&lt;/code&gt; )æ˜¯æŒ‡åœ¨åº”ç”¨é—´ä¼ é€çš„æ•°æ®ã€‚æ¶ˆæ¯å¯ä»¥éå¸¸ç®€å•ï¼Œæ¯”å¦‚åªåŒ…å«æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ›´å¤æ‚ï¼Œå¯èƒ½åŒ…å«åµŒå…¥å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆ&lt;code&gt;Message Queue&lt;/code&gt;ï¼‰æ˜¯ä¸€ç§åº”ç”¨é—´çš„é€šä¿¡æ–¹å¼ï¼Œæ¶ˆæ¯å‘é€åå¯ä»¥ç«‹å³è¿”å›ï¼Œç”±æ¶ˆæ¯ç³»ç»Ÿæ¥ç¡®ä¿æ¶ˆæ¯çš„å¯é ä¼ é€’ã€‚æ¶ˆæ¯å‘å¸ƒè€…åªç®¡æŠŠæ¶ˆæ¯å‘å¸ƒåˆ° MQ ä¸­è€Œä¸ç”¨ç®¡è°æ¥å–ï¼Œæ¶ˆæ¯ä½¿ç”¨è€…åªç®¡ä»MQä¸­å–æ¶ˆæ¯è€Œä¸ç®¡æ˜¯è°å‘å¸ƒçš„ã€‚å‘å¸ƒè€…å’Œä½¿ç”¨è€…éƒ½ä¸ç”¨çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ã€‚&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h1 id="æ¶ˆæ¯é˜Ÿåˆ—åº”ç”¨åœºæ™¯"&gt;æ¶ˆæ¯é˜Ÿåˆ—åº”ç”¨åœºæ™¯&lt;a class="anchor" href="#%e6%b6%88%e6%81%af%e9%98%9f%e5%88%97%e5%ba%94%e7%94%a8%e5%9c%ba%e6%99%af"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;æ¶ˆæ¯é˜Ÿåˆ—æ˜¯ä¸€ç§åº”ç”¨é—´çš„å¼‚æ­¥åä½œæœºåˆ¶ï¼Œä»¥å¸¸è§çš„è®¢å•ç³»ç»Ÿä¸ºä¾‹ï¼Œç”¨æˆ·ç‚¹å‡»ã€ä¸‹å•ã€‘æŒ‰é’®ä¹‹åçš„ä¸šåŠ¡é€»è¾‘å¯èƒ½åŒ…æ‹¬ï¼šæ‰£å‡åº“å­˜ã€ç”Ÿæˆç›¸åº”å•æ®ã€å‘çº¢åŒ…ã€å‘çŸ­ä¿¡é€šçŸ¥ã€‚åœ¨ä¸šåŠ¡å‘å±•åˆæœŸè¿™äº›é€»è¾‘å¯èƒ½æ”¾åœ¨ä¸€èµ·åŒæ­¥æ‰§è¡Œï¼Œéšç€ä¸šåŠ¡çš„å‘å±•è®¢å•é‡å¢é•¿ï¼Œéœ€è¦æå‡ç³»ç»ŸæœåŠ¡çš„æ€§èƒ½ï¼Œè¿™æ—¶å¯ä»¥å°†ä¸€äº›ä¸éœ€è¦ç«‹å³ç”Ÿæ•ˆçš„æ“ä½œæ‹†åˆ†å‡ºæ¥å¼‚æ­¥æ‰§è¡Œï¼Œæ¯”å¦‚å‘æ”¾çº¢åŒ…ã€å‘çŸ­ä¿¡é€šçŸ¥ç­‰ã€‚è¿™ç§åœºæ™¯ä¸‹å°±å¯ä»¥ç”¨ MQï¼Œåœ¨ä¸‹å•çš„ä¸»æµç¨‹ï¼ˆæ¯”å¦‚æ‰£å‡åº“å­˜ã€ç”Ÿæˆç›¸åº”å•æ®ï¼‰å®Œæˆä¹‹åå‘é€ä¸€æ¡æ¶ˆæ¯åˆ°MQè®©ä¸»æµç¨‹å¿«é€Ÿå®Œç»“ï¼Œè€Œç”±å¦å¤–çš„å•ç‹¬çº¿ç¨‹æ‹‰å– MQ çš„æ¶ˆæ¯ï¼ˆæˆ–è€…ç”± MQ æ¨é€æ¶ˆæ¯ï¼‰ï¼Œå½“å‘ç° MQ ä¸­æœ‰å‘çº¢åŒ…æˆ–å‘çŸ­ä¿¡ä¹‹ç±»çš„æ¶ˆæ¯æ—¶ï¼Œæ‰§è¡Œç›¸åº”çš„ä¸šåŠ¡é€»è¾‘ã€‚ä»¥ä¸Šæ˜¯ç”¨äºä¸šåŠ¡è§£è€¦çš„æƒ…å†µï¼Œå…¶å®ƒå¸¸è§åœºæ™¯åŒ…æ‹¬æœ€ç»ˆä¸€è‡´æ€§ã€å¹¿æ’­ã€é”™å³°æµæ§ç­‰ã€‚&lt;/p&gt;
&lt;h1 id="features"&gt;Features&lt;a class="anchor" href="#features"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;RabbitMQ æ˜¯ä¸€ä¸ªç”± &lt;code&gt;Erlang&lt;/code&gt; è¯­è¨€å¼€å‘çš„ &lt;code&gt;AMQP&lt;/code&gt; çš„å¼€æºå®ç°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;AMQP(Advanced Message)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ã€‚å®ƒæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ï¼ŒåŸºäºæ­¤åè®®çš„å®¢æˆ·ç«¯ä¸æ¶ˆæ¯ä¸­é—´ä»¶å¯ä¼ é€’æ¶ˆæ¯ï¼Œå¹¶ä¸å—äº§å“ã€å¼€å‘è¯­è¨€ç­‰æ¡ä»¶çš„é™åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¯é æ€§(Reliability)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;RabbitMQ ä½¿ç”¨ä¸€äº›æœºåˆ¶æ¥ä¿è¯å¯é æ€§ï¼Œå¦‚æŒä¹…åŒ–ã€ä¼ è¾“ç¡®è®¤ã€å‘å¸ƒç¡®è®¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;çµæ´»çš„è·¯ç”±(Flexible Routing)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ¶ˆæ¯è¿›å…¥é˜Ÿåˆ—ä¹‹å‰ï¼Œé€šè¿‡ Exchange æ¥è·¯ç”±æ¶ˆæ¯çš„ã€‚å¯¹äºå…¸å‹çš„è·¯ç”±åŠŸèƒ½ï¼ŒRabbitMQ å·²ç»æä¾›äº†ä¸€äº›å†…ç½®çš„ Exchange æ¥å®ç°ã€‚é’ˆå¯¹æ›´å¤æ‚çš„è·¯ç”±åŠŸèƒ½ï¼Œå¯ä»¥å°†å¤šä¸ª Exchangeç»‘å®šåœ¨ä¸€èµ·ï¼Œä¹Ÿé€šè¿‡æ’ä»¶æœºåˆ¶å®ç°è‡ªå·±çš„ Exchangeã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ¶ˆæ¯é›†ç¾¤(Clustering)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¤šä¸ªRabbitMQæœåŠ¡å™¨å¯ä»¥ç»„æˆä¸€ä¸ªé›†ç¾¤,å½¢æˆä¸€ä¸ªé€»è¾‘ Brokerã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é«˜å¯ç”¨(Highly Available Queues)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é˜Ÿåˆ—å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„æœºå™¨ä¸Šè¿›è¡Œé•œåƒï¼Œä½¿å¾—åœ¨éƒ¨åˆ†èŠ‚ç‚¹å‡ºé—®é¢˜çš„æƒ…å†µä¸‹é˜Ÿåˆ—ä»ç„¶å¯ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¯é æ€§(Reliability)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;RabbitMQ æ”¯æŒå¤šç§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œæ¯”å¦‚ STOMPã€MQTT ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¤šè¯­è¨€å®¢æˆ·ç«¯(Many Clients)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;RabbitMQ å‡ ä¹æ”¯æŒæ‰€æœ‰å¸¸ç”¨è¯­è¨€ï¼Œæ¯”å¦‚ Javaã€.NETã€Ruby ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç®¡ç†ç•Œé¢(Management UI)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;RabbitMQ æä¾›äº†ä¸€ä¸ªæ˜“ç”¨çš„ç”¨æˆ·ç•Œé¢ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ç›‘æ§å’Œç®¡ç†æ¶ˆæ¯Brokerçš„è®¸å¤šæ–¹é¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è·Ÿè¸ªæœºåˆ¶(Tracing)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæ¶ˆæ¯å¼‚å¸¸ï¼ŒRabbitMQ æä¾›äº†æ¶ˆæ¯è·Ÿè¸ªæœºåˆ¶ï¼Œä½¿ç”¨è€…å¯ä»¥æ‰¾å‡ºå‘ç”Ÿäº†ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ’ä»¶æœºåˆ¶(Plugin System)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;RabbitMQ æä¾›äº†è®¸å¤šæ’ä»¶ï¼Œæ¥ä»å¤šæ–¹é¢è¿›è¡Œæ‰©å±•ï¼Œä¹Ÿå¯ä»¥ç¼–å†™è‡ªå·±çš„æ’ä»¶ã€‚&lt;/p&gt;</description></item><item><title/><link>https://wangpengliang815.github.io/docs/rabbitmq/1.2%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangpengliang815.github.io/docs/rabbitmq/1.2%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/</guid><description>&lt;p&gt;ä½¿ç”¨C#è¿æ¥rabbitMqæµ‹è¯•å„å·¥ä½œæ¨¡å¼åŒºåˆ«&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;C#åˆ›å»ºRabbitMqè¿æ¥&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-cs" data-lang="cs"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;namespace&lt;/span&gt; RabbitMQPublisher
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;using&lt;/span&gt; System;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;using&lt;/span&gt; RabbitMQ.Client;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;static&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;BasePublisher&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;static&lt;/span&gt; ConnectionFactory CreateRabbitMqConnection()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// RabbitMQè¿æ¥å·¥å‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; ConnectionFactory()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; HostName = &lt;span style="color:#e6db74"&gt;&amp;#34;localhost&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ç”¨æˆ·å&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; UserName = &lt;span style="color:#e6db74"&gt;&amp;#34;guest&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// å¯†ç &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Password = &lt;span style="color:#e6db74"&gt;&amp;#34;guest&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ç½‘ç»œæ•…éšœè‡ªåŠ¨æ¢å¤è¿æ¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; AutomaticRecoveryEnabled = &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// å¿ƒè·³å¤„ç†&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; RequestedHeartbeat = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; TimeSpan(&lt;span style="color:#ae81ff"&gt;5000&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; };
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id="å·¥ä½œæ¨¡å¼"&gt;å·¥ä½œæ¨¡å¼&lt;a class="anchor" href="#%e5%b7%a5%e4%bd%9c%e6%a8%a1%e5%bc%8f"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;Rabbitmqçš„å‡ ç§å·¥ä½œæ¨¡å¼ï¼Œå…·ä½“å¯å‚è€ƒå®˜ç½‘ç»™å‡ºçš„Demoï¼šhttps://www.rabbitmq.com/getstarted.htmlï¼Œ &lt;code&gt;RPC&lt;/code&gt; æ¨¡å¼ç±»ä¼¼å¸¸ç”¨çš„è¯·æ±‚-å“åº”æ¨¡å¼ï¼Œè¿™é‡Œä¸è¿‡å¤šè§£é‡Šï¼Œæ„Ÿå…´è¶£å¯ä»¥å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼šhttps://www.rabbitmq.com/tutorials/tutorial-six-dotnet.htmlã€‚ è¿™é‡Œåªå­¦ä¹ å…¶ä¸­çš„1-5ç§ï¼Œä¹Ÿå¯ä»¥åˆ†ç±»æˆä¸¤ç§ï¼šä¸ä½¿ç”¨äº¤æ¢æœºå’Œä½¿ç”¨äº¤æ¢æœºã€‚&lt;/p&gt;
&lt;blockquote class='book-hint '&gt;
&lt;p&gt;å…¶å®è¿˜æ˜¯ä½¿ç”¨äº†äº¤æ¢æœºçš„ï¼Œç®€å•é˜Ÿåˆ—å’Œworkæ¨¡å¼æ˜¯ç»‘å®šåˆ°äº†é»˜è®¤çš„ &lt;code&gt;AMQP default&lt;/code&gt;ã€‚åªä¸è¿‡æ²¡æœ‰æ˜¾å¼å£°æ˜å’Œç»‘å®šè€Œå·²&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;&lt;img src="https://wangpengliang815.github.io/images/RabbitMQ.png" alt="" /&gt;&lt;/p&gt;
&lt;h1 id="ç®€å•é˜Ÿåˆ—"&gt;ç®€å•é˜Ÿåˆ—&lt;a class="anchor" href="#%e7%ae%80%e5%8d%95%e9%98%9f%e5%88%97"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;blockquote class='book-hint '&gt;
&lt;p&gt;â€œ Pâ€æ˜¯ç”Ÿäº§è€…ï¼Œâ€œ Câ€æ˜¯æ¶ˆè´¹è€…ã€‚ä¸­é—´çš„æ¡†æ˜¯ä¸€ä¸ªé˜Ÿåˆ—-RabbitMQä»£è¡¨ä¿ç•™çš„æ¶ˆæ¯ç¼“å†²åŒºï¼Œè¿™ä¸ªæ¨¡å¼å¾ˆç®€å•ï¼Œå…¶å®å°±æ˜¯åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œç®€å•çš„ä¿è¯æ“ä½œçš„é¡ºåºæ€§&lt;/p&gt;</description></item><item><title/><link>https://wangpengliang815.github.io/docs/rabbitmq/1.3%E6%B6%88%E6%81%AF%E7%A1%AE%E8%AE%A4%E5%8F%8A%E6%8C%81%E4%B9%85%E5%8C%96/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangpengliang815.github.io/docs/rabbitmq/1.3%E6%B6%88%E6%81%AF%E7%A1%AE%E8%AE%A4%E5%8F%8A%E6%8C%81%E4%B9%85%E5%8C%96/</guid><description>&lt;p&gt;å­¦ä¹ rabbitMqä¸­çš„æ¶ˆæ¯ç¡®è®¤å’ŒæŒä¹…åŒ–æœºåˆ¶&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h1 id="ç”Ÿäº§ç«¯æ¶ˆæ¯ç¡®è®¤"&gt;ç”Ÿäº§ç«¯æ¶ˆæ¯ç¡®è®¤&lt;a class="anchor" href="#%e7%94%9f%e4%ba%a7%e7%ab%af%e6%b6%88%e6%81%af%e7%a1%ae%e8%ae%a4"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;h2 id="txæœºåˆ¶"&gt;txæœºåˆ¶&lt;a class="anchor" href="#tx%e6%9c%ba%e5%88%b6"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote class='book-hint '&gt;
&lt;p&gt;txæœºåˆ¶å«åšäº‹åŠ¡æœºåˆ¶ï¼ŒRabbitMQä¸­æœ‰ä¸‰ä¸ªä¸txæœºåˆ¶çš„æ–¹æ³•ï¼š&lt;code&gt;txSelect()&lt;/code&gt;ã€&lt;code&gt;txCommit()&lt;/code&gt;ã€&lt;code&gt;txRollback()&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;channel.txSelect()&lt;/code&gt;ï¼š ç”¨äºå°†å½“å‰&lt;code&gt;channel&lt;/code&gt;è®¾ç½®æˆ&lt;code&gt;transaction&lt;/code&gt;æ¨¡å¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;channel.txCommit()&lt;/code&gt; ï¼šæäº¤äº‹åŠ¡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;channel.txRollback()&lt;/code&gt; ï¼šå›æ»šäº‹åŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;tx&lt;/code&gt; æœºåˆ¶ï¼Œé¦–å…ˆè¦é€šè¿‡&lt;code&gt;txSelect&lt;/code&gt; æ–¹æ³•å¼€å¯äº‹åŠ¡ï¼Œç„¶åå‘å¸ƒæ¶ˆæ¯ç»™ &lt;code&gt;broker&lt;/code&gt; æœåŠ¡å™¨ï¼Œå¦‚æœ &lt;code&gt;txCommit&lt;/code&gt; æäº¤æˆåŠŸï¼Œåˆ™è¯´æ˜æ¶ˆæ¯æˆåŠŸè¢« &lt;code&gt;broker&lt;/code&gt; æ¥æ”¶ï¼›å¦‚æœåœ¨&lt;code&gt;txCommit&lt;/code&gt; æ‰§è¡Œä¹‹å‰ &lt;code&gt;broker&lt;/code&gt; å¼‚å¸¸å´©æºƒæˆ–è€…ç”±äºå…¶ä»–åŸå› æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥æ•è·å¼‚å¸¸ï¼Œé€šè¿‡ &lt;code&gt;txRollback&lt;/code&gt; å›æ»šäº‹åŠ¡ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-csharp" data-lang="csharp"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// ç”Ÿäº§ç«¯æ¶ˆæ¯ç¡®è®¤(txäº‹åŠ¡æœºåˆ¶)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt; [TestMethod]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; PublisherTest_Transaction() 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.QueueDeclare(queue: queueName, durable: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, exclusive: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, autoDelete: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, arguments: &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; message = &lt;span style="color:#e6db74"&gt;&amp;#34;hello world&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;byte&lt;/span&gt;[] messageBody = Encoding.UTF8.GetBytes(message);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;try&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// å¼€å¯txäº‹åŠ¡æœºåˆ¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.TxSelect();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ¶ˆæ¯å‘é€&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.BasicPublish(exchange: &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;, routingKey: queueName, basicProperties: &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;, body: messageBody);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// äº‹åŠ¡æäº¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.TxCommit();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;catch&lt;/span&gt; (Exception ex)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// äº‹åŠ¡å›æ»š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.TxRollback();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Assert.Fail(ex.Message);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="confirmæ¨¡å¼"&gt;Confirmæ¨¡å¼&lt;a class="anchor" href="#confirm%e6%a8%a1%e5%bc%8f"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote class='book-hint '&gt;
&lt;p&gt;C#çš„RabbitMQ APIä¸­ï¼Œæœ‰ä¸‰ä¸ªä¸Confirmç›¸å…³çš„æ–¹æ³•ï¼š&lt;code&gt;ConfirmSelect()&lt;/code&gt;ã€&lt;code&gt;WaitForConfirms()&lt;/code&gt;ã€&lt;code&gt;WaitForConfirmOrDie&lt;/code&gt;&lt;/p&gt;</description></item><item><title/><link>https://wangpengliang815.github.io/docs/rabbitmq/1.4%E4%B8%A4%E7%A7%8D%E6%B6%88%E8%B4%B9%E6%A8%A1%E5%BC%8F%E5%92%8Cqos%E7%9A%84%E5%AE%9E%E7%8E%B0/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangpengliang815.github.io/docs/rabbitmq/1.4%E4%B8%A4%E7%A7%8D%E6%B6%88%E8%B4%B9%E6%A8%A1%E5%BC%8F%E5%92%8Cqos%E7%9A%84%E5%AE%9E%E7%8E%B0/</guid><description>&lt;p&gt;å­¦ä¹ rabbitMqçš„æ¶ˆè´¹æ¨¡å¼&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h1 id="æ¶ˆè´¹æ¨¡å¼"&gt;æ¶ˆè´¹æ¨¡å¼&lt;a class="anchor" href="#%e6%b6%88%e8%b4%b9%e6%a8%a1%e5%bc%8f"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;h2 id="eventingbasicconsumer"&gt;EventingBasicConsumer&lt;a class="anchor" href="#eventingbasicconsumer"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;EventingBasicConsumer &lt;/code&gt;æ˜¯å‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„æ¶ˆè´¹è€…ï¼Œå³åªè¦è®¢é˜…çš„ &lt;code&gt;queue&lt;/code&gt; ä¸­æœ‰äº†æ–°æ¶ˆæ¯ï¼ŒBrokerå°±ä¼šç«‹å³æŠŠæ¶ˆæ¯æ¨é€ç»™æ¶ˆè´¹è€…ï¼Œè¿™ç§æ¨¡å¼å¯ä»¥ä¿è¯æ¶ˆæ¯åŠæ—¶åœ°è¢«æ¶ˆè´¹è€…æ¥æ”¶åˆ°ã€‚&lt;code&gt;EventingBasicConsumer &lt;/code&gt;æ˜¯é•¿è¿æ¥çš„ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ª &lt;code&gt;Connection&lt;/code&gt; ,ç„¶ååœ¨ &lt;code&gt;Connection&lt;/code&gt; çš„åŸºç¡€ä¸Šåˆ›å»ºé€šé“ &lt;code&gt;channel&lt;/code&gt;ï¼Œæ¶ˆæ¯çš„å‘é€éƒ½æ˜¯é€šè¿‡ &lt;code&gt;channel&lt;/code&gt; æ¥æ‰§è¡Œçš„ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ &lt;code&gt;Connection&lt;/code&gt; çš„åˆ›å»ºï¼Œæ¯”è¾ƒèŠ‚çœèµ„æºã€‚ä¹‹å‰ä¸€ç›´ä½¿ç”¨çš„å°±æ˜¯ &lt;code&gt;EventingBasicConsumer&lt;/code&gt; ä¸å†èµ˜è¿°ã€‚&lt;/p&gt;
&lt;h2 id="basicget"&gt;BasicGet&lt;a class="anchor" href="#basicget"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;EventingBasicConsumer&lt;/code&gt; å¯ä»¥è®©æ¶ˆè´¹è€…æœ€åŠæ—¶åœ°è·å–åˆ°æ¶ˆæ¯ï¼Œä½¿ç”¨ &lt;code&gt;EventingBasicConsumer&lt;/code&gt; æ¨¡å¼æ—¶æ¶ˆè´¹è€…åœ¨è¢«åŠ¨çš„æ¥æ”¶æ¶ˆæ¯ï¼Œå³æ¶ˆæ¯æ˜¯æ¨é€è¿‡æ¥çš„ï¼Œ&lt;code&gt;Broker&lt;/code&gt;æ˜¯ä¸»åŠ¨çš„ä¸€æ–¹ï¼Œå¦‚æœæƒ³è®©æ¶ˆè´¹è€…ä½œä¸ºä¸»åŠ¨çš„ä¸€æ–¹ä»€ä¹ˆæ—¶å€™æƒ³è¦æ¶ˆæ¯äº†ï¼Œå°±è‡ªå·±å‘é€ä¸€ä¸ªè¯·æ±‚å»æ‰¾&lt;code&gt;Broker&lt;/code&gt;å¯ä»¥ä½¿ç”¨&lt;code&gt;Get&lt;/code&gt;æ–¹å¼ã€‚&lt;code&gt;Get&lt;/code&gt;æ–¹å¼æ˜¯çŸ­è¿æ¥çš„ï¼Œæ¶ˆè´¹è€…æ¯æ¬¡æƒ³è¦æ¶ˆæ¯çš„æ—¶å€™ï¼Œé¦–å…ˆå»ºç«‹ä¸€ä¸ª&lt;code&gt;connection&lt;/code&gt;ï¼Œå‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œ&lt;code&gt;Broker&lt;/code&gt;æ¥æ”¶åˆ°è¯·æ±‚åï¼Œå“åº”ä¸€æ¡æ¶ˆæ¯ç»™æ¶ˆè´¹è€…ï¼Œç„¶åæ–­å¼€è¿æ¥ã€‚RabbitMQä¸­Getæ–¹å¼å’ŒHTTPçš„è¯·æ±‚å“åº”æµç¨‹åŸºæœ¬ä¸€æ ·ï¼ŒGetæ–¹å¼çš„å®æ—¶æ€§æ¯”è¾ƒå·®ï¼Œä¹Ÿæ¯”è¾ƒè€—è´¹èµ„æºã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-cs" data-lang="cs"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;BasicGetResult result = channel.BasicGet(queue: &lt;span style="color:#e6db74"&gt;&amp;#34;test&amp;#34;&lt;/span&gt;, autoAck: &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Assert.IsNotNull(result.Body.ToArray());
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Console.WriteLine(&lt;span style="color:#e6db74"&gt;$&amp;#34;æ¥æ”¶åˆ°æ¶ˆæ¯{Encoding.UTF8.GetString(result.Body.ToArray())}&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// æ‰“å°exchangeå’ŒroutingKey&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Console.WriteLine(&lt;span style="color:#e6db74"&gt;$&amp;#34;exchangeï¼š{result.Exchange},routingKey:{result.RoutingKey}&amp;#34;&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="queuebaicconsumer"&gt;QueueBaicConsumer&lt;a class="anchor" href="#queuebaicconsumer"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;ç”¨æ³•å’ŒGetæ–¹å¼ç±»ä¼¼ï¼ŒQueueBaicConsumeråœ¨å®˜æ–¹APIä¸­æ ‡è®°å·²è¿‡æ—¶ï¼Œä¸å†ä»‹ç»ã€‚&lt;/p&gt;
&lt;h1 id="basicqos"&gt;BasicQos&lt;a class="anchor" href="#basicqos"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;å½“æ¶ˆæ¯æœ‰åä¸‡ï¼Œç™¾ä¸‡æ¡æ—¶ï¼Œä¸€è‚¡è„‘æŠŠæ¶ˆæ¯å‘é€ç»™æ¶ˆè´¹è€…ï¼Œå¯èƒ½ä¼šé€ æˆæ¶ˆè´¹è€…å†…å­˜çˆ†æ»¡&lt;/li&gt;
&lt;li&gt;å½“æ¶ˆæ¯å¤„ç†æ¯”è¾ƒæ…¢çš„æ—¶ï¼Œå•ä¸€çš„æ¶ˆè´¹è€…å¤„ç†è¿™äº›æ¶ˆæ¯å¯èƒ½å¾ˆé•¿æ—¶é—´ï¼Œè‡ªç„¶æƒ³åˆ°å†æ·»åŠ ä¸€ä¸ªæ¶ˆè´¹è€…åŠ å¿«æ¶ˆæ¯çš„å¤„ç†é€Ÿåº¦ï¼Œä½†æ˜¯è¿™äº›æ¶ˆæ¯éƒ½è¢«åŸæ¥çš„æ¶ˆè´¹è€…æ¥æ”¶äº†ï¼ŒçŠ¶æ€ä¸º&lt;code&gt;Unacked&lt;/code&gt;ï¼Œæ‰€ä»¥è¿™äº›æ¶ˆæ¯ä¸ä¼šå†å‘é€ç»™æ–°æ·»åŠ çš„æ¶ˆè´¹è€…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;RabbitMQæä¾›çš„&lt;code&gt;Qos(æœåŠ¡è´¨é‡)&lt;/code&gt;å¯ä»¥å®Œç¾è§£å†³ä¸Šè¾¹çš„é—®é¢˜ï¼Œä½¿ç”¨&lt;code&gt;Qos&lt;/code&gt;æ—¶ï¼Œ&lt;code&gt;Broke&lt;/code&gt;ä¸ä¼šå†æŠŠæ¶ˆæ¯å…¨éƒ¨å‘é€ç»™æ¶ˆè´¹è€…ï¼Œå¯ä»¥è®¾ç½®æ¯æ¬¡ä¼ è¾“ç»™æ¶ˆè´¹è€…çš„æ¶ˆæ¯æ¡æ•°&lt;code&gt;n&lt;/code&gt;ï¼Œæ¶ˆè´¹è€…æŠŠè¿™næ¡æ¶ˆæ¯å¤„ç†å®Œæˆåï¼Œå†è·å–næ¡æ•°æ®è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·å°±ä¸ç”¨æ‹…å¿ƒæ¶ˆæ¯ä¸¢å¤±ã€æœåŠ¡ç«¯å†…å­˜çˆ†æ»¡çš„é—®é¢˜ï¼Œå› ä¸ºæ²¡æœ‰å‘é€çš„æ¶ˆæ¯çŠ¶æ€éƒ½æ˜¯&lt;code&gt;Ready&lt;/code&gt;ï¼Œæ‰€ä»¥æ–°å¢ä¸€ä¸ªæ¶ˆè´¹è€…æ—¶ï¼Œæ¶ˆæ¯ä¹Ÿå¯ä»¥ç«‹å³å‘é€ç»™æ–°å¢çš„æ¶ˆè´¹è€…ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;Qos&lt;/code&gt;çš„æ–¹å¼ååˆ†ç®€å•,åœ¨æ¶ˆè´¹ç«¯è°ƒç”¨&lt;code&gt;channel.BasicQos()&lt;/code&gt;æ–¹æ³•å³å¯ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-cs" data-lang="cs"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;channel.BasicQos(prefetchSize: &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;, prefetchCount: &lt;span style="color:#ae81ff"&gt;2&lt;/span&gt;, global: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title/><link>https://wangpengliang815.github.io/docs/rabbitmq/1.5channel%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangpengliang815.github.io/docs/rabbitmq/1.5channel%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95/</guid><description>&lt;p&gt;è®°å½•rabbitMqä¸­Channelå¸¸è§çš„æ–¹æ³•&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h1 id="channelexchangedeclare"&gt;channel.exchangeDeclare()&lt;a class="anchor" href="#channelexchangedeclare"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;type&lt;/code&gt;ï¼šdirectã€fanoutã€topic&lt;/li&gt;
&lt;li&gt;&lt;code&gt;durable&lt;/code&gt;ï¼š(&lt;code&gt;trueã€false&lt;/code&gt;) trueï¼šæœåŠ¡å™¨é‡å¯ä¼šä¿ç•™ä¸‹æ¥Exchangeã€‚è­¦å‘Šï¼šä»…è®¾ç½®æ­¤é€‰é¡¹ï¼Œä¸ä»£è¡¨æ¶ˆæ¯æŒä¹…åŒ–ã€‚å³ä¸ä¿è¯é‡å¯åæ¶ˆæ¯è¿˜åœ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote class='book-hint '&gt;
&lt;p&gt;åŸæ–‡ï¼štrue if we are declaring a durable exchange (the exchange will survive a server restart&lt;/p&gt;
&lt;/blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;autoDelete&lt;/code&gt;ï¼š(&lt;code&gt;trueã€false&lt;/code&gt;) trueï¼šå½“å·²ç»æ²¡æœ‰æ¶ˆè´¹è€…æ—¶ï¼ŒæœåŠ¡å™¨æ˜¯å¦å¯ä»¥åˆ é™¤è¯¥Exchange&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote class='book-hint '&gt;
&lt;p&gt;åŸæ–‡ï¼štrue if the server should delete the exchange when it is no longer in use&lt;/p&gt;
&lt;/blockquote&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-cs" data-lang="cs"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * Declare an exchange.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @see com.rabbitmq.client.AMQP.Exchange.Declare
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @see com.rabbitmq.client.AMQP.Exchange.DeclareOk
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @param exchange the name of the exchange
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @param type the exchange type
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @param durable true if we are declaring a durable exchange (the exchange will survive a server restart)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @param autoDelete true if the server should delete the exchange when it is no longer in use
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @param arguments other properties (construction arguments) for the exchange
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @return a declaration-confirm method to indicate the exchange was successfully declared
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @throws java.io.IOException if an error is encountered
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Exchange.DeclareOk exchangeDeclare(String exchange, String type, boolean durable, boolean autoDelete,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Map&amp;lt;String, Object&amp;gt; arguments) throws IOException;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id="chanelbasicqos"&gt;chanel.basicQos()&lt;a class="anchor" href="#chanelbasicqos"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;prefetchSize&lt;/code&gt;ï¼š0&lt;/li&gt;
&lt;li&gt;&lt;code&gt;prefetchCount&lt;/code&gt;ï¼šä¼šå‘Šè¯‰RabbitMQä¸è¦åŒæ—¶ç»™ä¸€ä¸ªæ¶ˆè´¹è€…æ¨é€å¤šäºNä¸ªæ¶ˆæ¯ï¼Œå³ä¸€æ—¦æœ‰Nä¸ªæ¶ˆæ¯è¿˜æ²¡æœ‰ackï¼Œåˆ™è¯¥consumerå°†blockæ‰ï¼Œç›´åˆ°æœ‰æ¶ˆæ¯ack&lt;/li&gt;
&lt;li&gt;&lt;code&gt;global&lt;/code&gt;ï¼š&lt;code&gt;true\false&lt;/code&gt; æ˜¯å¦å°†ä¸Šé¢è®¾ç½®åº”ç”¨äºchannelï¼Œç®€å•ç‚¹è¯´ï¼Œå°±æ˜¯ä¸Šé¢é™åˆ¶æ˜¯&lt;code&gt;channel&lt;/code&gt;çº§åˆ«çš„è¿˜æ˜¯&lt;code&gt;consumer&lt;/code&gt;çº§åˆ«&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¤‡æ³¨ï¼šæ®è¯´prefetchSize å’Œglobalè¿™ä¸¤é¡¹ï¼Œrabbitmqæ²¡æœ‰å®ç°ï¼Œæš‚ä¸”ä¸ç ”ç©¶&lt;/p&gt;</description></item><item><title/><link>https://wangpengliang815.github.io/docs/rabbitmq/1.6rabbitmq%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangpengliang815.github.io/docs/rabbitmq/1.6rabbitmq%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</guid><description>&lt;p&gt;è®°å½•rabbitMqä¸­å¸¸è§çš„å‘½ä»¤&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h1 id="ç”¨æˆ·è§’è‰²åˆ†ç±»"&gt;ç”¨æˆ·è§’è‰²åˆ†ç±»&lt;a class="anchor" href="#%e7%94%a8%e6%88%b7%e8%a7%92%e8%89%b2%e5%88%86%e7%b1%bb"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;h2 id="none"&gt;none&lt;a class="anchor" href="#none"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;é€šå¸¸å°±æ˜¯æ™®é€šçš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…,æ— æ³•ç™»å½•æ§åˆ¶å°,ä¸èƒ½è®¿é—® &lt;code&gt;management plugin&lt;/code&gt; ï¼Œé€šå¸¸å°±æ˜¯æ™®é€šçš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ã€‚&lt;/p&gt;
&lt;h2 id="management"&gt;management&lt;a class="anchor" href="#management"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ™®é€šç®¡ç†è€…&lt;/strong&gt;ï¼Œä»…å¯ç™»é™†ç®¡ç†æ§åˆ¶å°(å¯ç”¨ &lt;code&gt;management plugin&lt;/code&gt; çš„æƒ…å†µä¸‹)ï¼Œæ— æ³•çœ‹åˆ°èŠ‚ç‚¹ä¿¡æ¯ï¼Œä¹Ÿæ— æ³•å¯¹ &lt;code&gt;policies&lt;/code&gt; è¿›è¡Œç®¡ç†ã€‚å¯ä»¥é€šè¿‡ &lt;code&gt;AMQP&lt;/code&gt; åšçš„ä»»ä½•äº‹å¤–åŠ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ—å‡ºè‡ªå·±å¯ä»¥é€šè¿‡&lt;code&gt;AMQP&lt;/code&gt;ç™»å…¥çš„ &lt;code&gt;virtual hosts&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹è‡ªå·±çš„ &lt;code&gt;virtual hosts&lt;/code&gt; ä¸­çš„ &lt;code&gt;queues, exchanges&lt;/code&gt; å’Œ &lt;code&gt;bindings&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹å’Œå…³é—­è‡ªå·±çš„ &lt;code&gt;channels&lt;/code&gt; å’Œ &lt;code&gt;connections&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹æœ‰å…³è‡ªå·±çš„ &lt;code&gt;virtual hosts&lt;/code&gt;çš„å…¨å±€ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…å«å…¶ä»–ç”¨æˆ·åœ¨è¿™äº› &lt;code&gt;virtual hosts&lt;/code&gt;ä¸­çš„æ´»åŠ¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="policymaker"&gt;policymaker&lt;a class="anchor" href="#policymaker"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ç­–ç•¥åˆ¶å®šè€…&lt;/strong&gt;ï¼Œ&lt;code&gt;management&lt;/code&gt;å¯ä»¥åšçš„ä»»ä½•äº‹å¤–åŠ ï¼š&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹ã€åˆ›å»ºå’Œåˆ é™¤è‡ªå·±çš„ &lt;code&gt;virtual hosts&lt;/code&gt;æ‰€å±çš„ &lt;code&gt;policies&lt;/code&gt;å’Œ &lt;code&gt;parameters&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="monitoring"&gt;monitoring&lt;a class="anchor" href="#monitoring"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ç›‘æ§è€…&lt;/strong&gt;ï¼Œ&lt;code&gt;management&lt;/code&gt;å¯ä»¥åšçš„ä»»ä½•äº‹å¤–åŠ ï¼š&lt;/p&gt;
&lt;p&gt;åˆ—å‡ºæ‰€æœ‰&lt;code&gt;virtual hosts&lt;/code&gt;ï¼ŒåŒ…æ‹¬ä»–ä»¬ä¸èƒ½ç™»å½•çš„&lt;code&gt;virtual hosts&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹å…¶ä»–ç”¨æˆ·çš„ &lt;code&gt;connections&lt;/code&gt;å’Œ &lt;code&gt;channels&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹èŠ‚ç‚¹çº§åˆ«çš„æ•°æ®å¦‚ &lt;code&gt;clustering&lt;/code&gt;å’Œ &lt;code&gt;memory&lt;/code&gt;ä½¿ç”¨æƒ…å†µ&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹çœŸæ­£çš„å…³äºæ‰€æœ‰ &lt;code&gt;virtual hosts&lt;/code&gt;çš„å…¨å±€çš„ç»Ÿè®¡ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;åŒæ—¶å¯ä»¥æŸ¥çœ‹ &lt;code&gt;rabbitmq&lt;/code&gt;èŠ‚ç‚¹çš„ç›¸å…³ä¿¡æ¯(è¿›ç¨‹æ•°ï¼Œå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œç£ç›˜ä½¿ç”¨æƒ…å†µç­‰)&lt;/p&gt;
&lt;h2 id="administrator"&gt;administrator&lt;a class="anchor" href="#administrator"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;è¶…çº§ç®¡ç†å‘˜&lt;/strong&gt;ï¼Œ&lt;code&gt;policymaker&lt;/code&gt;å’Œ&lt;code&gt;monitoring&lt;/code&gt;å¯ä»¥åšçš„ä»»ä½•äº‹å¤–åŠ :&lt;/p&gt;
&lt;p&gt;åˆ›å»ºå’Œåˆ é™¤&lt;code&gt;virtual hosts&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹ã€åˆ›å»ºå’Œåˆ é™¤ &lt;code&gt;users&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹åˆ›å»ºå’Œåˆ é™¤ &lt;code&gt;permissions&lt;/code&gt;&lt;/p&gt;</description></item><item><title/><link>https://wangpengliang815.github.io/docs/rabbitmq/1.7rabbitmq%E5%B8%B8%E8%A7%81%E7%AD%96%E7%95%A5/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangpengliang815.github.io/docs/rabbitmq/1.7rabbitmq%E5%B8%B8%E8%A7%81%E7%AD%96%E7%95%A5/</guid><description>&lt;p&gt;rabbitMqç­–ç•¥å­¦ä¹ &lt;/p&gt;
&lt;!-- more --&gt;
&lt;h1 id="æ­»ä¿¡é˜Ÿåˆ—"&gt;æ­»ä¿¡é˜Ÿåˆ—&lt;a class="anchor" href="#%e6%ad%bb%e4%bf%a1%e9%98%9f%e5%88%97"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;æ­»ä¿¡é˜Ÿåˆ—ï¼šDLXï¼Œ&lt;code&gt;dead-letter-exchang&lt;/code&gt;ï¼Œåˆ©ç”¨DLXï¼Œå½“æ¶ˆæ¯åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­å˜æˆæ­»ä¿¡ (dead message) ä¹‹åï¼Œå®ƒèƒ½è¢«é‡æ–°publishåˆ°å¦ä¸€ä¸ªExchangeï¼Œè¿™ä¸ªExchangeå°±æ˜¯DLXã€‚&lt;/p&gt;
&lt;h2 id="æ­»ä¿¡åˆ¤æ–­æ¡ä»¶"&gt;æ­»ä¿¡åˆ¤æ–­æ¡ä»¶&lt;a class="anchor" href="#%e6%ad%bb%e4%bf%a1%e5%88%a4%e6%96%ad%e6%9d%a1%e4%bb%b6"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æ¶ˆæ¯è¢«æ‹’ç»(&lt;code&gt;basic.reject&lt;/code&gt; / &lt;code&gt;basic.nack&lt;/code&gt;)ï¼Œå¹¶ä¸” &lt;code&gt;requeue = false&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯ &lt;code&gt;TTL&lt;/code&gt; è¿‡æœŸ&lt;/li&gt;
&lt;li&gt;é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="æ­»ä¿¡å¤„ç†è¿‡ç¨‹"&gt;æ­»ä¿¡å¤„ç†è¿‡ç¨‹&lt;a class="anchor" href="#%e6%ad%bb%e4%bf%a1%e5%a4%84%e7%90%86%e8%bf%87%e7%a8%8b"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;DLXä¹Ÿæ˜¯ä¸€ä¸ªæ­£å¸¸çš„Exchangeï¼Œå’Œä¸€èˆ¬çš„Exchangeæ²¡æœ‰åŒºåˆ«ï¼Œå®ƒèƒ½åœ¨ä»»ä½•çš„é˜Ÿåˆ—ä¸Šè¢«æŒ‡å®šï¼Œå®é™…ä¸Šå°±æ˜¯è®¾ç½®æŸä¸ªé˜Ÿåˆ—çš„å±æ€§&lt;/li&gt;
&lt;li&gt;å½“è¿™ä¸ªé˜Ÿåˆ—ä¸­æœ‰æ­»ä¿¡æ—¶ï¼ŒRabbitMQå°±ä¼šè‡ªåŠ¨çš„å°†è¿™ä¸ªæ¶ˆæ¯é‡æ–°å‘å¸ƒåˆ°è®¾ç½®çš„Exchangeä¸Šå»ï¼Œè¿›è€Œè¢«è·¯ç”±åˆ°å¦ä¸€ä¸ªé˜Ÿåˆ—&lt;/li&gt;
&lt;li&gt;å¯ä»¥é€šè¿‡ç›‘å¬è¿™ä¸ªæ­»ä¿¡é˜Ÿåˆ—çš„æ¶ˆæ¯åšç›¸åº”çš„å¤„ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="æ­»ä¿¡é˜Ÿåˆ—è®¾ç½®"&gt;æ­»ä¿¡é˜Ÿåˆ—è®¾ç½®&lt;a class="anchor" href="#%e6%ad%bb%e4%bf%a1%e9%98%9f%e5%88%97%e8%ae%be%e7%bd%ae"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆè®¾ç½®æ­»ä¿¡é˜Ÿåˆ—çš„ &lt;code&gt;exchange&lt;/code&gt; å’Œ &lt;code&gt;queue&lt;/code&gt;ï¼Œç„¶åè¿›è¡Œç»‘å®š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-csharp" data-lang="csharp"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; dlxExchangeName = &lt;span style="color:#e6db74"&gt;&amp;#34;test.dlx.exchange&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; dlxQueueName = &lt;span style="color:#e6db74"&gt;&amp;#34;test.dlx.queue&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;channel.ExchangeDeclare(dlxExchangeName, type: &lt;span style="color:#e6db74"&gt;&amp;#34;topic&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;channel.QueueDeclare(queue: dlxQueueName, durable: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, exclusive: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, autoDelete: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, arguments: &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// #è¡¨ç¤ºåªè¦æœ‰æ¶ˆæ¯åˆ°è¾¾äº†æ­»ä¿¡çš„exchange,éƒ½ä¼šè·¯ç”±åˆ°è¿™ä¸ªæ­»ä¿¡é˜Ÿåˆ—&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;channel.QueueBind(queue: dlxQueueName, exchange: dlxExchangeName, routingKey: &lt;span style="color:#e6db74"&gt;&amp;#34;#&amp;#34;&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®šä¹‰ä¸šåŠ¡é˜Ÿåˆ—ï¼Œå¹¶è®¾ç½®æ­»ä¿¡å‚æ•°&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-csharp" data-lang="csharp"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// å£°æ˜é˜Ÿåˆ—æ—¶æ·»åŠ æ­»ä¿¡å‚æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Dictionary&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt;&amp;gt; agruments = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; { &lt;span style="color:#e6db74"&gt;&amp;#34;x-dead-letter-exchange&amp;#34;&lt;/span&gt;, dlxExchangeName }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;channel.QueueDeclare(queue: queueName, durable: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, exclusive: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, autoDelete: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, arguments: agruments);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Pub å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-csharp" data-lang="csharp"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;/// Pub:æ­»ä¿¡é˜Ÿåˆ—.DLXs the pub test.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;[TestMethod]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; Dlx_PubTest()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; dlxExchangeName = &lt;span style="color:#e6db74"&gt;&amp;#34;test.dlx.exchange&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; dlxQueueName = &lt;span style="color:#e6db74"&gt;&amp;#34;test.dlx.queue&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.ExchangeDeclare(dlxExchangeName, type: &lt;span style="color:#e6db74"&gt;&amp;#34;topic&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.QueueDeclare(queue: dlxQueueName, durable: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, exclusive: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, autoDelete: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, arguments: &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// # è¡¨ç¤ºåªè¦æœ‰æ¶ˆæ¯åˆ°è¾¾äº†æ­»ä¿¡çš„exchange,éƒ½ä¼šè·¯ç”±åˆ°è¿™ä¸ªæ­»ä¿¡é˜Ÿåˆ—&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.QueueBind(queue: dlxQueueName, exchange: dlxExchangeName, routingKey: &lt;span style="color:#e6db74"&gt;&amp;#34;#&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// å£°æ˜é˜Ÿåˆ—æ—¶æ·»åŠ æ­»ä¿¡å‚æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Dictionary&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt;&amp;gt; agruments = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; { &lt;span style="color:#e6db74"&gt;&amp;#34;x-dead-letter-exchange&amp;#34;&lt;/span&gt;, dlxExchangeName }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; };
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.QueueDeclare(queue: queueName, durable: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, exclusive: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, autoDelete: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, arguments: agruments);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;int&lt;/span&gt; i = &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style="color:#ae81ff"&gt;10&lt;/span&gt;; i++)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.BasicPublish(exchange: &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;, routingKey: queueName, basicProperties: &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;, body: Encoding.UTF8.GetBytes(i.ToString()));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Assert.IsTrue(&lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src="https://wangpengliang815.github.io/images/2021-09-14-17-07-50.png" alt="" /&gt;&lt;/p&gt;</description></item><item><title/><link>https://wangpengliang815.github.io/docs/rabbitmq/1.8rabbitmq%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangpengliang815.github.io/docs/rabbitmq/1.8rabbitmq%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</guid><description>&lt;p&gt;rabbitMqå¸¸è§é—®é¢˜è®°å½•&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h1 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—"&gt;ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—&lt;a class="anchor" href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e8%a6%81%e4%bd%bf%e7%94%a8%e6%b6%88%e6%81%af%e9%98%9f%e5%88%97"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;h2 id="è§£è€¦"&gt;è§£è€¦&lt;a class="anchor" href="#%e8%a7%a3%e8%80%a6"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ä¼ ç»Ÿæ¨¡å¼&lt;/strong&gt;ï¼šç³»ç»Ÿé—´è€¦åˆåº¦å¼º å¦‚ç³»ç»ŸAç›´æ¥è°ƒç”¨ç³»ç»ŸBç³»ç»ŸCçš„ä»£ç ï¼Œå¦‚æœå†æœ‰ç³»ç»ŸDæ¥å…¥ï¼Œåˆ™ç³»ç»ŸAè¿˜è¦ä¿®æ”¹ä»£ç ã€‚
&lt;strong&gt;ä¸­é—´ä»¶æ¨¡å¼&lt;/strong&gt;ï¼šç³»ç»ŸAå°†æ¶ˆæ¯å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç³»ç»ŸBã€ç³»ç»ŸC è®¢é˜…æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¦‚æœå†æœ‰ç³»ç»ŸDä»‹å…¥ï¼Œç›´æ¥è®¢é˜…æ¶ˆæ¯é˜Ÿåˆ—å³å¯ ç³»ç»ŸAä¸å¿…ä¿®æ”¹ä»£ç ã€‚&lt;/p&gt;
&lt;h2 id="å¼‚æ­¥"&gt;å¼‚æ­¥&lt;a class="anchor" href="#%e5%bc%82%e6%ad%a5"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ä¼ ç»Ÿæ¨¡å¼&lt;/strong&gt;ï¼šä¸€äº›éå¿…çš„ä¸šåŠ¡é€»è¾‘ä»¥åŒæ­¥å¾—æ–¹å¼è¿è¡Œæµªè´¹æ—¶é—´ã€‚
&lt;strong&gt;ä¸­é—´ä»¶æ¨¡å¼&lt;/strong&gt;ï¼šå°†æ¶ˆæ¯å†™å…¥æ¶ˆæ¯é˜Ÿåˆ— ä¸€äº›éå¿…è¦çš„ä¸šåŠ¡é€»è¾‘ä»¥å¼‚æ­¥å¾—æ–¹å¼è¿è¡Œæé«˜å“åº”é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;h2 id="å‰Šå³°é™æµ"&gt;å‰Šå³°/é™æµ&lt;a class="anchor" href="#%e5%89%8a%e5%b3%b0%e9%99%90%e6%b5%81"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ä¼ ç»Ÿæ¨¡å¼&lt;/strong&gt;ï¼šå¹¶å‘é‡å¤§å¾—æ—¶å€™æ‰€æœ‰è¯·æ±‚å…¨éƒ¨åˆ°æ•°æ®åº“ï¼Œé€ æˆæ•°æ®åº“è¿æ¥å¼‚å¸¸ã€‚
&lt;strong&gt;ä¸­é—´ä»¶æ¨¡å¼&lt;/strong&gt;ï¼šç³»ç»ŸæŒ‰ç…§æ•°æ®åº“èƒ½å¤„ç†å¾—å¹¶å‘é‡ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ…¢æ…¢æ‹‰å–æ¶ˆæ¯ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿™ç§çŸ­æš‚å¾—é«˜å³°æœŸç§¯å‹æ˜¯å…è®¸çš„ã€‚&lt;/p&gt;
&lt;h1 id="æ¶ˆæ¯é˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯"&gt;æ¶ˆæ¯é˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯&lt;a class="anchor" href="#%e6%b6%88%e6%81%af%e9%98%9f%e5%88%97%e7%9a%84%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;æ¶ˆæ¯é˜Ÿåˆ—å¸¸è§çš„ä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œæ¯”è¾ƒæ ¸å¿ƒçš„æœ‰3ä¸ªï¼š&lt;code&gt;è§£è€¦&lt;/code&gt;ã€&lt;code&gt;å¼‚æ­¥&lt;/code&gt;ã€&lt;code&gt;å‰Šå³°&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h1 id="ä»€ä¹ˆæ˜¯rabbitmq"&gt;ä»€ä¹ˆæ˜¯RabbitMQ&lt;a class="anchor" href="#%e4%bb%80%e4%b9%88%e6%98%afrabbitmq"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;å³ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸»è¦æ˜¯ç”¨æ¥å®ç°åº”ç”¨ç¨‹åºçš„å¼‚æ­¥å’Œè§£è€¦ï¼ŒåŒæ—¶ä¹Ÿèƒ½èµ·åˆ°æ¶ˆæ¯ç¼“å†²ï¼Œæ¶ˆæ¯åˆ†å‘çš„ä½œç”¨ã€‚RabbitMQä½¿ç”¨çš„æ˜¯&lt;code&gt;AMQP&lt;/code&gt;åè®®ï¼Œå®ƒæ˜¯ä¸€ç§äºŒè¿›åˆ¶åè®®&lt;/p&gt;
&lt;p&gt;&lt;code&gt;AMQP&lt;/code&gt;ï¼Œå³&lt;code&gt;Advanced Message Queuing Protocol&lt;/code&gt;(é«˜çº§æ¶ˆæ¯æ’é˜Ÿåè®®),ä¸€ä¸ªæä¾›ç»Ÿä¸€æ¶ˆæ¯æœåŠ¡çš„åº”ç”¨å±‚æ ‡å‡†é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®,æ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†,ä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ã€‚åŸºäºæ­¤åè®®çš„å®¢æˆ·ç«¯ä¸æ¶ˆæ¯ä¸­é—´ä»¶å¯ä¼ é€’æ¶ˆæ¯ï¼Œå¹¶ä¸å—å®¢æˆ·ç«¯/ä¸­é—´ä»¶ä¸åŒäº§å“ï¼Œä¸åŒçš„å¼€å‘è¯­è¨€ç­‰æ¡ä»¶çš„é™åˆ¶ã€‚&lt;/p&gt;
&lt;h1 id="ä¸ºä»€ä¹ˆä½¿ç”¨rabbitmq"&gt;ä¸ºä»€ä¹ˆä½¿ç”¨RabbitMQ&lt;a class="anchor" href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8rabbitmq"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;è¿™é‡Œæ¶‰åŠä¸€ä¸ªæ¶ˆæ¯ä¸­é—´ä»¶é€‰å‹çš„é—®é¢˜&lt;/p&gt;
&lt;p&gt;&lt;img src="https://wangpengliang815.github.io/images/2021-09-05-23-07-23.png" alt="" /&gt;&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;ç‰¹æ€§&lt;/th&gt;
 &lt;th style="text-align: center"&gt;ActiveMQ&lt;/th&gt;
 &lt;th style="text-align: left"&gt;RabbitMQ&lt;/th&gt;
 &lt;th&gt;RocketMQ&lt;/th&gt;
 &lt;th style="text-align: center"&gt;kafka&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;å¼€å‘è¯­è¨€&lt;/td&gt;
 &lt;td style="text-align: center"&gt;java&lt;/td&gt;
 &lt;td style="text-align: left"&gt;erlang&lt;/td&gt;
 &lt;td&gt;java&lt;/td&gt;
 &lt;td style="text-align: center"&gt;scala&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;å•æœºååé‡&lt;/td&gt;
 &lt;td style="text-align: center"&gt;ä¸‡çº§&lt;/td&gt;
 &lt;td style="text-align: left"&gt;ä¸‡çº§&lt;/td&gt;
 &lt;td&gt;10ä¸‡çº§&lt;/td&gt;
 &lt;td style="text-align: center"&gt;10ä¸‡çº§&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;æ—¶æ•ˆæ€§&lt;/td&gt;
 &lt;td style="text-align: center"&gt;msçº§&lt;/td&gt;
 &lt;td style="text-align: left"&gt;usçº§&lt;/td&gt;
 &lt;td&gt;msçº§&lt;/td&gt;
 &lt;td style="text-align: center"&gt;msçº§ä»¥å†…&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;å¯ç”¨æ€§&lt;/td&gt;
 &lt;td style="text-align: center"&gt;é«˜(ä¸»ä»æ¶æ„)&lt;/td&gt;
 &lt;td style="text-align: left"&gt;é«˜(ä¸»ä»æ¶æ„)&lt;/td&gt;
 &lt;td&gt;éå¸¸é«˜(åˆ†å¸ƒå¼æ¶æ„)&lt;/td&gt;
 &lt;td style="text-align: center"&gt;éå¸¸é«˜(åˆ†å¸ƒå¼æ¶æ„)&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;åŠŸèƒ½ç‰¹æ€§&lt;/td&gt;
 &lt;td style="text-align: center"&gt;æˆç†Ÿçš„äº§å“ï¼Œåœ¨å¾ˆå¤šå…¬å¸å¾—åˆ°åº”ç”¨ï¼›æœ‰è¾ƒå¤šçš„æ–‡æ¡£ï¼›å„ç§åè®®æ”¯æŒè¾ƒå¥½&lt;/td&gt;
 &lt;td style="text-align: left"&gt;åŸºäºerlangå¼€å‘ï¼Œæ‰€ä»¥å¹¶å‘èƒ½åŠ›å¾ˆå¼ºï¼Œæ€§èƒ½æå…¶å¥½ï¼Œå»¶æ—¶å¾ˆä½;ç®¡ç†ç•Œé¢è¾ƒä¸°å¯Œ&lt;/td&gt;
 &lt;td&gt;MQåŠŸèƒ½æ¯”è¾ƒå®Œå¤‡ï¼Œæ‰©å±•æ€§ä½³&lt;/td&gt;
 &lt;td style="text-align: center"&gt;åªæ”¯æŒä¸»è¦çš„MQåŠŸèƒ½ï¼Œåƒæ¶ˆæ¯æŸ¥è¯¢ï¼Œæ¶ˆæ¯å›æº¯ç­‰åŠŸèƒ½æ²¡æœ‰æä¾›ï¼Œåœ¨å¤§æ•°æ®é¢†åŸŸåº”ç”¨å¹¿æ³›&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;ä¸­å°å‹è½¯ä»¶å…¬å¸ï¼Œå»ºè®®é€‰&lt;code&gt;RabbitMQ&lt;/code&gt;.ä¸€æ–¹é¢ï¼Œ&lt;code&gt;erlang&lt;/code&gt;è¯­è¨€å¤©ç”Ÿå…·å¤‡é«˜å¹¶å‘çš„ç‰¹æ€§ï¼Œè€Œä¸”ä»–çš„ç®¡ç†ç•Œé¢ç”¨èµ·æ¥ååˆ†æ–¹ä¾¿ã€‚æ­£æ‰€è°“ï¼Œæˆä¹Ÿè§ä½•ï¼Œè´¥ä¹Ÿè§ä½•ï¼ä»–çš„å¼Šç«¯ä¹Ÿåœ¨è¿™é‡Œï¼Œè™½ç„¶&lt;code&gt;RabbitMQ&lt;/code&gt;æ˜¯å¼€æºçš„ï¼Œç„¶è€Œå›½å†…æœ‰å‡ ä¸ªèƒ½å®šåˆ¶åŒ–å¼€å‘erlangçš„ç¨‹åºå‘˜å‘¢ï¼Ÿæ‰€å¹¸ï¼ŒRabbitMQçš„ç¤¾åŒºååˆ†æ´»è·ƒï¼Œå¯ä»¥è§£å†³å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„bugï¼Œè¿™ç‚¹å¯¹äºä¸­å°å‹å…¬å¸æ¥è¯´ååˆ†é‡è¦ã€‚ä¸è€ƒè™‘rocketmqå’Œkafkaçš„åŸå› æ˜¯ï¼Œä¸€æ–¹é¢ä¸­å°å‹è½¯ä»¶å…¬å¸ä¸å¦‚äº’è”ç½‘å…¬å¸ï¼Œæ•°æ®é‡æ²¡é‚£ä¹ˆå¤§ï¼Œé€‰æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œåº”é¦–é€‰åŠŸèƒ½æ¯”è¾ƒå®Œå¤‡çš„ï¼Œæ‰€ä»¥kafkaæ’é™¤ã€‚ä¸è€ƒè™‘rocketmqçš„åŸå› æ˜¯ï¼Œrocketmqæ˜¯é˜¿é‡Œå‡ºå“ï¼Œå¦‚æœé˜¿é‡Œæ”¾å¼ƒç»´æŠ¤rocketmqï¼Œä¸­å°å‹å…¬å¸ä¸€èˆ¬æŠ½ä¸å‡ºäººæ¥è¿›è¡Œrocketmqçš„å®šåˆ¶åŒ–å¼€å‘ï¼Œå› æ­¤ä¸æ¨è&lt;/li&gt;
&lt;li&gt;å¤§å‹è½¯ä»¶å…¬å¸ï¼Œæ ¹æ®å…·ä½“ä½¿ç”¨åœ¨rocketMqå’Œkafkaä¹‹é—´äºŒé€‰ä¸€ã€‚ä¸€æ–¹é¢ï¼Œå¤§å‹è½¯ä»¶å…¬å¸ï¼Œå…·å¤‡è¶³å¤Ÿçš„èµ„é‡‘æ­å»ºåˆ†å¸ƒå¼ç¯å¢ƒï¼Œä¹Ÿå…·å¤‡è¶³å¤Ÿå¤§çš„æ•°æ®é‡ã€‚é’ˆå¯¹rocketMQ,å¤§å‹è½¯ä»¶å…¬å¸ä¹Ÿå¯ä»¥æŠ½å‡ºäººæ‰‹å¯¹rocketMQè¿›è¡Œå®šåˆ¶åŒ–å¼€å‘ï¼Œæ¯•ç«Ÿå›½å†…æœ‰èƒ½åŠ›æ”¹JAVAæºç çš„äººï¼Œè¿˜æ˜¯ç›¸å½“å¤šçš„ã€‚è‡³äºkafkaï¼Œæ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©ï¼Œå¦‚æœæœ‰æ—¥å¿—é‡‡é›†åŠŸèƒ½ï¼Œè‚¯å®šé¦–é€‰kafka&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote class='book-hint '&gt;
&lt;p&gt;å…·ä½“è¯¥é€‰å“ªä¸ªï¼Œåº”è¯¥æ ¹æ®å®é™…åœºæ™¯è€ƒè™‘ï¼Œä¸èƒ½ä¸ºäº†ç”¨è€Œç”¨&lt;/p&gt;
&lt;/blockquote&gt;&lt;h1 id="ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„ç¼ºç‚¹"&gt;ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„ç¼ºç‚¹&lt;a class="anchor" href="#%e4%bd%bf%e7%94%a8%e6%b6%88%e6%81%af%e9%98%9f%e5%88%97%e7%9a%84%e7%bc%ba%e7%82%b9"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;ç³»ç»Ÿå¯ç”¨æ€§é™ä½&lt;/strong&gt;ï¼šæœ¬æ¥å…¶ä»–ç³»ç»Ÿåªè¦è¿è¡Œå¥½å¥½çš„ï¼Œé‚£ä½ çš„ç³»ç»Ÿå°±æ˜¯æ­£å¸¸çš„ã€‚ç°åœ¨åŠ äº†æ¶ˆæ¯é˜Ÿåˆ—è¿›å»ï¼Œé‚£æ¶ˆæ¯é˜Ÿåˆ—æŒ‚äº†ï¼Œä½ çš„ç³»ç»Ÿä¹Ÿå°±æŒ‚äº†ã€‚å› æ­¤ï¼Œç³»ç»Ÿå¯ç”¨æ€§é™ä½
&lt;strong&gt;ç³»ç»Ÿå¤æ‚æ€§å¢åŠ &lt;/strong&gt;ï¼šè¦å¤šè€ƒè™‘å¾ˆå¤šæ–¹é¢çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸€è‡´æ€§é—®é¢˜ã€å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹ï¼Œå¦‚ä½•ä¿è¯ä¿è¯æ¶ˆæ¯å¯é ä¼ è¾“ã€‚å› æ­¤ï¼Œéœ€è¦è€ƒè™‘çš„ä¸œè¥¿æ›´å¤šï¼Œç³»ç»Ÿå¤æ‚æ€§å¢å¤§&lt;/p&gt;
&lt;h1 id="å¦‚ä½•å®ç°é«˜å¯ç”¨"&gt;å¦‚ä½•å®ç°é«˜å¯ç”¨&lt;a class="anchor" href="#%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e9%ab%98%e5%8f%af%e7%94%a8"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;å‚è€ƒï¼šæ­å»ºRabbitMQé«˜å¯ç”¨é›†ç¾¤&lt;/p&gt;
&lt;h1 id="é‡è¦è§’è‰²æœ‰å“ªäº›"&gt;é‡è¦è§’è‰²æœ‰å“ªäº›&lt;a class="anchor" href="#%e9%87%8d%e8%a6%81%e8%a7%92%e8%89%b2%e6%9c%89%e5%93%aa%e4%ba%9b"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;ç”Ÿäº§è€…&lt;/strong&gt;ï¼šæ¶ˆè´¹çš„åˆ›å»ºè€…ï¼Œè´Ÿè´£åˆ›å»ºå’Œæ¨é€æ•°æ®åˆ°æ¶ˆæ¯æœåŠ¡å™¨
&lt;strong&gt;æ¶ˆè´¹è€…&lt;/strong&gt;ï¼šæ¶ˆæ¯çš„æ¥æ”¶æ–¹ï¼Œç”¨äºå¤„ç†æ•°æ®å’Œç¡®è®¤æ¶ˆæ¯
&lt;strong&gt;ä»£ç†&lt;/strong&gt;ï¼šæŒ‡RabbitMQæœ¬èº«ï¼Œæœ¬èº«ä¸ç”Ÿäº§æ¶ˆæ¯ï¼Œåªæ‰®æ¼”â€œå¿«é€’â€çš„è§’è‰²&lt;/p&gt;</description></item><item><title/><link>https://wangpengliang815.github.io/docs/rabbitmq/1.9rabbitmq%E9%9B%86%E7%BE%A4%E6%96%B9%E6%A1%88/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangpengliang815.github.io/docs/rabbitmq/1.9rabbitmq%E9%9B%86%E7%BE%A4%E6%96%B9%E6%A1%88/</guid><description>&lt;p&gt;é›†ç¾¤æ–¹æ¡ˆ&lt;/p&gt;
&lt;!-- more --&gt;</description></item><item><title/><link>https://wangpengliang815.github.io/docs/rabbitmq/%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5rabbitmq/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangpengliang815.github.io/docs/rabbitmq/%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5rabbitmq/</guid><description>&lt;p&gt;å®¢æˆ·ç«¯è¿æ¥RabbitMQ&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h1 id="rabbitmqclient"&gt;RabbitMQ.Client&lt;a class="anchor" href="#rabbitmqclient"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;åŸºäº &lt;code&gt;RabbitMQ.Client&lt;/code&gt; çš„å°è£…ï¼Œåœ¨ &lt;code&gt;NuGet&lt;/code&gt; ä¸­æœç´¢ &lt;code&gt;RabbitMQ.Client&lt;/code&gt; ï¼Œç›´æ¥ç‚¹å‡»æŒ‰é’®å®‰è£…å³å¯ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-csharp" data-lang="csharp"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;namespace&lt;/span&gt; CommonLib.RabbitMQ
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;using&lt;/span&gt; global::RabbitMQ.Client;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;using&lt;/span&gt; global::RabbitMQ.Client.Events;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;using&lt;/span&gt; System;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;using&lt;/span&gt; System.Collections.Generic;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;using&lt;/span&gt; System.Linq;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;using&lt;/span&gt; System.Text;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;using&lt;/span&gt; System.Threading;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;QueueOptions&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// æ˜¯å¦æŒä¹…åŒ–&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;bool&lt;/span&gt; Durable { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; } = &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// æ˜¯å¦è‡ªåŠ¨åˆ é™¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;bool&lt;/span&gt; AutoDelete { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; } = &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// å‚æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; IDictionary&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt;&amp;gt; Arguments { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; } = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Dictionary&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt;&amp;gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;ConsumeQueueOptions&lt;/span&gt; : QueueOptions
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// æ˜¯å¦è‡ªåŠ¨æäº¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;bool&lt;/span&gt; AutoAck { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; } = &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// æ¯æ¬¡æ¥æ”¶æ¶ˆæ¯æ¡æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;ushort?&lt;/span&gt; FetchCount { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; } = &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;ExchangeConsumeQueueOptions&lt;/span&gt; : ConsumeQueueOptions
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// è·¯ç”±å€¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;[] RoutingKeys { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// å‚æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; IDictionary&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt;&amp;gt; BindArguments { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; } = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Dictionary&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt;&amp;gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;ExchangeQueueOptions&lt;/span&gt; : QueueOptions
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// äº¤æ¢æœºç±»å‹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; Type { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// é˜Ÿåˆ—åŠè·¯ç”±å€¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; List&amp;lt;Tuple&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;&amp;gt;&amp;gt; QueueAndRoutingKey { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; } = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; List&amp;lt;Tuple&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;&amp;gt;&amp;gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// å‚æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; IDictionary&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt;&amp;gt; BindArguments { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; } = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Dictionary&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt;&amp;gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;static&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;RabbitMQExchangeType&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// æ™®é€šæ¨¡å¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; Common = &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// è·¯ç”±æ¨¡å¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; Direct = &lt;span style="color:#e6db74"&gt;&amp;#34;direct&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// å‘å¸ƒ/è®¢é˜…æ¨¡å¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; Fanout = &lt;span style="color:#e6db74"&gt;&amp;#34;fanout&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// åŒ¹é…è®¢é˜…æ¨¡å¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; Topic = &lt;span style="color:#e6db74"&gt;&amp;#34;topic&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;abstract&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;RabbitBase&lt;/span&gt; : IDisposable
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;readonly&lt;/span&gt; List&amp;lt;AmqpTcpEndpoint&amp;gt; amqpList;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; IConnection connection;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;protected&lt;/span&gt; RabbitBase(&lt;span style="color:#66d9ef"&gt;params&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;[] hosts)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (hosts == &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt; || hosts.Length == &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; ArgumentException(&lt;span style="color:#e6db74"&gt;&amp;#34;invalid hostsï¼&amp;#34;&lt;/span&gt;, nameof(hosts));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; amqpList = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; List&amp;lt;AmqpTcpEndpoint&amp;gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; amqpList.AddRange(hosts.Select(host =&amp;gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; AmqpTcpEndpoint(host, Port)));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;protected&lt;/span&gt; RabbitBase(&lt;span style="color:#66d9ef"&gt;params&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;int&lt;/span&gt;)[] hostAndPorts)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (hostAndPorts == &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt; || hostAndPorts.Length == &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; ArgumentException(&lt;span style="color:#e6db74"&gt;&amp;#34;invalid hostsï¼&amp;#34;&lt;/span&gt;, nameof(hostAndPorts));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; amqpList = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; List&amp;lt;AmqpTcpEndpoint&amp;gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; amqpList.AddRange(hostAndPorts.Select(tuple =&amp;gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; AmqpTcpEndpoint(tuple.Item1, tuple.Item2)));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// ç«¯å£&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;int&lt;/span&gt; Port { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; } = &lt;span style="color:#ae81ff"&gt;5672&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// è´¦å·&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; UserName { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; } = ConnectionFactory.DefaultUser;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// å¯†ç &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; Password { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; } = ConnectionFactory.DefaultPass;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// è™šæ‹Ÿæœº&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; VirtualHost { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; } = ConnectionFactory.DefaultVHost;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;virtual&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; Dispose()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// connection?.Close();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// connection?.Dispose();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// å…³é—­è¿æ¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; Close()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; connection?.Close();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; connection?.Dispose();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// è·å–rabbitmqçš„è¿æ¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;returns&amp;gt;&amp;lt;/returns&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;protected&lt;/span&gt; IModel GetChannel()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (connection == &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;lock&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (connection == &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ConnectionFactory factory = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Port = Port,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; UserName = UserName,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; VirtualHost = VirtualHost,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Password = Password
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; };
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ç½‘ç»œæ•…éšœè‡ªåŠ¨æ¢å¤è¿æ¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; factory.AutomaticRecoveryEnabled = &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// å¿ƒè·³å¤„ç†&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; factory.RequestedHeartbeat = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; TimeSpan(&lt;span style="color:#ae81ff"&gt;5000&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; connection = factory.CreateConnection(amqpList);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; connection.CreateModel();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;RabbitMQHelper&lt;/span&gt; : RabbitBase
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; RabbitMQHelper(&lt;span style="color:#66d9ef"&gt;params&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;[] hosts) : &lt;span style="color:#66d9ef"&gt;base&lt;/span&gt;(hosts)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; RabbitMQHelper(&lt;span style="color:#66d9ef"&gt;params&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;int&lt;/span&gt;)[] hostAndPorts) : &lt;span style="color:#66d9ef"&gt;base&lt;/span&gt;(hostAndPorts)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// ç®€å•é˜Ÿåˆ—æ¶ˆæ¯å‘å¸ƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;queue&amp;#34;&amp;gt;The queue.&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;message&amp;#34;&amp;gt;The message.&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;options&amp;#34;&amp;gt;The options.&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; Publish(&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; queue, &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; message, QueueOptions options = &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; options ??= &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; QueueOptions();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; IModel channel = GetChannel();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.QueueDeclare(queue, options.Durable, &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, options.AutoDelete, options.Arguments ?? &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Dictionary&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt;&amp;gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;byte&lt;/span&gt;[] buffer = Encoding.UTF8.GetBytes(message);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.BasicPublish(exchange: &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;, routingKey: queue, basicProperties: &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;, body: buffer);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.Close();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// è®¢é˜…æ¨¡å¼/è·¯ç”±æ¨¡å¼/Topicæ¨¡å¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;exchange&amp;#34;&amp;gt;The exchange.&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;routingKey&amp;#34;&amp;gt;The routing key.&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;message&amp;#34;&amp;gt;The message.&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;options&amp;#34;&amp;gt;The options.&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; Publish(&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; exchange, &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; routingKey, &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; message, ExchangeQueueOptions options = &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; options ??= &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; ExchangeQueueOptions();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; IModel channel = GetChannel();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.ExchangeDeclare(exchange,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;.IsNullOrEmpty(options.Type) ? RabbitMQExchangeType.Fanout : options.Type,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; options.Durable,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; options.AutoDelete,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; options.Arguments ?? &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Dictionary&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt;&amp;gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (options.QueueAndRoutingKey.Count &amp;gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;foreach&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; item &lt;span style="color:#66d9ef"&gt;in&lt;/span&gt; options.QueueAndRoutingKey)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (!&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;.IsNullOrEmpty(item.Item1))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.QueueDeclare(item.Item1, options.Durable, &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, options.AutoDelete, options.Arguments);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.QueueBind(item.Item1,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; exchange,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; item.Item2 ?? &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; options.BindArguments ?? &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Dictionary&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt;&amp;gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;byte&lt;/span&gt;[] buffer = Encoding.UTF8.GetBytes(message);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.BasicPublish(exchange, routingKey, &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;, buffer);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.Close();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;event&lt;/span&gt; Action&amp;lt;RecieveResult&amp;gt; Received;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// æ„é€ æ¶ˆè´¹è€…&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;channel&amp;#34;&amp;gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;options&amp;#34;&amp;gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;returns&amp;gt;&amp;lt;/returns&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; IBasicConsumer ConsumeInternal(IModel channel, ConsumeQueueOptions options)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; EventingBasicConsumer consumer = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt;(channel);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; consumer.Received += (sender, e) =&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;try&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CancellationTokenSource cancellationTokenSource = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (!options.AutoAck)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; cancellationTokenSource.Token.Register(() =&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.BasicAck(e.DeliveryTag, &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; });
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Received?.Invoke(&lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; RecieveResult(e, cancellationTokenSource));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;catch&lt;/span&gt; { }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; };
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (options.FetchCount != &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.BasicQos(&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;, options.FetchCount.Value, &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; consumer;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// æ¶ˆæ¯ç›‘å¬&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;queue&amp;#34;&amp;gt;The queue.&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;options&amp;#34;&amp;gt;The options.&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;returns&amp;gt;&amp;lt;/returns&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; ListenResult Listen(&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; queue, ConsumeQueueOptions options = &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; options ??= &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; ConsumeQueueOptions();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; IModel channel = GetChannel();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.QueueDeclare(queue, options.Durable, &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, options.AutoDelete, options.Arguments ?? &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Dictionary&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt;&amp;gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; IBasicConsumer consumer = ConsumeInternal(channel, options);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.BasicConsume(queue, options.AutoAck, consumer);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ListenResult result = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; result.Token.Register(() =&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;try&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.Close();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.Dispose();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;catch&lt;/span&gt; { }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; });
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; result;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// æ¶ˆè´¹æ¶ˆæ¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;exchange&amp;#34;&amp;gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;queue&amp;#34;&amp;gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;param name=&amp;#34;options&amp;#34;&amp;gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; ListenResult Listen(&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; exchange, &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; queue, ExchangeConsumeQueueOptions options = &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; options ??= &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; ExchangeConsumeQueueOptions();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; IModel channel = GetChannel();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.QueueDeclare(queue, options.Durable, &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;, options.AutoDelete, options.Arguments ?? &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Dictionary&amp;lt;&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt;&amp;gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (options.RoutingKeys != &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;.IsNullOrEmpty(exchange))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;foreach&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; key &lt;span style="color:#66d9ef"&gt;in&lt;/span&gt; options.RoutingKeys)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.QueueBind(queue, exchange, key, options.BindArguments);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; IBasicConsumer consumer = ConsumeInternal(channel, options);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.BasicConsume(queue, options.AutoAck, consumer);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ListenResult result = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; result.Token.Register(() =&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;try&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.Close();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; channel.Dispose();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;catch&lt;/span&gt; { }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; });
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; result;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;RecieveResult&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; CancellationTokenSource cancellationTokenSource;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; RecieveResult(BasicDeliverEventArgs arg, CancellationTokenSource cancellationTokenSource)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Body = Encoding.UTF8.GetString(arg.Body.ToArray());
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ConsumerTag = arg.ConsumerTag;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; DeliveryTag = arg.DeliveryTag;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Exchange = arg.Exchange;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Redelivered = arg.Redelivered;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; RoutingKey = arg.RoutingKey;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;.cancellationTokenSource = cancellationTokenSource;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// æ¶ˆæ¯ä½“&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; Body { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// æ¶ˆè´¹è€…æ ‡ç­¾&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; ConsumerTag { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// Ackæ ‡ç­¾&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;ulong&lt;/span&gt; DeliveryTag { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// äº¤æ¢æœº&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; Exchange { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// æ˜¯å¦Ack&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;bool&lt;/span&gt; Redelivered { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// è·¯ç”±&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; RoutingKey { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; Commit()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (cancellationTokenSource == &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt; || cancellationTokenSource.IsCancellationRequested) &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; cancellationTokenSource.Cancel();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; cancellationTokenSource.Dispose();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; cancellationTokenSource = &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;ListenResult&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;readonly&lt;/span&gt; CancellationTokenSource cancellationTokenSource;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// CancellationToken&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; CancellationToken Token { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt; { &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; cancellationTokenSource.Token; } }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// æ˜¯å¦å·²åœæ­¢&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;bool&lt;/span&gt; Stoped { &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt; { &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; cancellationTokenSource.IsCancellationRequested; } }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; ListenResult()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; cancellationTokenSource = &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; CancellationTokenSource();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// åœæ­¢ç›‘å¬&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; Stop()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; cancellationTokenSource.Cancel();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id="easynetq"&gt;EasyNetQ&lt;a class="anchor" href="#easynetq"&gt;#&lt;/a&gt;&lt;/h1&gt;
&lt;h2 id="ç®€ä»‹"&gt;ç®€ä»‹&lt;a class="anchor" href="#%e7%ae%80%e4%bb%8b"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;EasyNetQ æ˜¯åŸºäºå®˜æ–¹.NETç»„ä»¶ RabbitMQ.Client çš„åˆä¸€å±‚å°è£…ï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ï¼Œä¸ç”¨å…³å¿ƒå…·ä½“é˜Ÿåˆ—å£°æ˜ï¼Œè·¯ç”±å£°æ˜ç­‰ç»†èŠ‚ã€‚EasyNetQç›®çš„æ˜¯æä¾›ä¸€ä¸ªå°½å¯èƒ½ç®€æ´é€‚ç”¨äºRabbitMQçš„.NETç±»åº“ã€‚ä¸ºäº†å®ç°è¿™äº›ç›®æ ‡ï¼ŒEasyNetQå¼ºåˆ¶ä½¿ç”¨äº†ä¸€äº›ç®€å•çš„çº¦å®šã€‚åŒ…æ‹¬å¦‚ä¸‹:&lt;/p&gt;</description></item></channel></rss>
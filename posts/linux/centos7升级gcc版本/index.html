<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Centos 7 默认 gcc 版本为4.8，有时需要更高版本的，这里以升级至8.3.1版本为例，分别执行下面三条命令即可，无需手动下载源码编译。
1、安装centos-release-scl
sudo yum install centos-release-scl2、安装devtoolset，注意：如果想安装7.* 版本的，就改成devtoolset-7-gcc，以此类推
sudo yum install devtoolset-8-gcc*3、激活对应的devtoolset，可以一次安装多个版本的devtoolset，需要的时候用下面这条命令切换到对应的版本
scl enable devtoolset-8 bash搞定，查看一下gcc版本
gcc -v[root@wangpengliang ~]# gcc -v Using built-in specs. COLLECT_GCC=gcc COLLECT_LTO_WRAPPER=/opt/rh/devtoolset-8/root/usr/libexec/gcc/x86_64-redhat-linux/8/lto-wrapp erTarget: x86_64-redhat-linux Configured with: ../configure --enable-bootstrap --enable-languages=c,c&#43;&#43;,fortran,lto --prefi x=/opt/rh/devtoolset-8/root/usr --mandir=/opt/rh/devtoolset-8/root/usr/share/man --infodir=/opt/rh/devtoolset-8/root/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads=posix --enable-checking=release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style=gnu --with-default-libstdcxx-abi=gcc4-compatible --enable-plugin --enable-initfini-array --with-isl=/builddir/build/BUILD/gcc-8.3.1-20190311/obj-x86_64-redhat-linux/isl-install --disable-libmpx --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linuxThread model: posix gcc version 8.3.1 20190311 (Red Hat 8.3.1-3) (GCC) [root@wangpengliang ~]#显示为 gcc version 8.3.1 20190311 (Red Hat 8.3.1-3) (GCC)
">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/posts/linux/centos7%E5%8D%87%E7%BA%A7gcc%E7%89%88%E6%9C%AC/">
  <meta property="og:site_name" content="CODE&#39;NOTE">
  <meta property="og:title" content="CODE&#39;NOTE">
  <meta property="og:description" content="Centos 7 默认 gcc 版本为4.8，有时需要更高版本的，这里以升级至8.3.1版本为例，分别执行下面三条命令即可，无需手动下载源码编译。
1、安装centos-release-scl
sudo yum install centos-release-scl2、安装devtoolset，注意：如果想安装7.* 版本的，就改成devtoolset-7-gcc，以此类推
sudo yum install devtoolset-8-gcc*3、激活对应的devtoolset，可以一次安装多个版本的devtoolset，需要的时候用下面这条命令切换到对应的版本
scl enable devtoolset-8 bash搞定，查看一下gcc版本
gcc -v[root@wangpengliang ~]# gcc -v Using built-in specs. COLLECT_GCC=gcc COLLECT_LTO_WRAPPER=/opt/rh/devtoolset-8/root/usr/libexec/gcc/x86_64-redhat-linux/8/lto-wrapp erTarget: x86_64-redhat-linux Configured with: ../configure --enable-bootstrap --enable-languages=c,c&#43;&#43;,fortran,lto --prefi x=/opt/rh/devtoolset-8/root/usr --mandir=/opt/rh/devtoolset-8/root/usr/share/man --infodir=/opt/rh/devtoolset-8/root/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads=posix --enable-checking=release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style=gnu --with-default-libstdcxx-abi=gcc4-compatible --enable-plugin --enable-initfini-array --with-isl=/builddir/build/BUILD/gcc-8.3.1-20190311/obj-x86_64-redhat-linux/isl-install --disable-libmpx --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linuxThread model: posix gcc version 8.3.1 20190311 (Red Hat 8.3.1-3) (GCC) [root@wangpengliang ~]#显示为 gcc version 8.3.1 20190311 (Red Hat 8.3.1-3) (GCC)">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">


  <meta itemprop="name" content="CODE&#39;NOTE">
  <meta itemprop="description" content="Centos 7 默认 gcc 版本为4.8，有时需要更高版本的，这里以升级至8.3.1版本为例，分别执行下面三条命令即可，无需手动下载源码编译。
1、安装centos-release-scl
sudo yum install centos-release-scl2、安装devtoolset，注意：如果想安装7.* 版本的，就改成devtoolset-7-gcc，以此类推
sudo yum install devtoolset-8-gcc*3、激活对应的devtoolset，可以一次安装多个版本的devtoolset，需要的时候用下面这条命令切换到对应的版本
scl enable devtoolset-8 bash搞定，查看一下gcc版本
gcc -v[root@wangpengliang ~]# gcc -v Using built-in specs. COLLECT_GCC=gcc COLLECT_LTO_WRAPPER=/opt/rh/devtoolset-8/root/usr/libexec/gcc/x86_64-redhat-linux/8/lto-wrapp erTarget: x86_64-redhat-linux Configured with: ../configure --enable-bootstrap --enable-languages=c,c&#43;&#43;,fortran,lto --prefi x=/opt/rh/devtoolset-8/root/usr --mandir=/opt/rh/devtoolset-8/root/usr/share/man --infodir=/opt/rh/devtoolset-8/root/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads=posix --enable-checking=release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style=gnu --with-default-libstdcxx-abi=gcc4-compatible --enable-plugin --enable-initfini-array --with-isl=/builddir/build/BUILD/gcc-8.3.1-20190311/obj-x86_64-redhat-linux/isl-install --disable-libmpx --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linuxThread model: posix gcc version 8.3.1 20190311 (Red Hat 8.3.1-3) (GCC) [root@wangpengliang ~]#显示为 gcc version 8.3.1 20190311 (Red Hat 8.3.1-3) (GCC)">
  <meta itemprop="wordCount" content="123">

<title>Centos7升级gcc版本 | CODE&#39;NOTE</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/posts/linux/centos7%E5%8D%87%E7%BA%A7gcc%E7%89%88%E6%9C%AC/">
<link rel="stylesheet" href="/book.min.6970156cec683193d93c9c4edaf0d56574e4361df2e0c1be4f697ae81c3ba55f.css" integrity="sha256-aXAVbOxoMZPZPJxO2vDVZXTkNh3y4MG&#43;T2l66Bw7pV8=" crossorigin="anonymous">


  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.3ed9c79c605914c45e19db90edfda0ca8d87c63064c1d6252862250c4e917346.js" integrity="sha256-PtnHnGBZFMReGduQ7f2gyo2HxjBkwdYlKGIlDE6Rc0Y=" crossorigin="anonymous"></script>



  
</head>
<body dir="ltr" class="book-kind-page book-type-posts">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>CODE&#39;NOTE</span>
  </a>
</h2>


<div class="book-search hidden">
  <input id="book-search-input" type="text" 
    placeholder="Search"
    aria-label="Search"
    maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>
























</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/icons/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>Centos7升级gcc版本</h3>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
<article class="markdown book-post">
  <h1>
    Centos7升级gcc版本
  </h1>
  


  

  


  <div class="book-post-content markdown-inner"><p>Centos 7 默认 <code>gcc</code> 版本为4.8，有时需要更高版本的，这里以升级至8.3.1版本为例，分别执行下面三条命令即可，无需手动<a href="http://ftp.gnu.org/gnu/gcc/">下载源码</a>编译。</p>
<p>1、安装centos-release-scl</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo yum install centos-release-scl</span></span></code></pre></div><p>2、安装devtoolset，注意：如果想安装7.* 版本的，就改成devtoolset-7-gcc，以此类推</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo yum install devtoolset-8-gcc*</span></span></code></pre></div><p>3、激活对应的devtoolset，可以一次安装多个版本的devtoolset，需要的时候用下面这条命令切换到对应的版本</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>scl enable devtoolset-8 bash</span></span></code></pre></div><p>搞定，查看一下gcc版本</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcc -v</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@wangpengliang ~<span style="color:#f92672">]</span><span style="color:#75715e"># gcc -v</span>
</span></span><span style="display:flex;"><span>Using built-in specs.
</span></span><span style="display:flex;"><span>COLLECT_GCC<span style="color:#f92672">=</span>gcc
</span></span><span style="display:flex;"><span>COLLECT_LTO_WRAPPER<span style="color:#f92672">=</span>/opt/rh/devtoolset-8/root/usr/libexec/gcc/x86_64-redhat-linux/8/lto-wrapp
</span></span><span style="display:flex;"><span>erTarget: x86_64-redhat-linux
</span></span><span style="display:flex;"><span>Configured with: ../configure --enable-bootstrap --enable-languages<span style="color:#f92672">=</span>c,c++,fortran,lto --prefi
</span></span><span style="display:flex;"><span>x<span style="color:#f92672">=</span>/opt/rh/devtoolset-8/root/usr --mandir<span style="color:#f92672">=</span>/opt/rh/devtoolset-8/root/usr/share/man --infodir<span style="color:#f92672">=</span>/opt/rh/devtoolset-8/root/usr/share/info --with-bugurl<span style="color:#f92672">=</span>http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads<span style="color:#f92672">=</span>posix --enable-checking<span style="color:#f92672">=</span>release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style<span style="color:#f92672">=</span>gnu --with-default-libstdcxx-abi<span style="color:#f92672">=</span>gcc4-compatible --enable-plugin --enable-initfini-array --with-isl<span style="color:#f92672">=</span>/builddir/build/BUILD/gcc-8.3.1-20190311/obj-x86_64-redhat-linux/isl-install --disable-libmpx --enable-gnu-indirect-function --with-tune<span style="color:#f92672">=</span>generic --with-arch_32<span style="color:#f92672">=</span>x86-64 --build<span style="color:#f92672">=</span>x86_64-redhat-linuxThread model: posix
</span></span><span style="display:flex;"><span>gcc version 8.3.1 <span style="color:#ae81ff">20190311</span> <span style="color:#f92672">(</span>Red Hat 8.3.1-3<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>GCC<span style="color:#f92672">)</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@wangpengliang ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span></span></span></code></pre></div><p>显示为 gcc version 8.3.1 20190311 (Red Hat 8.3.1-3) (GCC)</p>
<p>补充：这条激活命令只对本次会话有效，重启会话后还是会变回原来的4.8.5版本，要想随意切换可按如下操作。</p>
<p>首先，安装的 <code>devtoolset</code> 是在 <code>/opt/rh</code>  目录下的</p>
<pre tabindex="0"><code>[root@wangpengliang rh]# ls
devtoolset-8  devtoolset-9
[root@wangpengliang rh]#</code></pre><p>每个版本的目录下面都有个 <code>enable</code> 文件，如果需要启用某个版本，只需要执行</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>source ./enable</span></span></code></pre></div><p>所以要想切换到某个版本，只需要执行</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>source /opt/rh/devtoolset-8/enable</span></span></code></pre></div><p>可以将对应版本的切换命令写个shell文件放在配了环境变量的目录下，需要时随时切换，或者开机自启</p>
<p>4、直接替换旧的gcc
旧的gcc是运行的 <code>/usr/bin/gcc</code> ，所以将该目录下的gcc/g++替换为刚安装的新版本gcc软连接，免得每次 <code>enable</code> </p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mv /usr/bin/gcc /usr/bin/gcc-4.8.5
</span></span><span style="display:flex;"><span>ln -s /opt/rh/devtoolset-8/root/bin/gcc /usr/bin/gcc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mv /usr/bin/g++ /usr/bin/g++-4.8.5
</span></span><span style="display:flex;"><span>ln -s /opt/rh/devtoolset-8/root/bin/g++ /usr/bin/g++
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>gcc --version
</span></span><span style="display:flex;"><span>g++ --version</span></span></code></pre></div></div>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">
  <div>
  
    <a href="/posts/kubernetes/kubernetes%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85/" class="flex align-center">
      <img src="/icons/backward.svg" class="book-icon" alt="Backward" />
      <span>Kubernetes集群安装</span>
    </a>
  
  </div>
  <div>
  
    <a href="/posts/linux/centos%E5%AE%89%E8%A3%85hexo/" class="flex align-center">
      <span>Centos安装 Hexo</span>
      <img src="/icons/forward.svg" class="book-icon" alt="Forward" />
    </a>
  
  </div>
</div>
 
        
  
 
        
        
  
 
        
  
  
    <script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script>
  

      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  
 
  </main>

  
</body>
</html>





















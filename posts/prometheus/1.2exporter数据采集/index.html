<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="上一节学习了如何部署 Prometheus Server，这节学习如何使用 Exporter 收集主机数据。在 Prometheus 的架构设计中，Prometheus Server 并不直接服务监控特定的目标，其主要任务负责数据的收集，存储并且对外提供数据查询支持。因此为了能够能够监控到某些东西，如主机的CPU使用率，需要使用到 Exporter。Prometheus 周期性的从 Exporter 暴露的 HTTP 服务地址（通常是 /metrics）拉取监控样本数据。
Exporter 是一个相对开放的概念，可以是一个独立运行的程序独立于监控目标，也可以直接内置在监控目标中。只要能够向 Prometheus 提供标准格式的监控样本数据即可
Exporter 概念# 广义上所有可以向 Prometheus 提供监控样本数据的程序都可以被称为一个 Exporter 。Exporter 的一个实例称为Target，Prometheus 通过轮询的方式定期从这些 Target 中获取样本数据。
Exporter 来源# 社区提供# Prometheus 社区提供了丰富的 Exporter 实现，涵盖了从基础设施，中间件以及网络等各个方面的监控功能。这些Exporter 可以实现大部分通用的监控需求。下面表格列举了社区中常用的 Exporter：
范围 常用Exporter 数据库 MySQL Exporter, Redis Exporter, MongoDB Exporter, MSSQL Exporter等 硬件 Apcupsd Exporter，IoT Edison Exporter， IPMI Exporter, Node Exporter等 消息队列 Beanstalkd Exporter, Kafka Exporter, NSQ Exporter, RabbitMQ Exporter等 存储 Ceph Exporter, Gluster Exporter, HDFS Exporter, ScaleIO Exporter等 HTTP服务 Apache Exporter, HAProxy Exporter, Nginx Exporter等 API服务 AWS ECS Exporter， Docker Cloud Exporter, Docker Hub Exporter, GitHub Exporter等 日志 Fluentd Exporter, Grok Exporter等 监控系统 Collectd Exporter, Graphite Exporter, InfluxDB Exporter, Nagios Exporter, SNMP Exporter等 其它 Blockbox Exporter, JIRA Exporter, Jenkins Exporter， Confluence Exporter等 自定义创建# 除了直接使用社区提供的 Exporter 程序以外，还可以基于 Prometheus 提供的 Client Library 创建自己的 Exporter 程序。目前 Promthues 社区官方提供了对以下编程语言的支持：Go、Java/Scala、Python、Ruby。同时还有第三方实现的如：Bash、C&#43;&#43;、Common Lisp、Erlang,、Haskeel、Lua、Node.js、PHP、Rust 等。
">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/posts/prometheus/1.2exporter%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86/">
  <meta property="og:site_name" content="CODE&#39;NOTE">
  <meta property="og:title" content="CODE&#39;NOTE">
  <meta property="og:description" content="上一节学习了如何部署 Prometheus Server，这节学习如何使用 Exporter 收集主机数据。在 Prometheus 的架构设计中，Prometheus Server 并不直接服务监控特定的目标，其主要任务负责数据的收集，存储并且对外提供数据查询支持。因此为了能够能够监控到某些东西，如主机的CPU使用率，需要使用到 Exporter。Prometheus 周期性的从 Exporter 暴露的 HTTP 服务地址（通常是 /metrics）拉取监控样本数据。
Exporter 是一个相对开放的概念，可以是一个独立运行的程序独立于监控目标，也可以直接内置在监控目标中。只要能够向 Prometheus 提供标准格式的监控样本数据即可
Exporter 概念# 广义上所有可以向 Prometheus 提供监控样本数据的程序都可以被称为一个 Exporter 。Exporter 的一个实例称为Target，Prometheus 通过轮询的方式定期从这些 Target 中获取样本数据。
Exporter 来源# 社区提供# Prometheus 社区提供了丰富的 Exporter 实现，涵盖了从基础设施，中间件以及网络等各个方面的监控功能。这些Exporter 可以实现大部分通用的监控需求。下面表格列举了社区中常用的 Exporter：
范围 常用Exporter 数据库 MySQL Exporter, Redis Exporter, MongoDB Exporter, MSSQL Exporter等 硬件 Apcupsd Exporter，IoT Edison Exporter， IPMI Exporter, Node Exporter等 消息队列 Beanstalkd Exporter, Kafka Exporter, NSQ Exporter, RabbitMQ Exporter等 存储 Ceph Exporter, Gluster Exporter, HDFS Exporter, ScaleIO Exporter等 HTTP服务 Apache Exporter, HAProxy Exporter, Nginx Exporter等 API服务 AWS ECS Exporter， Docker Cloud Exporter, Docker Hub Exporter, GitHub Exporter等 日志 Fluentd Exporter, Grok Exporter等 监控系统 Collectd Exporter, Graphite Exporter, InfluxDB Exporter, Nagios Exporter, SNMP Exporter等 其它 Blockbox Exporter, JIRA Exporter, Jenkins Exporter， Confluence Exporter等 自定义创建# 除了直接使用社区提供的 Exporter 程序以外，还可以基于 Prometheus 提供的 Client Library 创建自己的 Exporter 程序。目前 Promthues 社区官方提供了对以下编程语言的支持：Go、Java/Scala、Python、Ruby。同时还有第三方实现的如：Bash、C&#43;&#43;、Common Lisp、Erlang,、Haskeel、Lua、Node.js、PHP、Rust 等。">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">


  <meta itemprop="name" content="CODE&#39;NOTE">
  <meta itemprop="description" content="上一节学习了如何部署 Prometheus Server，这节学习如何使用 Exporter 收集主机数据。在 Prometheus 的架构设计中，Prometheus Server 并不直接服务监控特定的目标，其主要任务负责数据的收集，存储并且对外提供数据查询支持。因此为了能够能够监控到某些东西，如主机的CPU使用率，需要使用到 Exporter。Prometheus 周期性的从 Exporter 暴露的 HTTP 服务地址（通常是 /metrics）拉取监控样本数据。
Exporter 是一个相对开放的概念，可以是一个独立运行的程序独立于监控目标，也可以直接内置在监控目标中。只要能够向 Prometheus 提供标准格式的监控样本数据即可
Exporter 概念# 广义上所有可以向 Prometheus 提供监控样本数据的程序都可以被称为一个 Exporter 。Exporter 的一个实例称为Target，Prometheus 通过轮询的方式定期从这些 Target 中获取样本数据。
Exporter 来源# 社区提供# Prometheus 社区提供了丰富的 Exporter 实现，涵盖了从基础设施，中间件以及网络等各个方面的监控功能。这些Exporter 可以实现大部分通用的监控需求。下面表格列举了社区中常用的 Exporter：
范围 常用Exporter 数据库 MySQL Exporter, Redis Exporter, MongoDB Exporter, MSSQL Exporter等 硬件 Apcupsd Exporter，IoT Edison Exporter， IPMI Exporter, Node Exporter等 消息队列 Beanstalkd Exporter, Kafka Exporter, NSQ Exporter, RabbitMQ Exporter等 存储 Ceph Exporter, Gluster Exporter, HDFS Exporter, ScaleIO Exporter等 HTTP服务 Apache Exporter, HAProxy Exporter, Nginx Exporter等 API服务 AWS ECS Exporter， Docker Cloud Exporter, Docker Hub Exporter, GitHub Exporter等 日志 Fluentd Exporter, Grok Exporter等 监控系统 Collectd Exporter, Graphite Exporter, InfluxDB Exporter, Nagios Exporter, SNMP Exporter等 其它 Blockbox Exporter, JIRA Exporter, Jenkins Exporter， Confluence Exporter等 自定义创建# 除了直接使用社区提供的 Exporter 程序以外，还可以基于 Prometheus 提供的 Client Library 创建自己的 Exporter 程序。目前 Promthues 社区官方提供了对以下编程语言的支持：Go、Java/Scala、Python、Ruby。同时还有第三方实现的如：Bash、C&#43;&#43;、Common Lisp、Erlang,、Haskeel、Lua、Node.js、PHP、Rust 等。">
  <meta itemprop="wordCount" content="811">

<title>1.2 Exporter数据采集 | CODE&#39;NOTE</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/posts/prometheus/1.2exporter%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86/">
<link rel="stylesheet" href="/book.min.6970156cec683193d93c9c4edaf0d56574e4361df2e0c1be4f697ae81c3ba55f.css" integrity="sha256-aXAVbOxoMZPZPJxO2vDVZXTkNh3y4MG&#43;T2l66Bw7pV8=" crossorigin="anonymous">


  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.3ed9c79c605914c45e19db90edfda0ca8d87c63064c1d6252862250c4e917346.js" integrity="sha256-PtnHnGBZFMReGduQ7f2gyo2HxjBkwdYlKGIlDE6Rc0Y=" crossorigin="anonymous"></script>



  
</head>
<body dir="ltr" class="book-kind-page book-type-posts">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>CODE&#39;NOTE</span>
  </a>
</h2>


<div class="book-search hidden">
  <input id="book-search-input" type="text" 
    placeholder="Search"
    aria-label="Search"
    maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>
























</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/icons/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>1.2 Exporter数据采集</h3>

  <label for="toc-control">
    
    <img src="/icons/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#社区提供">社区提供</a></li>
    <li><a href="#自定义创建">自定义创建</a></li>
  </ul>

  <ul>
    <li><a href="#独立使用">独立使用</a></li>
    <li><a href="#应用中集成">应用中集成</a></li>
  </ul>

  <ul>
    <li><a href="#node-exporter">Node Exporter</a>
      <ul>
        <li><a href="#安装">安装</a></li>
        <li><a href="#监控指标">监控指标</a></li>
        <li><a href="#集成">集成</a></li>
        <li><a href="#自动重启">自动重启</a></li>
      </ul>
    </li>
    <li><a href="#cadvisor--exporter">Cadvisor  Exporter</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
<article class="markdown book-post">
  <h1>
    1.2 Exporter数据采集
  </h1>
  


  

  


  <div class="book-post-content markdown-inner"><p>上一节学习了如何部署 Prometheus Server，这节学习如何使用 Exporter 收集主机数据。在 Prometheus 的架构设计中，Prometheus Server 并不直接服务监控特定的目标，其主要任务负责数据的收集，存储并且对外提供数据查询支持。因此为了能够能够监控到某些东西，如主机的CPU使用率，需要使用到 Exporter。Prometheus 周期性的从 Exporter 暴露的 HTTP 服务地址（通常是 <code>/metrics</code>）拉取监控样本数据。</p>
<blockquote class='book-hint '>
<p>Exporter 是一个相对开放的概念，可以是一个独立运行的程序独立于监控目标，也可以直接内置在监控目标中。只要能够向 Prometheus 提供标准格式的监控样本数据即可</p>
</blockquote><h1 id="exporter-概念">Exporter 概念<a class="anchor" href="#exporter-%e6%a6%82%e5%bf%b5">#</a></h1>
<p>广义上所有可以向 Prometheus 提供监控样本数据的程序都可以被称为一个 Exporter 。Exporter 的一个实例称为Target，Prometheus 通过轮询的方式定期从这些 Target 中获取样本数据。</p>
<p><img src="/images/2022-07-05-16-12-19.png" alt="" /></p>
<h1 id="exporter-来源">Exporter 来源<a class="anchor" href="#exporter-%e6%9d%a5%e6%ba%90">#</a></h1>
<h2 id="社区提供">社区提供<a class="anchor" href="#%e7%a4%be%e5%8c%ba%e6%8f%90%e4%be%9b">#</a></h2>
<p>Prometheus 社区提供了丰富的 Exporter 实现，涵盖了从基础设施，中间件以及网络等各个方面的监控功能。这些Exporter 可以实现大部分通用的监控需求。下面表格列举了社区中常用的 Exporter：</p>
<table>
  <thead>
      <tr>
          <th>范围</th>
          <th>常用Exporter</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>数据库</td>
          <td>MySQL Exporter, Redis Exporter, MongoDB Exporter, MSSQL Exporter等</td>
      </tr>
      <tr>
          <td>硬件</td>
          <td>Apcupsd Exporter，IoT Edison Exporter， IPMI Exporter, Node Exporter等</td>
      </tr>
      <tr>
          <td>消息队列</td>
          <td>Beanstalkd Exporter, Kafka Exporter, NSQ Exporter, RabbitMQ Exporter等</td>
      </tr>
      <tr>
          <td>存储</td>
          <td>Ceph Exporter, Gluster Exporter, HDFS Exporter, ScaleIO Exporter等</td>
      </tr>
      <tr>
          <td>HTTP服务</td>
          <td>Apache Exporter, HAProxy Exporter, Nginx Exporter等</td>
      </tr>
      <tr>
          <td>API服务</td>
          <td>AWS ECS Exporter， Docker Cloud Exporter, Docker Hub Exporter, GitHub Exporter等</td>
      </tr>
      <tr>
          <td>日志</td>
          <td>Fluentd Exporter, Grok Exporter等</td>
      </tr>
      <tr>
          <td>监控系统</td>
          <td>Collectd Exporter, Graphite Exporter, InfluxDB Exporter, Nagios Exporter, SNMP Exporter等</td>
      </tr>
      <tr>
          <td>其它</td>
          <td>Blockbox Exporter, JIRA Exporter, Jenkins Exporter， Confluence Exporter等</td>
      </tr>
  </tbody>
</table>
<h2 id="自定义创建">自定义创建<a class="anchor" href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%88%9b%e5%bb%ba">#</a></h2>
<p>除了直接使用社区提供的 Exporter 程序以外，还可以基于 Prometheus 提供的 Client Library 创建自己的 Exporter 程序。目前 Promthues 社区官方提供了对以下编程语言的支持：Go、Java/Scala、Python、Ruby。同时还有第三方实现的如：Bash、C++、Common Lisp、Erlang,、Haskeel、Lua、Node.js、PHP、Rust 等。</p>
<h1 id="exporter-运行方式">Exporter 运行方式<a class="anchor" href="#exporter-%e8%bf%90%e8%a1%8c%e6%96%b9%e5%bc%8f">#</a></h1>
<h2 id="独立使用">独立使用<a class="anchor" href="#%e7%8b%ac%e7%ab%8b%e4%bd%bf%e7%94%a8">#</a></h2>
<p>以 Node Exporter 为例，由于操作系统本身并不直接支持 Prometheus 同时用户也无法通过直接从操作系统层面上提供对 Prometheus 的支持。因此只能通过独立运行一个程序的方式，通过操作系统提供的相关接口，将系统的运行状态数据转换为可供 Prometheus 读取的监控数据。 除了 Node Exporter 以外，比如 MySQL Exporter、Redis Exporter 等都是通过这种方式实现。 在这里 Exporter 程序扮演了中间代理人的角色。</p>
<h2 id="应用中集成">应用中集成<a class="anchor" href="#%e5%ba%94%e7%94%a8%e4%b8%ad%e9%9b%86%e6%88%90">#</a></h2>
<p>为了能够更好的监控系统的内部运行状态，有些开源项目如 <code>Kubernetes</code>，<code>ETCD</code> 等直接在代码中使用了Prometheus 的 Client Library，提供了对 Prometheus 的直接支持。这种方式让应用程序可以直接将内部的运行状态暴露给 Prometheus，适合于需要更多自定义监控指标需求的项目。</p>
<h1 id="exporter-规范">Exporter 规范<a class="anchor" href="#exporter-%e8%a7%84%e8%8c%83">#</a></h1>
<p>所有的 Exporter 程序都需要按照 Prometheus 的规范，返回监控的样本数据。以 Node Exporter 为例，当访问 <code>/metrics</code> 地址时会返回以下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># HELP node_cpu Seconds the cpus spent in each mode.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># TYPE node_cpu counter</span>
</span></span><span style="display:flex;"><span>node_cpu<span style="color:#f92672">{</span>cpu<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cpu0&#34;</span>,mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;idle&#34;</span><span style="color:#f92672">}</span> 362812.7890625
</span></span><span style="display:flex;"><span><span style="color:#75715e"># HELP node_load1 1m load average.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># TYPE node_load1 gauge</span>
</span></span><span style="display:flex;"><span>node_load1 3.0703125</span></span></code></pre></div><p>这是一种基于文本的格式规范，相比于 Protocol buffer 文本具有更好的可读性，以及跨平台性。</p>
<blockquote class='book-hint '>
<p>Prometheus 2.0 之前的版本支持 Protocol buffer 规范，2.0 及之后的版本不再支持 Protocol buffer</p>
</blockquote><p>Exporter 返回的样本数据，主要由三个部分组成：样本一般由 <code>注释信息（HELP）</code>，<code>样本的类型注释信息（TYPE）</code>和 <code>样本</code>组成。Prometheus 会对 Exporter 响应的内容逐行解析：</p>
<ol>
<li>如果当前行以 <code># HELP </code>开始，Prometheus 将按照以下规则对内容进行解析，得到当前指标名称以及相应的说明信息</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># HELP &lt;metrics_name&gt; &lt;doc_string&gt;</span></span></span></code></pre></div><ol start="2">
<li>如果当前行以 <code># TYPE</code> 开始，Prometheus 将按照以下规则对内容进行解析，得到当前指标名称以及指标类型</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># TYPE &lt;metrics_name&gt; &lt;metrics_type&gt;</span></span></span></code></pre></div><p><code>TYPE</code> 注释行必须出现在指标的第一个样本之前。如果没有明确指标类型需要返回为 <code>untyped</code> 。 除了 <code>#</code>  开头的所有行都会被视为是监控样本数据。 每一行样本需要满足以下格式规范：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>metric_name <span style="color:#f92672">[{</span>label_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;label_value&#34;</span><span style="color:#f92672">}</span> <span style="color:#f92672">]</span> value <span style="color:#f92672">[</span> timestamp <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 示例</span>
</span></span><span style="display:flex;"><span>node_cpu_seconds_total<span style="color:#f92672">{</span>cpu<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1&#34;</span>,mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;system&#34;</span><span style="color:#f92672">}</span> 2.2</span></span></code></pre></div><p>其中 <code>metric_name</code> 和 <code>label_name</code> 必须遵循 PromQL 的格式规范要求。value 是一个 float 格式的数据，timestamp 类型为 int64（从1970-01-01 00:00:00以来的毫秒数），timestamp 可选，默认为当前时间。具有相同metric_name 的样本必须按照一个组的形式排列，并且每一行必须是唯一的指标名称和标签键值对组合。</p>
<blockquote class='book-hint '>
<p>需要注意：对于 istogram 和 summary 类型的样本。按照以下约定返回样本数据：</p>
<ul>
<li>类型为 summary 或 histogram 的指标 x，该指标所有样本值的总和需要使用一个单独的 x_sum 指标表示</li>
<li>类型为 summary 或 histogram 的指标 x，该指标所有样本的总数需要使用一个单独的 x_count 指标表示</li>
<li>类型为 summary 的指标 x，其不同分位数 quantile 所代表的样本，需要使用单独的 <code>x{quantile=&quot;y&quot;}</code> 表示</li>
<li>类型 histogram 的指标 x，为了表示其样本的分布情况，每一个分布需要使用 <code>x_bucket{le=&quot;y&quot;}</code> 表示，其中 <code>y</code> 为当前分布的上位数。同时必须包含一个样本 <code>x_bucket{le=&quot;+Inf&quot;}</code> ，并且其样本值必须和 <code>x_count</code> 相同</li>
<li>对于 histogram 和 summary 的样本，必须按照分位数 <code>quantile</code> 和分布le的值的递增顺序排序</li>
</ul>
</blockquote><p>以下是类型为 histogram 和 summary 的样本输出示例：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># A histogram, which has a pretty complex representation in the text format:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># HELP http_request_duration_seconds A histogram of the request duration.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># TYPE http_request_duration_seconds histogram</span>
</span></span><span style="display:flex;"><span>http_request_duration_seconds_bucket<span style="color:#f92672">{</span>le<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0.05&#34;</span><span style="color:#f92672">}</span> <span style="color:#ae81ff">24054</span>
</span></span><span style="display:flex;"><span>http_request_duration_seconds_bucket<span style="color:#f92672">{</span>le<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0.1&#34;</span><span style="color:#f92672">}</span> <span style="color:#ae81ff">33444</span>
</span></span><span style="display:flex;"><span>http_request_duration_seconds_bucket<span style="color:#f92672">{</span>le<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0.2&#34;</span><span style="color:#f92672">}</span> <span style="color:#ae81ff">100392</span>
</span></span><span style="display:flex;"><span>http_request_duration_seconds_bucket<span style="color:#f92672">{</span>le<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;+Inf&#34;</span><span style="color:#f92672">}</span> <span style="color:#ae81ff">144320</span>
</span></span><span style="display:flex;"><span>http_request_duration_seconds_sum <span style="color:#ae81ff">53423</span>
</span></span><span style="display:flex;"><span>http_request_duration_seconds_count <span style="color:#ae81ff">144320</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Finally a summary, which has a complex representation, too:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># HELP rpc_duration_seconds A summary of the RPC duration in seconds.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># TYPE rpc_duration_seconds summary</span>
</span></span><span style="display:flex;"><span>rpc_duration_seconds<span style="color:#f92672">{</span>quantile<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0.01&#34;</span><span style="color:#f92672">}</span> <span style="color:#ae81ff">3102</span>
</span></span><span style="display:flex;"><span>rpc_duration_seconds<span style="color:#f92672">{</span>quantile<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0.05&#34;</span><span style="color:#f92672">}</span> <span style="color:#ae81ff">3272</span>
</span></span><span style="display:flex;"><span>rpc_duration_seconds<span style="color:#f92672">{</span>quantile<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0.5&#34;</span><span style="color:#f92672">}</span> <span style="color:#ae81ff">4773</span>
</span></span><span style="display:flex;"><span>rpc_duration_seconds_sum 1.7560473e+07
</span></span><span style="display:flex;"><span>rpc_duration_seconds_count <span style="color:#ae81ff">2693</span></span></span></code></pre></div><p>对于 Prometheus 还没有提供支持的编程语言，只需要按照以上规范返回响应的文本数据即可。</p>
<h1 id="指定样本格式">指定样本格式<a class="anchor" href="#%e6%8c%87%e5%ae%9a%e6%a0%b7%e6%9c%ac%e6%a0%bc%e5%bc%8f">#</a></h1>
<p>在 Exporter 响应的 HTTP 头信息中，可以通过 Content-Type 指定特定的规范版本，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>HTTP/1.1 <span style="color:#ae81ff">200</span> OK
</span></span><span style="display:flex;"><span>Content-Encoding: gzip
</span></span><span style="display:flex;"><span>Content-Length: <span style="color:#ae81ff">2906</span>
</span></span><span style="display:flex;"><span>Content-Type: text/plain; version<span style="color:#f92672">=</span>0.0.4
</span></span><span style="display:flex;"><span>Date: Sat, <span style="color:#ae81ff">17</span> Mar <span style="color:#ae81ff">2018</span> 08:47:06 GMT</span></span></code></pre></div><p>其中 version 用于指定 Text-based 的格式版本，当没有指定版本的时候，默认使用最新格式规范的版本。同时 HTTP 响应头还需要指定压缩格式为 gzip。</p>
<h1 id="常用--exporter">常用  Exporter<a class="anchor" href="#%e5%b8%b8%e7%94%a8--exporter">#</a></h1>
<h2 id="node-exporter">Node Exporter<a class="anchor" href="#node-exporter">#</a></h2>
<p>为了能够采集到主机的运行指标如：CPU、内存、磁盘等信息，需要在主机上安装一个 Node Exporter 程序，该程序对外暴露了一个用于获取当前监控样本数据的 HTTP 访问地址。这样的程序称为 Exporter，Exporter 的实例称为一个 Target。Prometheus 通过轮询的方式定时从这些 Target 中获取监控数据样本。</p>
<h3 id="安装">安装<a class="anchor" href="#%e5%ae%89%e8%a3%85">#</a></h3>
<p>Node Exporter 同样采用 Golang 编写，并且不存在任何的第三方依赖，只需要下载，解压即可运行。可以从 <a href="https://prometheus.io/download/">https://prometheus.io/download/</a> 获取最新的 Node Exporter 版本的二进制包。</p>
<p>在 <code>usr</code> 目录下创建 <code>exporter</code> 目录：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@wangpengliang101ecs ~<span style="color:#f92672">]</span><span style="color:#75715e"># cd /usr/</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@wangpengliang101ecs usr<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
</span></span><span style="display:flex;"><span>bin  etc  games  include  lib  lib64  libexec  local  sbin  share  src  tmp
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@wangpengliang101ecs usr<span style="color:#f92672">]</span><span style="color:#75715e"># mkdir exporter</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@wangpengliang101ecs usr<span style="color:#f92672">]</span><span style="color:#75715e"># cd exporter</span></span></span></code></pre></div><p>下载 Node Exporter.tar.gz 并解压到当前目录：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -LO https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@wangpengliang101ecs exporter<span style="color:#f92672">]</span><span style="color:#75715e"># tar -xzf node_exporter-1.3.1.linux-amd64.tar.gz</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@wangpengliang101ecs exporter<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
</span></span><span style="display:flex;"><span>node_exporter-1.3.1.linux-amd64  node_exporter-1.3.1.linux-amd64.tar.gz</span></span></code></pre></div><p>运行 <code>node exporter</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@wangpengliang101ecs exporter<span style="color:#f92672">]</span><span style="color:#75715e"># cd node_exporter-1.3.1.linux-amd64/</span>
</span></span><span style="display:flex;"><span>nohup ./node_exporter &amp; <span style="color:#75715e"># 后台运行,端口默认9100</span></span></span></code></pre></div><blockquote class='book-hint '>
<p>这里使用 <code>nohup</code> 后台运行 node_exporter，默认端口为 <code>9100</code>，如果端口有冲突可以通过 <code>--web.listen-address=:xxx</code> 进行修改</p>
</blockquote><p>启动成功后，查看端口</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@wangpengliang101ecs node_exporter-1.3.1.linux-amd64<span style="color:#f92672">]</span><span style="color:#75715e"># netstat -anplt|grep 9100</span>
</span></span><span style="display:flex;"><span>tcp6       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> :::9100                 :::*                    LISTEN     2443/./node_exporte
</span></span><span style="display:flex;"><span>tcp6       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> 172.17.135.171:9100     222.174.189.42:52597    ESTABLISHED 2443/./node_exporte</span></span></code></pre></div><h3 id="监控指标">监控指标<a class="anchor" href="#%e7%9b%91%e6%8e%a7%e6%8c%87%e6%a0%87">#</a></h3>
<p>访问 http://ipaddress:9100/metrics ，可以看到当前 <code>node exporter</code> 获取到的主机监控数据，如下所示：</p>
<p><img src="/images/2022-07-04-16-17-52.png" alt="" /></p>
<p>每一个监控指标之前都会有一段类似于如下形式的信息：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># HELP node_cpu Seconds the cpus spent in each mode.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># TYPE node_cpu counter</span>
</span></span><span style="display:flex;"><span>node_cpu<span style="color:#f92672">{</span>cpu<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cpu0&#34;</span>,mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;idle&#34;</span><span style="color:#f92672">}</span> 362812.7890625
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># HELP node_load1 1m load average.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># TYPE node_load1 gauge</span>
</span></span><span style="display:flex;"><span>node_load1 3.0703125</span></span></code></pre></div><p>其中 <code>HELP</code> 用于解释当前指标的含义，<code>TYPE</code> 则说明当前指标的数据类型。在上面的例子中:</p>
<ol>
<li>node_cpu 的注释表明当前指标是 cpu0 上 idle 进程占用CPU的总时间，CPU占用时间是一个只增不减的度量指标，从类型中也可以看出node_cpu的数据类型是计数器(counter)，与该指标的实际含义一致</li>
<li>node_load1 该指标反映了当前主机在最近一分钟以内的负载情况，系统的负载情况会随系统资源的使用而变化，因此 node_load1 反映的是当前状态，数据可能增加也可能减少，从注释中可以看出当前指标类型为仪表盘(gauge)，与指标反映的实际含义一致</li>
</ol>
<p>除了这些以外，根据物理主机系统的不同，还可能看到如下监控指标：</p>
<ul>
<li><code>node_boot_time</code>：系统启动时间</li>
<li><code>node_cpu</code>：系统CPU使用量</li>
<li><code>nodedisk</code>：磁盘IO</li>
<li><code>nodefilesystem</code>：文件系统用量</li>
<li><code>node_load1</code>：系统负载</li>
<li><code>nodememeory</code>：内存使用量</li>
<li><code>nodenetwork</code>：网络带宽</li>
<li><code>node_time</code>：当前系统时间</li>
<li><code>go_*</code>：node exporter中go相关指标</li>
<li><code>process_*</code>：node exporter自身进程相关运行指标</li>
</ul>
<h3 id="集成">集成<a class="anchor" href="#%e9%9b%86%e6%88%90">#</a></h3>
<p>为了能够让 Prometheus Server 能够从当前 Node Exporter 获取到监控数据，需要修改 Prometheus 配置文件。编辑 <code>prometheus.yml</code> 在 <code>scrape_configs</code> 节点下添加以下内容:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">scrape_configs</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">job_name</span>: <span style="color:#e6db74">&#39;prometheus&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">static_configs</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">targets</span>: [<span style="color:#e6db74">&#39;localhost:9090&#39;</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># 采集node exporter监控数据</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">job_name</span>: <span style="color:#e6db74">&#39;123.56.222.108&#39;</span> <span style="color:#75715e"># 这里jobname是自定义的</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">static_configs</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">targets</span>: [<span style="color:#e6db74">&#39;123.56.222.108:9100&#39;</span>]</span></span></code></pre></div><p>重新启动 Prometheus Server，如果 Prometheus 能够正常从 Node Exporter 获取数据，则会看到以下结果：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>up<span style="color:#f92672">{</span>instance<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;123.56.222.108:9100&#34;</span>, job<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;123.56.222.108:9100&#34;</span><span style="color:#f92672">}</span>    <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>up<span style="color:#f92672">{</span>instance<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;localhost:9090&#34;</span>, job<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;prometheus&#34;</span><span style="color:#f92672">}</span>       <span style="color:#ae81ff">1</span></span></span></code></pre></div><blockquote class='book-hint '>
<p>其中“1”表示正常，“0”则为异常。</p>
</blockquote><h3 id="自动重启">自动重启<a class="anchor" href="#%e8%87%aa%e5%8a%a8%e9%87%8d%e5%90%af">#</a></h3>
<p>添加 <code>node_exporter.service</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim /etc/systemd/system/node_exporter.service</span></span></code></pre></div><p>内容如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Description<span style="color:#f92672">=</span>node_exporter Monitoring System
</span></span><span style="display:flex;"><span>Documentation<span style="color:#f92672">=</span>node_exporter Monitoring System
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>ExecStart<span style="color:#f92672">=</span>/projects/node_exporter/node_exporter-1.3.1.linux-amd64/node_exporter --web.listen-address<span style="color:#f92672">=</span>:6060  <span style="color:#75715e"># 这里ExecStart地址为node_exporter安装地址</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>WantedBy<span style="color:#f92672">=</span>multi-user.target</span></span></code></pre></div><p>设置自动重启</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl daemon-reload
</span></span><span style="display:flex;"><span>systemctl start node_exporter.service
</span></span><span style="display:flex;"><span>systemctl status node_exporter.service
</span></span><span style="display:flex;"><span>systemctl enable node_exporter.service</span></span></code></pre></div><h2 id="cadvisor--exporter">Cadvisor  Exporter<a class="anchor" href="#cadvisor--exporter">#</a></h2>
<p>安装镜像</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker pull google/cadvisor:latest</span></span></code></pre></div><p>运行容器</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --volume<span style="color:#f92672">=</span>/:/rootfs:ro <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --volume<span style="color:#f92672">=</span>/var/run:/var/run:rw <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --volume<span style="color:#f92672">=</span>/sys:/sys:ro <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --volume<span style="color:#f92672">=</span>/var/lib/docker/:/var/lib/docker:ro <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --volume<span style="color:#f92672">=</span>/dev/disk/:/dev/disk:ro <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --publish<span style="color:#f92672">=</span>8080:8080 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --detach<span style="color:#f92672">=</span>true <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --name<span style="color:#f92672">=</span>cadvisor <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --privileged<span style="color:#f92672">=</span>true <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  google/cadvisor:latest</span></span></code></pre></div><p>开放端口</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>firewall-cmd --add-port<span style="color:#f92672">=</span>8080/tcp --permanent
</span></span><span style="display:flex;"><span>firewall-cmd --reload</span></span></code></pre></div><h1 id="任务和实例">任务和实例<a class="anchor" href="#%e4%bb%bb%e5%8a%a1%e5%92%8c%e5%ae%9e%e4%be%8b">#</a></h1>
<p>上面通过在 <code>prometheus.yml</code> 配置文件中，添加如下配置让 Prometheus 可以从 Node Exporter 暴露的服务中获取监控指标数据。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>  - <span style="color:#f92672">job_name</span>: <span style="color:#e6db74">&#39;123.56.222.108&#39;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">static_configs</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">targets</span>: [<span style="color:#e6db74">&#39;123.56.222.108:9100&#39;</span>]</span></span></code></pre></div><p>当需要采集不同的监控指标(例如：主机、MySQL、Nginx)时，只需要运行相应的监控采集程序，并且让 Prometheus Server 知道这些 Exporter 实例的访问地址。在 Prometheus 中，每一个暴露监控样本数据的HTTP服务称为一个实例。例如在当前主机上运行的 Node Exporter 可以被称为一个实例( <code>Instance</code> )。</p>
<p>而一组用于相同采集目的的实例，或者同一个采集进程的多个副本则通过一个一个任务(Job)进行管理。</p>
<pre tabindex="0"><code>* job: node
    * instance 2: 1.2.3.4:9100
    * instance 4: 5.6.7.8:9100</code></pre><p>当前在每一个 Job 中主要使用了静态配置( <code>static_configs</code> )的方式定义监控目标。除了静态配置每一个Job的采集Instance地址以外，Prometheus 还支持与 <code>DNS</code>、<code>Consul</code>、<code>E2C</code>、<code>Kubernetes</code> 等进行集成实现自动发现Instance实例，并从这些 Instance上获取监控数据。</p>
<p>除了通过使用“up”表达式查询当前所有Instance的状态以外，还可以通过Prometheus UI中的Targets页面查看当前所有的监控采集任务，以及各个任务下所有实例的状态：</p>
<p><img src="/images/2022-07-04-21-04-40.png" alt="" /></p>
<p>所以这里配置文件 <code>scrape_configs</code> 内容可以调整为：</p>
<pre tabindex="0"><code>scrape_configs:
  # The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.
  - job_name: &#39;prometheus&#39;

    # metrics_path defaults to &#39;/metrics&#39;
    # scheme defaults to &#39;http&#39;.

    static_configs:
    - targets: [&#39;localhost:9090&#39;,&#39;123.56.222.108:9100&#39;]</code></pre><p><img src="/images/2022-07-04-21-06-50.png" alt="" /></p>
</div>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">
  <div>
  
    <a href="/posts/prometheus/1.1prometheus%E7%AE%80%E4%BB%8B%E5%8F%8A%E5%AE%89%E8%A3%85/" class="flex align-center">
      <img src="/icons/backward.svg" class="book-icon" alt="Backward" />
      <span>1.1 Prometheus简介及安装</span>
    </a>
  
  </div>
  <div>
  
    <a href="/posts/prometheus/1.3promql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80/" class="flex align-center">
      <span>1.3 Prom Ql查询语言</span>
      <img src="/icons/forward.svg" class="book-icon" alt="Forward" />
    </a>
  
  </div>
</div>
 
        
  
 
        
        
  
 
        
  
  
    <script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script>
  

      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  
  <aside class="book-toc">
    <div class="book-toc-content">
      
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#社区提供">社区提供</a></li>
    <li><a href="#自定义创建">自定义创建</a></li>
  </ul>

  <ul>
    <li><a href="#独立使用">独立使用</a></li>
    <li><a href="#应用中集成">应用中集成</a></li>
  </ul>

  <ul>
    <li><a href="#node-exporter">Node Exporter</a>
      <ul>
        <li><a href="#安装">安装</a></li>
        <li><a href="#监控指标">监控指标</a></li>
        <li><a href="#集成">集成</a></li>
        <li><a href="#自动重启">自动重启</a></li>
      </ul>
    </li>
    <li><a href="#cadvisor--exporter">Cadvisor  Exporter</a></li>
  </ul>
</nav>



    </div>
  </aside>
  
 
  </main>

  
</body>
</html>





















<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="学习Go语言内置的 time 包的基本用法，time 包提供了时间的显示和计算用的函数。日历计算采用公历。
时间可分为时间点与时间段，Go 提供了以下两种基础类型
时间点 Time 时间段 Duration 除此之外也提供了以下类型，做一些特定的业务
时区 Location Ticker 定时器 Timer 时间点# 一般使用的所有与时间相关的业务都是基于点而延伸的，两点组成一个时间段，大多数应用也都是围绕这些点与面去做逻辑处理。
初始化# go 针对不同的参数类型提供了以下初始化的方式
// func Now() Time fmt.Println(time.Now()) // func Parse(layout, value string) (Time, error) time.Parse(&#34;2016-01-02 15:04:05&#34;, &#34;2018-04-23 12:24:51&#34;) // func ParseInLocation(layout, value string, loc *Location) (Time, error) (layout已带时区时可直接用Parse) time.ParseInLocation(&#34;2006-01-02 15:04:05&#34;, &#34;2017-05-11 14:06:06&#34;, time.Local) // func Unix(sec int64, nsec int64) Time time.Unix(1e9, 0) // func Date(year int, month Month, day, hour, min, sec, nsec int, loc *Location) Time time.Date(2018, 1, 2, 15, 30, 10, 0, time.Local) // func (t Time) In(loc *Location) Time 当前时间对应指定时区的时间 loc, _ := time.LoadLocation(&#34;America/Los_Angeles&#34;) fmt.Println(time.Now().In(loc)) // func (t Time) Local() Time获取到时间点之后为了满足业务和设计，需要转换成需要的格式，也就是所谓的时间格式化。
">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/posts/go/%E6%A0%87%E5%87%86%E5%BA%93/time/">
  <meta property="og:site_name" content="CODE&#39;NOTE">
  <meta property="og:title" content="CODE&#39;NOTE">
  <meta property="og:description" content="学习Go语言内置的 time 包的基本用法，time 包提供了时间的显示和计算用的函数。日历计算采用公历。
时间可分为时间点与时间段，Go 提供了以下两种基础类型
时间点 Time 时间段 Duration 除此之外也提供了以下类型，做一些特定的业务
时区 Location Ticker 定时器 Timer 时间点# 一般使用的所有与时间相关的业务都是基于点而延伸的，两点组成一个时间段，大多数应用也都是围绕这些点与面去做逻辑处理。
初始化# go 针对不同的参数类型提供了以下初始化的方式
// func Now() Time fmt.Println(time.Now()) // func Parse(layout, value string) (Time, error) time.Parse(&#34;2016-01-02 15:04:05&#34;, &#34;2018-04-23 12:24:51&#34;) // func ParseInLocation(layout, value string, loc *Location) (Time, error) (layout已带时区时可直接用Parse) time.ParseInLocation(&#34;2006-01-02 15:04:05&#34;, &#34;2017-05-11 14:06:06&#34;, time.Local) // func Unix(sec int64, nsec int64) Time time.Unix(1e9, 0) // func Date(year int, month Month, day, hour, min, sec, nsec int, loc *Location) Time time.Date(2018, 1, 2, 15, 30, 10, 0, time.Local) // func (t Time) In(loc *Location) Time 当前时间对应指定时区的时间 loc, _ := time.LoadLocation(&#34;America/Los_Angeles&#34;) fmt.Println(time.Now().In(loc)) // func (t Time) Local() Time获取到时间点之后为了满足业务和设计，需要转换成需要的格式，也就是所谓的时间格式化。">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">


  <meta itemprop="name" content="CODE&#39;NOTE">
  <meta itemprop="description" content="学习Go语言内置的 time 包的基本用法，time 包提供了时间的显示和计算用的函数。日历计算采用公历。
时间可分为时间点与时间段，Go 提供了以下两种基础类型
时间点 Time 时间段 Duration 除此之外也提供了以下类型，做一些特定的业务
时区 Location Ticker 定时器 Timer 时间点# 一般使用的所有与时间相关的业务都是基于点而延伸的，两点组成一个时间段，大多数应用也都是围绕这些点与面去做逻辑处理。
初始化# go 针对不同的参数类型提供了以下初始化的方式
// func Now() Time fmt.Println(time.Now()) // func Parse(layout, value string) (Time, error) time.Parse(&#34;2016-01-02 15:04:05&#34;, &#34;2018-04-23 12:24:51&#34;) // func ParseInLocation(layout, value string, loc *Location) (Time, error) (layout已带时区时可直接用Parse) time.ParseInLocation(&#34;2006-01-02 15:04:05&#34;, &#34;2017-05-11 14:06:06&#34;, time.Local) // func Unix(sec int64, nsec int64) Time time.Unix(1e9, 0) // func Date(year int, month Month, day, hour, min, sec, nsec int, loc *Location) Time time.Date(2018, 1, 2, 15, 30, 10, 0, time.Local) // func (t Time) In(loc *Location) Time 当前时间对应指定时区的时间 loc, _ := time.LoadLocation(&#34;America/Los_Angeles&#34;) fmt.Println(time.Now().In(loc)) // func (t Time) Local() Time获取到时间点之后为了满足业务和设计，需要转换成需要的格式，也就是所谓的时间格式化。">
  <meta itemprop="wordCount" content="705">

<title>Time | CODE&#39;NOTE</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/posts/go/%E6%A0%87%E5%87%86%E5%BA%93/time/">
<link rel="stylesheet" href="/book.min.6970156cec683193d93c9c4edaf0d56574e4361df2e0c1be4f697ae81c3ba55f.css" integrity="sha256-aXAVbOxoMZPZPJxO2vDVZXTkNh3y4MG&#43;T2l66Bw7pV8=" crossorigin="anonymous">


  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.3ed9c79c605914c45e19db90edfda0ca8d87c63064c1d6252862250c4e917346.js" integrity="sha256-PtnHnGBZFMReGduQ7f2gyo2HxjBkwdYlKGIlDE6Rc0Y=" crossorigin="anonymous"></script>



  
</head>
<body dir="ltr" class="book-kind-page book-type-posts">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>CODE&#39;NOTE</span>
  </a>
</h2>


<div class="book-search hidden">
  <input id="book-search-input" type="text" 
    placeholder="Search"
    aria-label="Search"
    maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>
























</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/icons/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>Time</h3>

  <label for="toc-control">
    
    <img src="/icons/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#初始化">初始化</a></li>
    <li><a href="#格式化">格式化</a>
      <ul>
        <li><a href="#to-string">to string</a></li>
        <li><a href="#to-time-stamp">to time stamp</a></li>
        <li><a href="#其他">其他</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#add">Add</a></li>
    <li><a href="#sub">Sub</a></li>
    <li><a href="#equal">Equal</a></li>
    <li><a href="#before">Before</a></li>
    <li><a href="#after">After</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
<article class="markdown book-post">
  <h1>
    Time
  </h1>
  


  

  


  <div class="book-post-content markdown-inner"><p>学习Go语言内置的 <code>time</code> 包的基本用法，<code>time</code> 包提供了时间的显示和计算用的函数。日历计算采用公历。</p>
<p>时间可分为时间点与时间段，Go 提供了以下两种基础类型</p>
<ul>
<li>时间点 <code>Time</code></li>
<li>时间段 <code>Duration</code></li>
</ul>
<p>除此之外也提供了以下类型，做一些特定的业务</p>
<ul>
<li>时区 <code>Location</code></li>
<li><code>Ticker</code></li>
<li>定时器 <code>Timer</code></li>
</ul>
<h1 id="时间点">时间点<a class="anchor" href="#%e6%97%b6%e9%97%b4%e7%82%b9">#</a></h1>
<p>一般使用的所有与时间相关的业务都是基于点而延伸的，两点组成一个时间段，大多数应用也都是围绕这些点与面去做逻辑处理。</p>
<h2 id="初始化">初始化<a class="anchor" href="#%e5%88%9d%e5%a7%8b%e5%8c%96">#</a></h2>
<p>go 针对不同的参数类型提供了以下初始化的方式</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>  <span style="color:#75715e">// func Now() Time</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// func Parse(layout, value string) (Time, error)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Parse</span>(<span style="color:#e6db74">&#34;2016-01-02 15:04:05&#34;</span>, <span style="color:#e6db74">&#34;2018-04-23 12:24:51&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// func ParseInLocation(layout, value string, loc *Location) (Time, error) (layout已带时区时可直接用Parse)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">ParseInLocation</span>(<span style="color:#e6db74">&#34;2006-01-02 15:04:05&#34;</span>, <span style="color:#e6db74">&#34;2017-05-11 14:06:06&#34;</span>, <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Local</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// func Unix(sec int64, nsec int64) Time</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Unix</span>(<span style="color:#ae81ff">1e9</span>, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// func Date(year int, month Month, day, hour, min, sec, nsec int, loc *Location) Time</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Date</span>(<span style="color:#ae81ff">2018</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Local</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// func (t Time) In(loc *Location) Time 当前时间对应指定时区的时间</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">loc</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">LoadLocation</span>(<span style="color:#e6db74">&#34;America/Los_Angeles&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>().<span style="color:#a6e22e">In</span>(<span style="color:#a6e22e">loc</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// func (t Time) Local() Time</span></span></span></code></pre></div><p>获取到时间点之后为了满足业务和设计，需要转换成需要的格式，也就是所谓的时间格式化。</p>
<h2 id="格式化">格式化<a class="anchor" href="#%e6%a0%bc%e5%bc%8f%e5%8c%96">#</a></h2>
<h3 id="to-string">to string<a class="anchor" href="#to-string">#</a></h3>
<p>格式化为字符串我们需要使用 time.Format 方法来转换成我们想要的格式</p>
<pre><code>  fmt.Println(time.Now().Format(&quot;2006-01-02 15:04:05&quot;))  // 2018-04-24 10:11:20
  fmt.Println(time.Now().Format(time.UnixDate))         // Tue Apr 24 09:59:02 CST 2018
</code></pre>
<p>Format 函数中可以指定你想使用的格式，同时 time 包中也给了一些我们常用的格式</p>
<pre tabindex="0"><code>const (
    ANSIC       = &#34;Mon Jan _2 15:04:05 2006&#34;
    UnixDate    = &#34;Mon Jan _2 15:04:05 MST 2006&#34;
    RubyDate    = &#34;Mon Jan 02 15:04:05 -0700 2006&#34;
    RFC822      = &#34;02 Jan 06 15:04 MST&#34;
    RFC822Z     = &#34;02 Jan 06 15:04 -0700&#34; // RFC822 with numeric zone
    RFC850      = &#34;Monday, 02-Jan-06 15:04:05 MST&#34;
    RFC1123     = &#34;Mon, 02 Jan 2006 15:04:05 MST&#34;
    RFC1123Z    = &#34;Mon, 02 Jan 2006 15:04:05 -0700&#34; // RFC1123 with numeric zone
    RFC3339     = &#34;2006-01-02T15:04:05Z07:00&#34;
    RFC3339Nano = &#34;2006-01-02T15:04:05.999999999Z07:00&#34;
    Kitchen     = &#34;3:04PM&#34;
    // Handy time stamps.
    Stamp      = &#34;Jan _2 15:04:05&#34;
    StampMilli = &#34;Jan _2 15:04:05.000&#34;
    StampMicro = &#34;Jan _2 15:04:05.000000&#34;
    StampNano  = &#34;Jan _2 15:04:05.000000000&#34;
)     </code></pre><p>注意: galang 中指定的特定时间格式为 &ldquo;2006-01-02 15:04:05 -0700 MST&rdquo;， 为了记忆方便，按照美式时间格式 月日时分秒年 外加时区 排列起来依次是 01/02 03:04:05PM ‘06 -0700，刚开始使用时需要注意。</p>
<h3 id="to-time-stamp">to time stamp<a class="anchor" href="#to-time-stamp">#</a></h3>
<p>​      func (t Time) Unix() int64
​      func (t Time) UnixNano() int64</p>
<pre><code>  fmt.Println(time.Now().Unix())

  // 获取指定日期的时间戳
  dt, _ := time.Parse(&quot;2016-01-02 15:04:05&quot;, &quot;2018-04-23 12:24:51&quot;)
  fmt.Println(dt.Unix())

  fmt.Println(time.Date(2018, 1,2,15,30,10,0, time.Local).Unix())
</code></pre>
<h3 id="其他">其他<a class="anchor" href="#%e5%85%b6%e4%bb%96">#</a></h3>
<p>time 包还提供了一些常用的方法，基本覆盖了大多数业务，从方法名就能知道代表的含义就不一一说明了。</p>
<pre><code>  func (t Time) Date() (year int, month Month, day int)
  func (t Time) Clock() (hour, min, sec int)
  func (t Time) Year() int
  func (t Time) Month() Month
  func (t Time) Day() int
  func (t Time) Hour() int
  func (t Time) Minute() int
  func (t Time) Second() int
  func (t Time) Nanosecond() int
  func (t Time) YearDay() int
  func (t Time) Weekday() Weekday
  func (t Time) ISOWeek() (year, week int)
  func (t Time) IsZero() bool
  func (t Time) Local() Time
  func (t Time) Location() *Location
  func (t Time) Zone() (name string, offset int)
  func (t Time) Unix() int64
</code></pre>
<h1 id="时间类型">时间类型<a class="anchor" href="#%e6%97%b6%e9%97%b4%e7%b1%bb%e5%9e%8b">#</a></h1>
<p><code>time.Time</code> 类型表示时间。可以通过 <code>time.Now()</code> 函数获取当前的时间对象，然后获取时间对象的年月日时分秒等信息。</p>
<p>示例代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">getTimeNow</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">now</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>() <span style="color:#75715e">//获取当前时间</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;current time:%v\n&#34;</span>, <span style="color:#a6e22e">now</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">year</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">Year</span>()     <span style="color:#75715e">//年</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">month</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">Month</span>()   <span style="color:#75715e">//月</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">day</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">Day</span>()       <span style="color:#75715e">//日</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">hour</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">Hour</span>()     <span style="color:#75715e">//小时</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">minute</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">Minute</span>() <span style="color:#75715e">//分钟</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">second</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">Second</span>() <span style="color:#75715e">//秒</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%d-%02d-%02d %02d:%02d:%02d\n&#34;</span>, <span style="color:#a6e22e">year</span>, <span style="color:#a6e22e">month</span>, <span style="color:#a6e22e">day</span>, <span style="color:#a6e22e">hour</span>, <span style="color:#a6e22e">minute</span>, <span style="color:#a6e22e">second</span>)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h1 id="时间戳">时间戳<a class="anchor" href="#%e6%97%b6%e9%97%b4%e6%88%b3">#</a></h1>
<p>时间戳是自 <code>1970年1月1日（08:00:00GMT）</code>至当前时间的总毫秒数。也被称为 <code>Unix时间戳</code>。</p>
<p>示例代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// 获取时间戳</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">getUnix</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 获取时间戳</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">timestamp1</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>().<span style="color:#a6e22e">Unix</span>()     <span style="color:#75715e">//时间戳</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">timestamp2</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>().<span style="color:#a6e22e">UnixNano</span>() <span style="color:#75715e">//纳秒时间戳</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;current timestamp1:%v\n&#34;</span>, <span style="color:#a6e22e">timestamp1</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;current timestamp2:%v\n&#34;</span>, <span style="color:#a6e22e">timestamp2</span>)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>使用 <code>time.Unix()</code> 函数可以将时间戳转为时间格式。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">unixConverTime</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 将时间戳转换为时间格式</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">timestamp</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>().<span style="color:#a6e22e">Unix</span>() <span style="color:#75715e">//时间戳</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;current timestamp1:%v\n&#34;</span>, <span style="color:#a6e22e">timestamp</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">timeObj</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Unix</span>(<span style="color:#a6e22e">timestamp</span>, <span style="color:#ae81ff">0</span>) <span style="color:#75715e">//将时间戳转为时间格式</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">timeObj</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">year</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">timeObj</span>.<span style="color:#a6e22e">Year</span>()     <span style="color:#75715e">//年</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">month</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">timeObj</span>.<span style="color:#a6e22e">Month</span>()   <span style="color:#75715e">//月</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">day</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">timeObj</span>.<span style="color:#a6e22e">Day</span>()       <span style="color:#75715e">//日</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">hour</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">timeObj</span>.<span style="color:#a6e22e">Hour</span>()     <span style="color:#75715e">//小时</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">minute</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">timeObj</span>.<span style="color:#a6e22e">Minute</span>() <span style="color:#75715e">//分钟</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">second</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">timeObj</span>.<span style="color:#a6e22e">Second</span>() <span style="color:#75715e">//秒</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%d-%02d-%02d %02d:%02d:%02d\n&#34;</span>, <span style="color:#a6e22e">year</span>, <span style="color:#a6e22e">month</span>, <span style="color:#a6e22e">day</span>, <span style="color:#a6e22e">hour</span>, <span style="color:#a6e22e">minute</span>, <span style="color:#a6e22e">second</span>)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h1 id="时间间隔">时间间隔<a class="anchor" href="#%e6%97%b6%e9%97%b4%e9%97%b4%e9%9a%94">#</a></h1>
<p><code>time.Duration</code> 是 <code>time</code> 包定义的一个类型，它代表两个时间点之间经过的时间，以纳秒为单位。<code>time.Duration</code> 表示一段时间间隔，可表示的最长时间段大约290年。</p>
<p><code>time</code> 包中定义的时间间隔类型的常量如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Nanosecond</span>  <span style="color:#a6e22e">Duration</span> = <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Microsecond</span>          = <span style="color:#ae81ff">1000</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">Nanosecond</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Millisecond</span>          = <span style="color:#ae81ff">1000</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">Microsecond</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Second</span>               = <span style="color:#ae81ff">1000</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">Millisecond</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Minute</span>               = <span style="color:#ae81ff">60</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">Second</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Hour</span>                 = <span style="color:#ae81ff">60</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">Minute</span>
</span></span><span style="display:flex;"><span>)</span></span></code></pre></div><p>例如：<code>time.Duration</code> 表示1纳秒，<code>time.Second</code> 表示1秒。</p>
<h1 id="时间操作">时间操作<a class="anchor" href="#%e6%97%b6%e9%97%b4%e6%93%8d%e4%bd%9c">#</a></h1>
<h2 id="add">Add<a class="anchor" href="#add">#</a></h2>
<p>求时间+n后的时间：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">t</span> <span style="color:#a6e22e">Time</span>) <span style="color:#a6e22e">Add</span>(<span style="color:#a6e22e">d</span> <span style="color:#a6e22e">Duration</span>) <span style="color:#a6e22e">Time</span></span></span></code></pre></div><p>示例代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">timeAdd</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">now</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">value</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Hour</span>) <span style="color:#75715e">// 当前时间加1小时后的时间</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">value</span>)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h2 id="sub">Sub<a class="anchor" href="#sub">#</a></h2>
<p>求两个时间之间的差值：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">t</span> <span style="color:#a6e22e">Time</span>) <span style="color:#a6e22e">Sub</span>(<span style="color:#a6e22e">u</span> <span style="color:#a6e22e">Time</span>) <span style="color:#a6e22e">Duration</span></span></span></code></pre></div><p>示例代码如下：</p>
<pre tabindex="0"><code>func timeSub() {
	now := time.Now()
	value := now.Sub(now.Add(time.Hour))
	fmt.Println(value)
}</code></pre><p>返回一个时间段 <code>t-u</code>。如果结果超出了 <code>Duration</code> 可以表示的最大值/最小值，将返回最大值/最小值。要获取时间点 <code>t-d</code>（d为Duration），可以使用 <code>t.Add(-d)</code>。</p>
<h2 id="equal">Equal<a class="anchor" href="#equal">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">t</span> <span style="color:#a6e22e">Time</span>) <span style="color:#a6e22e">Equal</span>(<span style="color:#a6e22e">u</span> <span style="color:#a6e22e">Time</span>) <span style="color:#66d9ef">bool</span></span></span></code></pre></div><p>判断两个时间是否相同，会考虑时区的影响，因此不同时区标准的时间也可以正确比较。本方法和用 <code>t==u</code> 不同，这种方法还会比较地点和时区信息。</p>
<h2 id="before">Before<a class="anchor" href="#before">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">t</span> <span style="color:#a6e22e">Time</span>) <span style="color:#a6e22e">Before</span>(<span style="color:#a6e22e">u</span> <span style="color:#a6e22e">Time</span>) <span style="color:#66d9ef">bool</span></span></span></code></pre></div><p>如果t代表的时间点在u之前，返回真；否则返回假。</p>
<h2 id="after">After<a class="anchor" href="#after">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">t</span> <span style="color:#a6e22e">Time</span>) <span style="color:#a6e22e">After</span>(<span style="color:#a6e22e">u</span> <span style="color:#a6e22e">Time</span>) <span style="color:#66d9ef">bool</span></span></span></code></pre></div><p>如果t代表的时间点在u之后，返回真；否则返回假。</p>
<p>定时器</p>
<p>使用<code>time.Tick(时间间隔)</code>来设置定时器，定时器的本质上是一个通道（channel）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">tickDemo</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">ticker</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Tick</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>) <span style="color:#75715e">//定义一个1秒间隔的定时器</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">ticker</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>)<span style="color:#75715e">//每秒都会执行的任务</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h1 id="时间格式化">时间格式化<a class="anchor" href="#%e6%97%b6%e9%97%b4%e6%a0%bc%e5%bc%8f%e5%8c%96">#</a></h1>
<p>时间类型有一个自带的方法<code>Format</code>进行格式化，需要注意的是Go语言中格式化时间模板不是常见的<code>Y-m-d H:M:S</code>而是使用Go的诞生时间2006年1月2号15点04分（记忆口诀为2006 1 2 3 4）。也许这就是技术人员的浪漫吧。</p>
<p>补充：如果想格式化为12小时方式，需指定<code>PM</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">formatDemo</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">now</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 格式化的模板为Go的出生时间2006年1月2号15点04分 Mon Jan</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 24小时制</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">Format</span>(<span style="color:#e6db74">&#34;2006-01-02 15:04:05.000 Mon Jan&#34;</span>))
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 12小时制</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">Format</span>(<span style="color:#e6db74">&#34;2006-01-02 03:04:05.000 PM Mon Jan&#34;</span>))
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">Format</span>(<span style="color:#e6db74">&#34;2006/01/02 15:04&#34;</span>))
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">Format</span>(<span style="color:#e6db74">&#34;15:04 2006/01/02&#34;</span>))
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">Format</span>(<span style="color:#e6db74">&#34;2006/01/02&#34;</span>))
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h1 id="解析字符串格式的时间">解析字符串格式的时间<a class="anchor" href="#%e8%a7%a3%e6%9e%90%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%a0%bc%e5%bc%8f%e7%9a%84%e6%97%b6%e9%97%b4">#</a></h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">now</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">now</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 加载时区</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">loc</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">LoadLocation</span>(<span style="color:#e6db74">&#34;Asia/Shanghai&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 按照指定时区和指定格式解析字符串时间</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">timeObj</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">ParseInLocation</span>(<span style="color:#e6db74">&#34;2006/01/02 15:04:05&#34;</span>, <span style="color:#e6db74">&#34;2019/08/04 14:15:20&#34;</span>, <span style="color:#a6e22e">loc</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">timeObj</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">timeObj</span>.<span style="color:#a6e22e">Sub</span>(<span style="color:#a6e22e">now</span>))</span></span></code></pre></div><p>练习题：</p>
</div>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">
  <div>
  
    <a href="/posts/go/%E6%A0%87%E5%87%86%E5%BA%93/log/" class="flex align-center">
      <img src="/icons/backward.svg" class="book-icon" alt="Backward" />
      <span>Log</span>
    </a>
  
  </div>
  <div>
  
    <a href="/posts/kubernetes/kubernetes%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="flex align-center">
      <span>Kubernetes基础知识</span>
      <img src="/icons/forward.svg" class="book-icon" alt="Forward" />
    </a>
  
  </div>
</div>
 
        
  
 
        
        
  
 
        
  
  
    <script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script>
  

      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  
  <aside class="book-toc">
    <div class="book-toc-content">
      
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#初始化">初始化</a></li>
    <li><a href="#格式化">格式化</a>
      <ul>
        <li><a href="#to-string">to string</a></li>
        <li><a href="#to-time-stamp">to time stamp</a></li>
        <li><a href="#其他">其他</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#add">Add</a></li>
    <li><a href="#sub">Sub</a></li>
    <li><a href="#equal">Equal</a></li>
    <li><a href="#before">Before</a></li>
    <li><a href="#after">After</a></li>
  </ul>
</nav>



    </div>
  </aside>
  
 
  </main>

  
</body>
</html>





















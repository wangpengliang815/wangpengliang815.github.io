<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ğŸ’« Microservice on CODE&#39;NOTE</title>
    <link>http://localhost:1313/docs/microservice/</link>
    <description>Recent content in ğŸ’« Microservice on CODE&#39;NOTE</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <atom:link href="http://localhost:1313/docs/microservice/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title></title>
      <link>http://localhost:1313/docs/microservice/1.1%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8B%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/microservice/1.1%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8B%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/</guid>
      <description>&lt;h1 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;a class=&#34;anchor&#34; href=&#34;#%e5%89%8d%e8%a8%80&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;æ­¤ç³»åˆ—æ—¨åœ¨å¤ä¹ å¾®æœåŠ¡çš„ç›¸å…³çŸ¥è¯†ï¼Œç¤ºä¾‹ä»£ç ä¸­ä¸ä¼šå‡ºç°èšåˆã€èšåˆæ ¹ã€æœåŠ¡æ‹†åˆ†ç­‰ç›¸å…³æ¦‚å¿µï¼ˆä¸ä¼šæ¶‰åŠåˆ°é¢†åŸŸé©±åŠ¨ç›¸å…³çŸ¥è¯†ï¼‰ï¼Œåªä½¿ç”¨æœ€ç®€å•çš„&lt;code&gt;.Net Core Web&lt;/code&gt;ç¨‹åºï¼Œä¸»è¦å…³æ³¨ç‚¹åœ¨äºï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;å¦‚ä½•ä½¿ç”¨ Docker éƒ¨ç½² &lt;code&gt;.NetCore&lt;/code&gt; åº”ç”¨&lt;/li&gt;&#xA;&lt;li&gt;åº”ç”¨ç¨‹åºçš„ DockerFile ç¼–å†™&lt;/li&gt;&#xA;&lt;li&gt;æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°æ˜¯ä»€ä¹ˆï¼Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/li&gt;&#xA;&lt;li&gt;ç½‘å…³ç”¨æ¥åšä»€ä¹ˆï¼ŸæœåŠ¡æ²»ç†ç›¸å…³ï¼ˆç†”æ–­/é™æµ/é™çº§/é“¾è·¯è¿½è¸ª/ç¼“å­˜&amp;hellip;ï¼‰&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;!-- more --&gt;&#xA;&lt;h1 id=&#34;å¾®æœåŠ¡æ¦‚å¿µ&#34;&gt;å¾®æœåŠ¡æ¦‚å¿µ&lt;a class=&#34;anchor&#34; href=&#34;#%e5%be%ae%e6%9c%8d%e5%8a%a1%e6%a6%82%e5%bf%b5&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;å…³äºå¾®æœåŠ¡çš„æ¦‚å¿µè§£é‡Šç½‘ä¸Šæœ‰å¾ˆå¤šï¼Œæ¯ä¸ªäººçš„ç†è§£éƒ½ä¸åŒã€‚è‡³äºä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¾®æœåŠ¡ï¼Ÿå¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹ç­‰ç›¸å…³é—®é¢˜æ¯ä¸ªäººç†è§£ä¸åŒã€‚ä¸ªäººç†è§£ï¼šå¾®æœåŠ¡æ˜¯ä¸€ç§ç³»ç»Ÿæ¶æ„æ¨¡å¼ï¼Œå’Œè¯­è¨€æ— å…³ï¼Œæ¡†æ¶æ— å…³ï¼Œå·¥å…·æ— å…³ï¼ŒæœåŠ¡å™¨ç¯å¢ƒæ— å…³ï¼Œå¾®æœåŠ¡ç›®çš„æ˜¯ï¼šå°†ä¼ ç»Ÿå•ä½“ç³»ç»ŸæŒ‰ç…§ä¸šåŠ¡æ‹†åˆ†æˆå¤šä¸ªèŒè´£å•ä¸€ã€ä¸”å¯ç‹¬ç«‹è¿è¡Œçš„æœåŠ¡ã€‚è‡³äºæœåŠ¡å¦‚ä½•æ‹†åˆ†ï¼Œæ²¡æœ‰æ˜ç¡®çš„å®šä¹‰ã€‚é‡‡ç”¨å¾®æœåŠ¡ä¼˜ç‚¹æ˜¯ï¼šæ¯ä¸ªæœåŠ¡çš„èŒè´£å•ä¸€ä¸”å¯ç‹¬ç«‹éƒ¨ç½²ã€ä¸åŒæœåŠ¡é—´é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡åè®®ä½œä¸ºé€šä¿¡åŸåˆ™ï¼Œæ¾è€¦åˆã€‚è¿™æ ·ä¸åŒæœåŠ¡å°±å¯ä»¥ä½¿ç”¨ä¸åŒçš„æŠ€æœ¯æ ˆï¼ˆä¼˜åŠ¿è¯­è¨€ï¼‰ï¼Œç¼ºç‚¹çš„è¯æ˜¯ï¼šå¾®æœåŠ¡æ¶æ„é¿å…ä¸äº†ä¼šå¼•å…¥æ›´å¤šæŠ€æœ¯æ ˆã€ä¸­é—´ä»¶ç­‰ç­‰å¢åŠ ç³»ç»Ÿå¤æ‚åº¦ã€‚ï¼ˆå¾®æœåŠ¡ä¸æ˜¯é“¶å¼¹ï¼Œè¦æ ¹æ®å®é™…ä¸šåŠ¡ä½“é‡è€ƒè™‘æ˜¯å¦ä½¿ç”¨ï¼Œå¦åˆ™åªä¼šå¾’å¢ä¸å¿…è¦çš„éº»çƒ¦ï¼‰&lt;/p&gt;&#xA;&lt;h1 id=&#34;é¡¹ç›®ç»“æ„æ­å»º&#34;&gt;é¡¹ç›®ç»“æ„æ­å»º&lt;a class=&#34;anchor&#34; href=&#34;#%e9%a1%b9%e7%9b%ae%e7%bb%93%e6%9e%84%e6%90%ad%e5%bb%ba&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;&lt;img src=&#34;http://localhost:1313/images/2021-09-17-17-31-42.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;Order.Api&lt;/code&gt;ï¼šè®¢å•æœåŠ¡&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;Web.Client&lt;/code&gt;ï¼šæµ‹è¯•ä½¿ç”¨çš„å®¢æˆ·ç«¯&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;åˆ›å»ºé¡¹ç›®æ—¶å¯ç”¨Dockeræ”¯æŒï¼Œæˆ–è€…ä¹‹åæ·»åŠ ä¹Ÿå¯ä»¥ã€‚æ·»åŠ åŸºç¡€ä»£ç ï¼Œç®€å•çš„è¿”å›æœåŠ¡åç§°ã€å½“å‰æ—¶é—´ã€æœåŠ¡IPã€ç«¯å£ï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; Microsoft.AspNetCore.Mvc;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; Microsoft.Extensions.Configuration;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; System;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;namespace&lt;/span&gt; Order.Api.Controller&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;    [Route(&amp;#34;[Controller]&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;)]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;    [ApiController]&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;OrdersController&lt;/span&gt; : ControllerBase&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;        [HttpGet]&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; IActionResult Index()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; result = &lt;span style=&#34;color:#e6db74&#34;&gt;$&amp;#34;è®¢å•æœåŠ¡ï¼š{DateTime.Now:yyyy-MM-dd HH:mm:ss},-{Request.HttpContext.Connection.LocalIpAddress}:{Request.HttpContext.Connection.LocalPort}&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Ok(result);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;å®¹å™¨åŒ–éƒ¨ç½²&#34;&gt;å®¹å™¨åŒ–éƒ¨ç½²&lt;a class=&#34;anchor&#34; href=&#34;#%e5%ae%b9%e5%99%a8%e5%8c%96%e9%83%a8%e7%bd%b2&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;ä»£ç å°±å†™è¿™ä¹ˆç®€å•ï¼Œä¸‹é¢ä½¿ç”¨Dockeræ¥éƒ¨ç½²è®¢å•æœåŠ¡ã€‚è¿™é‡Œå…ˆäº†è§£ä¸€ä¸‹å¦‚æœå¯ç”¨äº†Dockeræ”¯æŒï¼ŒVSé»˜è®¤ç”Ÿæˆçš„ &lt;code&gt;Dockerfile&lt;/code&gt; æ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#See https://aka.ms/containerfastmode to understand how Visual Studio uses this Dockerfile to build your images for faster debugging.&#xA;&#xA;FROM mcr.microsoft.com/dotnet/aspnet:5.0 AS base&#xA;WORKDIR /app&#xA;EXPOSE 80&#xA;&#xA;FROM mcr.microsoft.com/dotnet/sdk:5.0 AS build&#xA;WORKDIR /src&#xA;COPY [&amp;#34;Order.Api/Order.Api.csproj&amp;#34;, &amp;#34;Order.Api/&amp;#34;]&#xA;RUN dotnet restore &amp;#34;Order.Api/Order.Api.csproj&amp;#34;&#xA;COPY . .&#xA;WORKDIR &amp;#34;/src/Order.Api&amp;#34;&#xA;RUN dotnet build &amp;#34;Order.Api.csproj&amp;#34; -c Release -o /app/build&#xA;&#xA;FROM build AS publish&#xA;RUN dotnet publish &amp;#34;Order.Api.csproj&amp;#34; -c Release -o /app/publish&#xA;&#xA;FROM base AS final&#xA;WORKDIR /app&#xA;COPY --from=publish /app/publish .&#xA;ENTRYPOINT [&amp;#34;dotnet&amp;#34;, &amp;#34;Order.Api.dll&amp;#34;]&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…³äº&lt;code&gt;Dockerfile&lt;/code&gt; å„ä¸ªå‘½ä»¤çš„ä½œç”¨è¿™é‡Œä¸å†è§£é‡Šï¼Œå¯ä»¥å‚è€ƒ  &lt;a href=&#34;https://wpl.wiki/docker/1.8Dockerfile&#34;&gt;ã€Dockerfileã€‘&lt;/a&gt;ã€‚è¿™é‡Œçš„ &lt;code&gt;Dockerfile&lt;/code&gt; æ–‡ä»¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå› ä¸ºæˆ‘é‡‡ç”¨çš„æ–¹å¼æ˜¯ï¼šå°†å‘å¸ƒåçš„åº”ç”¨éƒ¨ç½²åˆ° &lt;code&gt;Centos&lt;/code&gt; =&amp;gt; &lt;code&gt;docker buildé•œåƒ&lt;/code&gt;=&amp;gt;&lt;code&gt;è¿è¡Œå®¹å™¨&lt;/code&gt;ã€‚è·³è¿‡äº†è¿™é‡Œçš„ &lt;code&gt;dotnet restore&lt;/code&gt; å’Œ &lt;code&gt;dotnet publish&lt;/code&gt;ã€‚ä¿®æ”¹åçš„ &lt;code&gt;Dockerfile&lt;/code&gt;å¦‚ä¸‹ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title></title>
      <link>http://localhost:1313/docs/microservice/1.2%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8B%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/microservice/1.2%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8B%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/</guid>
      <description>&lt;h1 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;a class=&#34;anchor&#34; href=&#34;#%e5%89%8d%e8%a8%80&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;ä¸Šä¸€ç¯‡è¯´åˆ°è¦åšåˆ°æœåŠ¡çš„çµæ´»ä¼¸ç¼©éœ€è¦æœ‰ä¸€ç§æœºåˆ¶æ¥å®ç°ï¼Œè¿™ä¸ªæœºåˆ¶å°±æ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°ã€‚è¿™å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œå¦‚æœæœåŠ¡å®ä¾‹å¾ˆå°‘å¹¶ä¸”å¾ˆç¨³å®šï¼Œå°±æ²¡æœ‰å¿…è¦ä½¿ç”¨ã€‚&lt;/p&gt;&#xA;&lt;!-- more --&gt;&#xA;&lt;h1 id=&#34;æ¦‚å¿µ&#34;&gt;æ¦‚å¿µ&lt;a class=&#34;anchor&#34; href=&#34;#%e6%a6%82%e5%bf%b5&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;æœåŠ¡æ³¨å†Œï¼šç®€å•ç†è§£å°±æ˜¯æœ‰ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒï¼Œæ¯ä¸ªæœåŠ¡å®ä¾‹å¯åŠ¨æ—¶éƒ½å»æ³¨å†Œä¸­å¿ƒæ³¨å†Œï¼Œå‘Šè¯‰æ³¨å†Œä¸­å¿ƒåœ°å€ï¼Œç«¯å£ç­‰ä¿¡æ¯ã€‚åŒæ ·åˆ é™¤æ—¶ï¼Œä¹Ÿéœ€è¦å»æ³¨å†Œä¸­å¿ƒåˆ é™¤ï¼Œæ³¨å†Œä¸­å¿ƒè´Ÿè´£ç»´æŠ¤è¿™äº›æœåŠ¡å®ä¾‹çš„ä¿¡æ¯&lt;/li&gt;&#xA;&lt;li&gt;æœåŠ¡å‘ç°ï¼šæ—¢ç„¶æ³¨å†Œä¸­å¿ƒç»´æŠ¤äº†å„ä¸ªæœåŠ¡å®ä¾‹çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯é€šè¿‡æ³¨å†Œä¸­å¿ƒå°±å¾ˆå®¹æ˜“èƒ½å‘ç°æœåŠ¡çš„å˜åŒ–ã€‚æœ‰äº†æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼Œå®¢æˆ·ç«¯å°±ä¸ç”¨å†å»é…ç½®å„ä¸ªæœåŠ¡å®ä¾‹çš„åœ°å€ï¼Œæ”¹ä¸ºä»æ³¨å†Œä¸­å¿ƒç»Ÿä¸€è·å–&lt;/li&gt;&#xA;&lt;li&gt;å¥åº·æ£€æŸ¥ï¼šæ³¨å†Œä¸­å¿ƒè¦ä¿è¯æ¯ä¸ªåœ°å€çš„å¯ç”¨çŠ¶æ€ï¼ŒæŒ‚æ‰çš„å®ä¾‹ä¸åº”è¯¥è¢«å®¢æˆ·ç«¯è·å–åˆ°ï¼Œæ‰€ä»¥éœ€è¦ï¼šå¥åº·æ£€æŸ¥ã€‚æ¯ä¸ªæœåŠ¡éƒ½éœ€è¦æä¾›ä¸€ä¸ªç”¨äºå¥åº·æ£€æŸ¥çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¸å…·å¤‡ä»»ä½•ä¸šåŠ¡åŠŸèƒ½ã€‚æœåŠ¡æ³¨å†Œæ—¶æŠŠè¿™ä¸ªæ¥å£çš„åœ°å€ä¹Ÿå‘Šè¯‰æ³¨å†Œä¸­å¿ƒï¼Œæ³¨å†Œä¸­å¿ƒä¼šå®šæ—¶è°ƒç”¨è¿™ä¸ªæ¥å£æ¥æ£€æµ‹æœåŠ¡æ˜¯å¦æ­£å¸¸ï¼Œå¦‚æœä¸æ­£å¸¸ï¼Œåˆ™å°†å®ƒç§»é™¤ï¼Œè¿™æ ·æ¥ä¿è¯äº†æœåŠ¡çš„å¯ç”¨æ€§&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;å¸¸è§æ³¨å†Œä¸­å¿ƒæœ‰ &lt;code&gt;Consul&lt;/code&gt;ã€&lt;code&gt;ZooKeeper&lt;/code&gt;ã€&lt;code&gt;etcd&lt;/code&gt;ã€&lt;code&gt;Eureka&lt;/code&gt;ã€‚&lt;/p&gt;&#xA;&lt;h1 id=&#34;consul&#34;&gt;Consul&lt;a class=&#34;anchor&#34; href=&#34;#consul&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;Consulå®˜ç½‘ï¼šhttps://www.consul.ioï¼Œä¸»è¦åŠŸèƒ½æœ‰æœåŠ¡æ³¨å†Œä¸å‘ç°ã€å¥åº·æ£€æŸ¥ã€K-Vå­˜å‚¨ã€å¤šæ•°æ®ä¸­å¿ƒç­‰ï¼Œè¿™é‡Œä¸åšè¯¦ç»†ä»‹ç»ã€‚&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;å®‰è£…ï¼šç›´æ¥åœ¨å®˜ç½‘ä¸‹è½½è§£å‹å³å¯&lt;/li&gt;&#xA;&lt;li&gt;è¿è¡Œï¼šåœ¨ &lt;code&gt;consul.exe&lt;/code&gt; ç›®å½•ä¸‹æ‰“å¼€å‘½ä»¤è¡Œæ‰§è¡Œ &lt;code&gt;consul.exe agent -dev&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8500&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;è¿™é‡Œé€‰æ‹©ä½¿ç”¨Dockeræ¥éƒ¨ç½²Consulï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; docker pull consul &lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker run -d -p 8500:8500 --restart&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;always --name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;consul consul:latest agent -server -bootstrap -ui -node&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; -client&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;0.0.0.0&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;agent&lt;/code&gt;ï¼š è¡¨ç¤ºå¯åŠ¨ Agent è¿›ç¨‹&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;server&lt;/code&gt;ï¼šè¡¨ç¤ºå¯åŠ¨ Consul Server æ¨¡å¼&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;client&lt;/code&gt;ï¼šè¡¨ç¤ºå¯åŠ¨ Consul Cilent æ¨¡å¼&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;bootstrap&lt;/code&gt;ï¼šè¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹æ˜¯ Server-Leader ï¼Œæ¯ä¸ªæ•°æ®ä¸­å¿ƒåªèƒ½è¿è¡Œä¸€å°æœåŠ¡å™¨ã€‚æŠ€æœ¯è§’åº¦ä¸Šæ¥çœ‹ Leader æ˜¯é€šè¿‡ Raft ç®—æ³•é€‰ä¸¾çš„ï¼Œä½†æ˜¯é›†ç¾¤ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶éœ€è¦ä¸€ä¸ªå¼•å¯¼ Leaderï¼Œåœ¨å¼•å¯¼ç¾¤é›†åï¼Œå»ºè®®ä¸è¦ä½¿ç”¨æ­¤æ ‡å¿—&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;ui&lt;/code&gt;ï¼šè¡¨ç¤ºå¯åŠ¨ Web UI ç®¡ç†å™¨ï¼Œé»˜è®¤å¼€æ”¾ç«¯å£ &lt;code&gt;8500&lt;/code&gt;ï¼Œæ‰€ä»¥ä¸Šé¢ä½¿ç”¨ Docker å‘½ä»¤æŠŠ &lt;code&gt;8500&lt;/code&gt; ç«¯å£å¯¹å¤–å¼€æ”¾&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;node&lt;/code&gt;ï¼šèŠ‚ç‚¹çš„åç§°ï¼Œé›†ç¾¤ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œé»˜è®¤æ˜¯è¯¥èŠ‚ç‚¹çš„ä¸»æœºå&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;client&lt;/code&gt;ï¼šConsulæœåŠ¡ç›‘å¬åœ°å€ï¼Œè¿™æä¾›&lt;code&gt;HTTP&lt;/code&gt;ã€&lt;code&gt;DNS&lt;/code&gt;ã€&lt;code&gt;RPC&lt;/code&gt;ç­‰æœåŠ¡ï¼Œé»˜è®¤æ˜¯ &lt;code&gt;127.0.0.1&lt;/code&gt; æ‰€ä»¥ä¸å¯¹å¤–æä¾›æœåŠ¡ï¼Œå¦‚æœè¦å¯¹å¤–æä¾›æœåŠ¡æ”¹æˆ &lt;code&gt;0.0.0.0&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;join&lt;/code&gt;ï¼šè¡¨ç¤ºåŠ å…¥åˆ°æŸä¸€ä¸ªé›†ç¾¤ä¸­ã€‚ å¦‚ï¼š&lt;code&gt;-json=192.168.0.11&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;img src=&#34;http://localhost:1313/images/2021-09-17-20-00-01.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title></title>
      <link>http://localhost:1313/docs/microservice/1.3%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8B%E7%BD%91%E5%85%B3/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/microservice/1.3%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8B%E7%BD%91%E5%85%B3/</guid>
      <description>&lt;h1 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;a class=&#34;anchor&#34; href=&#34;#%e5%89%8d%e8%a8%80&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;ä¸Šä¸€ç¯‡ä½¿ç”¨ Consul å®Œæˆäº†æœåŠ¡çš„æ³¨å†Œä¸å‘ç°ï¼Œå®é™…ä¸­å…‰æœ‰æœåŠ¡æ³¨å†Œä¸å‘ç°å¾€å¾€æ˜¯ä¸å¤Ÿçš„ï¼Œéœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„å…¥å£æ¥è¿æ¥å®¢æˆ·ç«¯ä¸æœåŠ¡ã€‚&lt;/p&gt;&#xA;&lt;!-- more --&gt;&#xA;&lt;h1 id=&#34;ocelot&#34;&gt;Ocelot&lt;a class=&#34;anchor&#34; href=&#34;#ocelot&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;å®˜ç½‘ï¼šhttps://ocelot.readthedocs.io ï¼ŒOcelot æ­£æ˜¯ä¸º.Netå¾®æœåŠ¡ä½“ç³»æä¾›ä¸€ä¸ªç»Ÿä¸€çš„å…¥å£ç‚¹ï¼Œç§°ä¸ºï¼šGatewayï¼ˆç½‘å…³ï¼‰ã€‚&lt;/p&gt;&#xA;&lt;p&gt;é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºçš„ &lt;code&gt;asp.net core web&lt;/code&gt; é¡¹ç›®ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;http://localhost:1313/images/2021-09-19-04-33-35.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;&#xA;&lt;blockquote class=&#39;book-hint &#39;&gt;&#xA;&lt;p&gt;æ³¨æ„ï¼š&lt;code&gt;ocelot.json&lt;/code&gt; æ˜¯Ocelotçš„é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®ç”Ÿæˆæ—¶éœ€è¦å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ã€‚&lt;code&gt;ocelot.json&lt;/code&gt; æ–‡ä»¶åä¸æ˜¯å›ºå®šçš„å¯ä»¥è‡ªå·±å®šä¹‰&lt;/p&gt;&#xA;&lt;/blockquote&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;NuGet&lt;/code&gt; å®‰è£… &lt;code&gt;Ocelot&lt;/code&gt;ï¼Œç®€å•ä¿®æ”¹å‡ å¤„é»˜è®¤ä»£ç ï¼š&lt;/p&gt;&#xA;&lt;p&gt;Program.csï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Program&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; Main(&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;[] args)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;         CreateHostBuilder(args).Build().Run();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; IHostBuilder CreateHostBuilder(&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;[] args) =&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;         Host.CreateDefaultBuilder(args)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;             .ConfigureAppConfiguration((hostingContext, config) =&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                  config.AddJsonFile(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ocelot.json&amp;#34;&lt;/span&gt;, optional: &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;, reloadOnChange: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              })&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;             .ConfigureWebHostDefaults(webBuilder =&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                  webBuilder.UseStartup&amp;lt;Startup&amp;gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              });&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; }&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Startup.csï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title></title>
      <link>http://localhost:1313/docs/microservice/1.4%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8B%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/microservice/1.4%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8B%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF/</guid>
      <description>&lt;h1 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;a class=&#34;anchor&#34; href=&#34;#%e5%89%8d%e8%a8%80&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;ä¸Šä¸€ç¯‡ä¸­å·²ç»å®Œæˆäº† Ocelot + Consul çš„æ­å»ºï¼Œè¿™ç¯‡ç®€å•è¯´ä¸€ä¸‹äº‹ä»¶æ€»çº¿ï¼ˆ&lt;code&gt;EventBus&lt;/code&gt;)ã€‚&lt;/p&gt;&#xA;&lt;!-- more --&gt;&#xA;&lt;h1 id=&#34;äº‹ä»¶æ€»çº¿&#34;&gt;äº‹ä»¶æ€»çº¿&lt;a class=&#34;anchor&#34; href=&#34;#%e4%ba%8b%e4%bb%b6%e6%80%bb%e7%ba%bf&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;ä»€ä¹ˆæ˜¯äº‹ä»¶æ€»çº¿ï¼Ÿ&lt;/p&gt;&#xA;&lt;blockquote class=&#39;book-hint &#39;&gt;&#xA;&lt;p&gt;äº‹ä»¶æ€»çº¿æ˜¯å¯¹è§‚å¯Ÿè€…ï¼ˆå‘å¸ƒ-è®¢é˜…ï¼‰æ¨¡å¼çš„ä¸€ç§å®ç°ã€‚å®ƒæ˜¯ä¸€ç§é›†ä¸­å¼äº‹ä»¶å¤„ç†æœºåˆ¶ï¼Œå…è®¸ä¸åŒçš„ç»„ä»¶ä¹‹é—´è¿›è¡Œå½¼æ­¤é€šä¿¡è€Œåˆä¸éœ€è¦ç›¸äº’ä¾èµ–ï¼Œè¾¾åˆ°è§£è€¦çš„ç›®çš„&lt;/p&gt;&#xA;&lt;/blockquote&gt;&lt;p&gt;ä¸ºä»€ä¹ˆè¦ä½¿ç”¨äº‹ä»¶æ€»çº¿ï¼Ÿ&lt;/p&gt;&#xA;&lt;blockquote class=&#39;book-hint &#39;&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;ä»¥å½“å‰é¡¹ç›®ä¸¾ä¾‹ï¼Œå‡è®¾æœ‰ä¸€ä¸ªè®¢å•æœåŠ¡ï¼Œä¸€ä¸ªäº§å“æœåŠ¡ã€‚å®¢æˆ·ç«¯æœ‰ä¸€ä¸ªä¸‹å•åŠŸèƒ½ï¼Œä¸‹å•æ—¶è°ƒç”¨è®¢å•æœåŠ¡çš„ä¸‹å•æ¥å£ï¼Œä¸‹å•æ¥å£éœ€è¦è°ƒç”¨äº§å“æœåŠ¡çš„å‡åº“å­˜æ¥å£ï¼Œè¿™æ¶‰åŠåˆ°æœåŠ¡ä¸æœåŠ¡ä¹‹é—´çš„è°ƒç”¨ã€‚æœåŠ¡ä¹‹é—´è°ƒç”¨å¯ä»¥é€‰æ‹© &lt;code&gt;RestAPI&lt;/code&gt; æˆ–è€…æ•ˆç‡æ›´é«˜çš„ &lt;code&gt;gRPC&lt;/code&gt;ã€‚å¯èƒ½è¿™ä¸¤è€…å„æœ‰å„çš„ä½¿ç”¨åœºæ™¯ï¼Œä½†æ˜¯å®ƒä»¬éƒ½å­˜åœ¨æœåŠ¡ä¹‹é—´çš„è€¦åˆé—®é¢˜ï¼Œæˆ–è€…éš¾ä»¥åšåˆ°å¼‚æ­¥è°ƒç”¨&lt;/li&gt;&#xA;&lt;li&gt;å‡è®¾ä¸‹å•è°ƒç”¨è®¢å•æœåŠ¡ï¼Œè®¢å•æœåŠ¡éœ€è¦è°ƒç”¨äº§å“æœåŠ¡ï¼Œäº§å“æœåŠ¡åˆè¦è°ƒç”¨ç‰©æµæœåŠ¡ï¼Œç‰©æµæœåŠ¡å†å»è°ƒç”¨xxæœåŠ¡ç­‰ç­‰ï¼Œå¦‚æœæ¯ä¸ªæœåŠ¡å¤„ç†æ—¶é—´éœ€è¦2sï¼Œä¸ä½¿ç”¨å¼‚æ­¥å¤„ç†çš„è¯ï¼Œå“åº”æ—¶é—´å¯æƒ³è€ŒçŸ¥ã€‚å¦‚æœä½¿ç”¨EventBusçš„è¯ï¼Œé‚£ä¹ˆè®¢å•æœåŠ¡åªéœ€è¦å‘EventBuså‘ä¸€ä¸ªâ€œä¸‹å•äº‹ä»¶â€å°±å¯ä»¥äº†ã€‚äº§å“æœåŠ¡ä¼šè®¢é˜…â€œä¸‹å•äº‹ä»¶â€ï¼Œå½“äº§å“æœåŠ¡æ”¶åˆ°ä¸‹å•äº‹ä»¶æ—¶ï¼Œè‡ªå·±å»å‡åº“å­˜ã€‚è¿™æ ·å°±é¿å…äº†ä¸¤ä¸ªæœåŠ¡ä¹‹é—´ç›´æ¥è°ƒç”¨çš„è€¦åˆæ€§ï¼Œå¹¶ä¸”çœŸæ­£åšåˆ°äº†å¼‚æ­¥è°ƒç”¨&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/blockquote&gt;&lt;p&gt;æ—¢ç„¶æ¶‰åŠåˆ°å¤šä¸ªæœåŠ¡ä¹‹é—´çš„å¼‚æ­¥è°ƒç”¨ï¼Œé‚£ä¹ˆå°±ä¸å¾—ä¸æåˆ†å¸ƒå¼äº‹åŠ¡ã€‚åˆ†å¸ƒå¼äº‹åŠ¡å¹¶ä¸æ˜¯å¾®æœåŠ¡ç‹¬æœ‰çš„é—®é¢˜ï¼Œè€Œæ˜¯æ‰€æœ‰çš„åˆ†å¸ƒå¼ç³»ç»Ÿéƒ½ä¼šå­˜åœ¨çš„é—®é¢˜ã€‚å…³äºåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå¯ä»¥æŸ¥ä¸€ä¸‹ â€œCAPåŸåˆ™â€ å’Œ â€œBASEç†è®ºâ€ äº†è§£æ›´å¤šã€‚å¦‚ä»Šåˆ†å¸ƒå¼ç³»ç»Ÿæ›´å¤šæ—¶å€™ä¼šè¿½æ±‚äº‹åŠ¡çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä¸‹é¢ä½¿ç”¨å¼€æºæ¡†æ¶ &lt;code&gt;CAP&lt;/code&gt;æ¥æ¼”ç¤º &lt;code&gt;EventBus&lt;/code&gt; çš„åŸºæœ¬ä½¿ç”¨ã€‚ä¹‹æ‰€ä»¥ä½¿ç”¨ &lt;code&gt;CAP&lt;/code&gt; æ˜¯å› ä¸ºå®ƒæ—¢èƒ½è§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿçš„æœ€ç»ˆä¸€è‡´æ€§ï¼ŒåŒæ—¶åˆæ˜¯ä¸€ä¸ª &lt;code&gt;EventBus&lt;/code&gt;ï¼Œå®ƒå…·å¤‡&lt;code&gt;EventBus&lt;/code&gt; çš„æ‰€æœ‰åŠŸèƒ½ã€‚&lt;a href=&#34;https://www.cnblogs.com/savorboard/p/cap.html&#34;&gt;ç‚¹å‡»äº†è§£æ›´å¤š&lt;/a&gt;ã€‚&lt;/p&gt;&#xA;&lt;h1 id=&#34;cap&#34;&gt;CAP&lt;a class=&#34;anchor&#34; href=&#34;#cap&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;ç›®å‰ CAP æ”¯æŒä½¿ç”¨ &lt;code&gt;RabbitMQ&lt;/code&gt; ï¼Œ&lt;code&gt;Kafka&lt;/code&gt;ï¼Œ&lt;code&gt;Azure Service Bus&lt;/code&gt; ç­‰è¿›è¡Œåº•å±‚ä¹‹é—´çš„æ¶ˆæ¯å‘é€ï¼Œä¸éœ€è¦å…·å¤‡è¿™äº›æ¶ˆæ¯é˜Ÿåˆ—çš„ä½¿ç”¨ç»éªŒå°±å¯ä»¥è½»æ¾çš„é›†æˆåˆ°é¡¹ç›®ä¸­ã€‚CAP ç›®å‰æ”¯æŒä½¿ç”¨ &lt;code&gt;Sql Server&lt;/code&gt;ï¼Œ&lt;code&gt;MySql&lt;/code&gt;ï¼Œ&lt;code&gt;PostgreSql&lt;/code&gt;ï¼Œ&lt;code&gt;MongoDB&lt;/code&gt; æ•°æ®åº“çš„é¡¹ç›®ã€‚è¿™é‡Œé€‰æ‹©ï¼šæ¶ˆæ¯ç»„ä»¶ä½¿ç”¨ &lt;code&gt;RabbitMq&lt;/code&gt;ï¼Œæ•°æ®åº“å­˜å‚¨ä½¿ç”¨ &lt;code&gt;SqlServer&lt;/code&gt;ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;code&gt;Nuget&lt;/code&gt; å®‰è£… :&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Microsoft.EntityFrameworkCore&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Microsoft.EntityFrameworkCore.Tools&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Microsoft.EntityFrameworkCore.SqlServer&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;DotNetCore.CAP&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;DotNetCore.CAP.RabbitMQ&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;DotNetCore.CAP.SqlServer&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;productapi&#34;&gt;Product.Api&lt;a class=&#34;anchor&#34; href=&#34;#productapi&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;æ–°å¢ &lt;code&gt;Product.Api&lt;/code&gt; ä½œä¸ºäº§å“æœåŠ¡ï¼Œä»£ç ç»“æ„ä¸ &lt;code&gt;Order.Api&lt;/code&gt; ç»“æ„ç±»ä¼¼ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;http://localhost:1313/images/2021-09-19-01-07-00.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;productscontrollercs&#34;&gt;ProductsController.cs&lt;a class=&#34;anchor&#34; href=&#34;#productscontrollercs&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;&#xA;&lt;p&gt;å¢åŠ å‡åº“å­˜æ¥å£ï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; DotNetCore.CAP;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; Microsoft.AspNetCore.Mvc;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; Microsoft.EntityFrameworkCore;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; Microsoft.Extensions.Configuration;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; Newtonsoft.Json;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; Product.Api.Models;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; System;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; System.Threading.Tasks;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;namespace&lt;/span&gt; Product.Api.Controller&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;    [Route(&amp;#34;[Controller]&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;)]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;    [ApiController]&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ProductsController&lt;/span&gt; : ControllerBase&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;readonly&lt;/span&gt; IConfiguration configuration;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;readonly&lt;/span&gt; ICapPublisher capBus;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;readonly&lt;/span&gt; ProductContext context;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; ProductsController(IConfiguration configuration, ICapPublisher capBus, ProductContext context)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.configuration = configuration;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.capBus = capBus;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.context = context;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;        [HttpGet]&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; IActionResult Index()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; result = &lt;span style=&#34;color:#e6db74&#34;&gt;$&amp;#34;äº§å“æœåŠ¡ï¼š{DateTime.Now:yyyy-MM-dd HH:mm:ss},-{Request.HttpContext.Connection.LocalIpAddress}:{configuration[&amp;#34;&lt;/span&gt;ConsulSetting:ServicePort&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;]}&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Ok(result);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// å‡åº“å­˜ è®¢é˜…ä¸‹å•äº‹ä»¶&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;param name=&amp;#34;message&amp;#34;&amp;gt;&amp;lt;/param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;returns&amp;gt;&amp;lt;/returns&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;        [NonAction]&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;        [CapSubscribe(&amp;#34;order.services.createorder&amp;#34;)]&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; Task ReduceStock(CreateOrderMessageDto message)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            Console.WriteLine(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;message:&amp;#34;&lt;/span&gt; + JsonConvert.SerializeObject(message));&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; product = &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; context.Products.FirstOrDefaultAsync(p =&amp;gt; p.ID == message.ProductID);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            product.Stock -= message.Count;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; context.SaveChangesAsync();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;createordermessagedtocs&#34;&gt;CreateOrderMessageDto.cs&lt;a class=&#34;anchor&#34; href=&#34;#createordermessagedtocs&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;namespace&lt;/span&gt; Product.Api.Models&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/// ä¸‹å•äº‹ä»¶æ¶ˆæ¯&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateOrderMessageDto&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// äº§å“ID&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; ProductID { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;; }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// è´­ä¹°æ•°é‡&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; Count { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;; }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;productcs&#34;&gt;Product.cs&lt;a class=&#34;anchor&#34; href=&#34;#productcs&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; System.ComponentModel.DataAnnotations;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; System.ComponentModel.DataAnnotations.Schema;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;namespace&lt;/span&gt; Product.Api.Models&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Product&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;        [Key]&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; ID { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;; }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// äº§å“åç§°&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;        [Required]&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;        [Column(TypeName = &amp;#34;VARCHAR(16)&amp;#34;)]&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; Name { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;; }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// åº“å­˜&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;        [Required]&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; Stock { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;; }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;productcontextcs&#34;&gt;ProductContext.cs&lt;a class=&#34;anchor&#34; href=&#34;#productcontextcs&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; Microsoft.EntityFrameworkCore;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;namespace&lt;/span&gt; Product.Api&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ProductContext&lt;/span&gt; : DbContext&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; ProductContext(DbContextOptions&amp;lt;ProductContext&amp;gt; options)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;           : &lt;span style=&#34;color:#66d9ef&#34;&gt;base&lt;/span&gt;(options)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; DbSet&amp;lt;Models.Product&amp;gt; Products { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;; }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;protected&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;override&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; OnModelCreating(ModelBuilder modelBuilder)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;//åˆå§‹åŒ–ç§å­æ•°æ®&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            modelBuilder.Entity&amp;lt;Models.Product&amp;gt;().HasData(&lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Models.Product&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                ID = &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                Name = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ThinkPad&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                Stock = &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            },&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Models.Product&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                ID = &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                Name = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Mac&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                Stock = &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            });&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;appsettingsjson&#34;&gt;appsettings.json&lt;a class=&#34;anchor&#34; href=&#34;#appsettingsjson&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Logging&amp;#34;&lt;/span&gt;: {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;LogLevel&amp;#34;&lt;/span&gt;: {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Default&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Information&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Microsoft&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Warning&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Microsoft.Hosting.Lifetime&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Information&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  },&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;AllowedHosts&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;ConsulSetting&amp;#34;&lt;/span&gt;: {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;ServiceName&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;product.service&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;ServiceIP&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.31.191&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;ServiceHealthCheck&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/healthcheck&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;ConsulAddress&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http://192.168.31.191:8500&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  },&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;ConnectionString&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Server=192.168.31.210;Database=Microservice.Sample.Product;user id=sa;password=wpl19950815;MultipleActiveResultSets=true&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;startupcs&#34;&gt;Startup.cs&lt;a class=&#34;anchor&#34; href=&#34;#startupcs&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-css&#34; data-lang=&#34;css&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;ConfigureServices&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;IServiceCollection&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;services&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;services.AddControllers()&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;services.AddDbContext&amp;lt;ProductContext&amp;gt;(opt&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;opt.UseSqlServer(Configuration[&amp;#34;ConnectionString&amp;#34;]))&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;services.AddCap(x&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;=&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;x.UseEntityFramework&amp;lt;ProductContext&amp;gt;().UseRabbitMQ(option&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;=&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;option.HostName&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#34;192.168.31.191&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;option.UserName&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#34;guest&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;option.Password&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#34;guest&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;orderapi&#34;&gt;Order.Api&lt;a class=&#34;anchor&#34; href=&#34;#orderapi&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;h2 id=&#34;orderscontrollercs&#34;&gt;OrdersController.cs&lt;a class=&#34;anchor&#34; href=&#34;#orderscontrollercs&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;&#xA;&lt;p&gt;å¢åŠ ä¸‹å•æ¥å£ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title></title>
      <link>http://localhost:1313/docs/microservice/1.5%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8Bdockercompose/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/microservice/1.5%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8Bdockercompose/</guid>
      <description>&lt;h1 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;a class=&#34;anchor&#34; href=&#34;#%e5%89%8d%e8%a8%80&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;ä¸Šä¸€ç¯‡ä¸­ä½¿ç”¨ CAP å®Œæˆäº†ä¸€ä¸ªç®€å•çš„ &lt;code&gt;Eventbus&lt;/code&gt;ï¼Œå®ç°äº†æœåŠ¡ä¹‹é—´çš„è§£è€¦å’Œå¼‚æ­¥è°ƒç”¨ï¼Œå¹¶ä¸”åšåˆ°æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚æåˆ°è¿™é‡Œç³»ç»Ÿç¯å¢ƒå·²ç»æ¯”è¾ƒå¤æ‚äº†ï¼Œæƒ³æŠŠæ•´ä¸ªç³»ç»Ÿè¿è¡Œèµ·æ¥ä¼šéå¸¸ç¹çï¼šè¦è¿è¡Œ Consulã€è®¢å•æœåŠ¡ã€äº§å“æœåŠ¡ã€ç½‘å…³ã€&lt;del&gt;é‰´æƒä¸­å¿ƒ&lt;/del&gt;ã€RabbitMQï¼Œæœ¬ç¯‡å°†ä½¿ç”¨ &lt;code&gt;Docker Compose&lt;/code&gt; æ¥è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œä»…éœ€ä¸€ä¸ªç®€å•çš„å‘½ä»¤ï¼Œå³å¯å¯åŠ¨æ•´ä¸ªç¯å¢ƒã€‚&lt;/p&gt;&#xA;&lt;!-- more --&gt;&#xA;&lt;h1 id=&#34;docker-compose&#34;&gt;Docker Compose&lt;a class=&#34;anchor&#34; href=&#34;#docker-compose&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;ä»€ä¹ˆæ˜¯Docker Composeï¼Ÿ&lt;/p&gt;&#xA;&lt;blockquote class=&#39;book-hint &#39;&gt;&#xA;&lt;p&gt;Compose æ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡ Composeå¯ä»¥ä½¿ç”¨ YML æ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä» YML æ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡&lt;/p&gt;&#xA;&lt;/blockquote&gt;&lt;p&gt;ç®€å•æ¥ç†è§£ï¼ŒComposeç±»ä¼¼ä¸€ä¸ªæ‰¹é‡å·¥å…·ï¼Œå¯ä»¥æ‰§è¡Œä¸€ç»„å‘½ä»¤ï¼Œæ”¯æŒæ‰¹é‡æ„å»ºé•œåƒï¼Œæ‰¹é‡å¯åŠ¨å®¹å™¨ï¼Œæ‰¹é‡åˆ é™¤å®¹å™¨ç­‰ç­‰åŠŸèƒ½ã€‚Windowsçš„ Docker Desktop ä¸­å·²ç»åŒ…æ‹¬äº† Composeï¼ŒLinuxä¸‹ Compose åˆ™éœ€è¦å•ç‹¬å®‰è£…ã€‚å…³äº Compose æ›´å¤šä¿¡æ¯å‚è€ƒ &lt;a href=&#34;https://wpl.wiki/docker/1.9Docker%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8BDockerCompose&#34;&gt;ã€Dockerä¸‰å‰‘å®¢ä¹‹DockerComposeã€‘&lt;/a&gt;ã€‚&lt;/p&gt;&#xA;&lt;h1 id=&#34;yml-file&#34;&gt;yml file&lt;a class=&#34;anchor&#34; href=&#34;#yml-file&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;yml æ–‡ä»¶æ˜¯ä½¿ç”¨ Compose å¿…ä¸å¯å°‘çš„ï¼Œåœ¨ç¼–å†™ yml æ–‡ä»¶ä¹‹å‰éœ€è¦å‡†å¤‡Dockerfileã€‚ä¹‹å‰çš„ç« èŠ‚ä¸­ï¼Œç½‘å…³æœåŠ¡ä¸æ˜¯åœ¨ Docker ä¸­è¿è¡Œçš„ï¼Œç°åœ¨å…¨éƒ¨æ”¾åˆ°Dockerä¸­ã€‚ç¡®ä¿è§£å†³æ–¹æ¡ˆä¸­æ¯ä¸ªé¡¹ç›®éƒ½æ·»åŠ Dockeræ”¯æŒã€‚&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-dockerfile&#34; data-lang=&#34;dockerfile&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# See https://aka.ms/containerfastmode to understand how Visual Studio uses this Dockerfile to build your images for faster debugging.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# åŸºäº `mcr.microsoft.com/dotnet/aspnet:5.0 AS base` æ¥æ„å»ºé•œåƒ&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;FROM&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;mcr.microsoft.com/dotnet/aspnet:5.0&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;AS&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;base&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# è®¾ç½®å·¥ä½œç›®å½•,å¦‚ä¸å­˜åœ¨ä¼šè¢«åˆ›å»º&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;WORKDIR&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;/app&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Copy releaseæ–‡ä»¶å¤¹å†…å®¹åˆ°å·¥ä½œç›®å½•app&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;COPY&lt;/span&gt; . /app&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# è¿è¡Œ.dll&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;ENTRYPOINT&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dotnet&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Ocelot.Geteway.dll&amp;#34;&lt;/span&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ–°å»º &lt;code&gt;docker-compose.yml&lt;/code&gt; æ–‡ä»¶ï¼Œä»¥ä¸‹æ˜¯ &lt;code&gt;docker-compose.yml&lt;/code&gt;æ–‡ä»¶å†…å®¹ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title></title>
      <link>http://localhost:1313/docs/microservice/consul%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E5%8F%91%E7%8E%B0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/microservice/consul%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E5%8F%91%E7%8E%B0/</guid>
      <description>&lt;p&gt;å®˜ç½‘åœ°å€ï¼šhttps://www.consul.io&lt;/p&gt;&#xA;&lt;h1 id=&#34;ç®€ä»‹&#34;&gt;ç®€ä»‹&lt;a class=&#34;anchor&#34; href=&#34;#%e7%ae%80%e4%bb%8b&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;Consul æ˜¯ä¸€ä¸ªæ”¯æŒå¤šæ•°æ®ä¸­å¿ƒåˆ†å¸ƒå¼é«˜å¯ç”¨çš„æœåŠ¡å‘ç°å’Œé…ç½®å…±äº«çš„æœåŠ¡è½¯ä»¶ï¼Œç”± HashiCorp å…¬å¸ç”¨ Go è¯­è¨€å¼€å‘, åŸºäº Mozilla Public License 2.0 çš„åè®®è¿›è¡Œå¼€æºã€‚ Consul æ”¯æŒ å¥åº·æ£€æŸ¥ï¼Œå¹¶å…è®¸ HTTP ã€GRPC å’Œ DNS åè®®è°ƒç”¨ API å­˜å‚¨é”®å€¼å¯¹ã€‚ ä¸€è‡´æ€§åè®®é‡‡ç”¨ Raft ç®—æ³•,ç”¨æ¥ä¿è¯æœåŠ¡çš„é«˜å¯ç”¨ã€‚ä½¿ç”¨ GOSSIP åè®®ç®¡ç†æˆå‘˜å’Œå¹¿æ’­æ¶ˆæ¯ï¼Œå¹¶ä¸”æ”¯æŒ ACL è®¿é—®æ§åˆ¶ã€‚&lt;/p&gt;&#xA;&lt;p&gt;Consul åŒ…å«å¤šä¸ªç»„ä»¶ï¼Œä½†ä½œä¸ºæ•´ä½“æ¥çœ‹çš„è¯ä¸»è¦åŠŸèƒ½æ˜¯ï¼šä¸ºåŸºç¡€è®¾æ–½æä¾›æœåŠ¡å‘ç°å’ŒæœåŠ¡é…ç½®çš„å·¥å…·ï¼Œä¸»è¦æä¾›ä»¥ä¸‹å…³é”®ç‰¹æ€§ï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;æœåŠ¡å‘ç°&lt;/strong&gt;ï¼šConsul çš„å®¢æˆ·ç«¯ç”¨äºæ³¨å†ŒæœåŠ¡ï¼Œå…¶ä»–çš„å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ Consul æ¥ä¸­æ‰¾åˆ°è¿™ä¸ªæ³¨å†Œçš„æœåŠ¡ï¼ˆä½¿ç”¨ DNS æˆ– HTTPï¼‰&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;å¥åº·æ£€æŸ¥&lt;/strong&gt;ï¼šConsul å®¢æˆ·ç«¯å¯ä»¥æä¾›ä»»æ„æ•°é‡çš„å¥åº·æ£€æŸ¥ï¼Œè¦ä¹ˆä¸ç»™å®šçš„æœåŠ¡ç›¸å…³è”ï¼ˆâ€œç½‘ç»œæœåŠ¡å™¨æ˜¯å¦è¿”å› 200 OKâ€ï¼‰ï¼Œè¦ä¹ˆä¸æœ¬åœ°èŠ‚ç‚¹ï¼ˆâ€œå†…å­˜åˆ©ç”¨ç‡æ˜¯å¦ä½äº 90%â€ï¼‰ç›¸å…³è”ã€‚å¯ä»¥é€šè¿‡è¿™ä¸ªä¿¡æ¯æ¥ç›‘æ§é›†ç¾¤å¥åº·çŠ¶å†µï¼Œå¹¶ä¸”æœåŠ¡å‘ç°ç»„ä»¶å¯ä»¥ä½¿ç”¨å®ƒæ¥é¿å…å°†è¯·æ±‚è·¯ç”±åˆ°ä¸å¥åº·çš„ä¸»æœºä¸Š&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;KV å­˜å‚¨&lt;/strong&gt;ï¼šåº”ç”¨ç¨‹åºå¯ä»¥å°† Consul çš„åˆ†å±‚é”®/å€¼å­˜å‚¨ç”¨äºå¤šç§ç›®çš„ï¼ŒåŒ…æ‹¬åŠ¨æ€é…ç½®ã€åŠŸèƒ½æ ‡è®°ã€åè°ƒã€é¢†å¯¼é€‰ä¸¾ç­‰ã€‚ç®€å•çš„ HTTP API ä½¿å…¶æ˜“äºä½¿ç”¨&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;å®‰å…¨æœåŠ¡é€šä¿¡&lt;/strong&gt;ï¼šConsul å¯ä»¥ä¸ºæœåŠ¡ç”Ÿæˆå’Œåˆ†å‘ TLS è¯ä¹¦ï¼Œä»¥å»ºç«‹ç›¸äº’çš„ TLS è¿æ¥ã€‚ &lt;a href=&#34;https://www.consul.io/docs/connect/intentions&#34;&gt;æ„å›¾&lt;/a&gt; å¯ç”¨äºå®šä¹‰å…è®¸å“ªäº›æœåŠ¡è¿›è¡Œé€šä¿¡ã€‚å¯ä»¥é€šè¿‡å®æ—¶æ›´æ”¹æ„å›¾è½»æ¾ç®¡ç†æœåŠ¡åˆ†æ®µï¼Œè€Œä¸æ˜¯ä½¿ç”¨å¤æ‚çš„ç½‘ç»œæ‹“æ‰‘å’Œé™æ€é˜²ç«å¢™è§„åˆ™&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;å¤šæ•°æ®ä¸­å¿ƒ&lt;/strong&gt;ï¼šConsul æ”¯æŒå¼€ç®±å³ç”¨çš„å¤šä¸ªæ•°æ®ä¸­å¿ƒã€‚è¿™æ„å‘³ç€ Consul çš„ç”¨æˆ·ä¸å¿…æ‹…å¿ƒæ„å»ºé¢å¤–çš„æŠ½è±¡å±‚ä»¥æ‰©å±•åˆ°å¤šä¸ªåŒºåŸŸ&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;!-- more --&gt;&#xA;&lt;h1 id=&#34;consul-agent&#34;&gt;Consul Agent&lt;a class=&#34;anchor&#34; href=&#34;#consul-agent&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;æ¯ä¸ªä¸º Consul æä¾›æœåŠ¡çš„èŠ‚ç‚¹éƒ½ä¼šè¿è¡Œä¸€ä¸ª Consul Agentï¼Œå¯åŠ¨ Consul å¿…é¡»è¿è¡Œ Agentï¼ˆå¯ä»¥é€‰æ‹©è¿è¡Œä¸º &lt;code&gt;Server&lt;/code&gt; æˆ– &lt;code&gt;Client&lt;/code&gt; æ¨¡å¼ã€‚æ¯ä¸ªæ•°æ®ä¸­å¿ƒè‡³å°‘è¦æœ‰ä¸€å° &lt;code&gt;Server&lt;/code&gt;ï¼Œä¸€ä¸ª &lt;code&gt;Client&lt;/code&gt;æ˜¯ä¸€ä¸ªéå¸¸è½»é‡çº§çš„è¿›ç¨‹ï¼Œç”¨äºæ³¨å†ŒæœåŠ¡ï¼Œè¿è¡Œå¥åº·æ£€æŸ¥å’Œè½¬å‘å¯¹ &lt;code&gt;Server&lt;/code&gt; çš„æŸ¥è¯¢ï¼‰ è¿™ä¸ª Agent åŠŸèƒ½ä¸»è¦åœ¨äºï¼š&lt;/p&gt;</description>
    </item>
  </channel>
</rss>

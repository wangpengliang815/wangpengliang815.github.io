<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="软件开发最大的麻烦事之一就是环境配置。计算机的环境都不相同，为了保证软件能在不同的机器上正常运行必须保证两件事：
操作系统的设置 各种库和组件的安装 比如安装一个dotnet core 应用，计算机必须有dotnet SDK，还必须有各种依赖，可能还要配置环境变量。而且换一台机器就要重新配置一遍。能不能做到软件可以带环境安装？也就是说安装的时候，把原始环境一模一样地复制过来。
虚拟机# 虚拟机（virtual machine）就是带环境安装的一种解决方案。它可以在一种操作系统里面运行另一种操作系统，比如在 Windows 系统里面运行 Linux 系统。应用程序对此毫无感知，因为虚拟机看上去跟真实系统一模一样，而对于底层系统来说，虚拟机就是一个普通文件不需要了就删掉，对其他部分毫无影响。
虽然可以通过虚拟机还原软件的原始环境。但是这个方案有几个缺点：
资源占用多：虚拟机会独占一部分内存和硬盘空间。它运行的时候其他程序就不能使用这些资源了。哪怕虚拟机里面的应用程序，真正使用的内存只有1MB，虚拟机依然需要几百MB的内存才能运行 冗余步骤多：虚拟机是完整的操作系统，一些系统级别的操作步骤，往往无法跳过，比如用户登录 启动慢：启动操作系统需要多久，启动虚拟机就需要多久。可能要等几分钟，应用程序才能真正运行 Linux 容器# 由于虚拟机存在这些缺点，Linux 发展出了另一种虚拟化技术：Linux 容器（ Linux Containers 缩写为 LXC ）Linux 容器不是模拟一个完整的操作系统，而是对进程进行隔离。或者说，在正常进程的外面套了一个保护层。对于容器里面的进程来说，它接触到的各种资源都是虚拟的，从而实现与底层系统的隔离。
由于容器是进程级别的，相比虚拟机有很多优势：
启动快：容器里面的应用，直接就是底层系统的一个进程而不是虚拟机内部的进程。所以启动容器相当于启动本机的一个进程，而不是启动一个操作系统，速度就快很多 资源占用少：容器只占用需要的资源，不占用没有用到的资源；虚拟机由于是完整的操作系统，不可避免要占用所有资源。另外，多个容器可以共享资源，虚拟机都是独享资源 体积小：容器只要包含用到的组件即可，而虚拟机是整个操作系统的打包，所以容器文件比虚拟机文件要小很多 总之，容器有点像轻量级的虚拟机，能够提供虚拟化的环境，但是成本开销小得多
下图比较了Docker和传统虚拟化方式的不同之处。传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整操作系统，在该系统上再运行所需应用进程。
容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。因此容器要比传统虚拟机更为轻便。
Docker概念# Docker 属于 Linux 容器的一种封装，提供简单易用的容器使用接口。它是目前最流行的 Linux 容器解决方案
Docker 将应用程序与该程序的依赖，打包在一个文件里面。运行这个文件，就会生成一个虚拟容器。程序在这个虚拟容器里运行，就好像在真实的物理机上运行一样。有了 Docker就不用再担心环境问题。
Docker 使用 Google 公司推出的 Go 语言 进行开发实现，基于 Linux 内核的 cgroup，namespace，以及 OverlayFS 类的 Union FS 等技术，对进程进行封装隔离，属于 操作系统层面的虚拟化技术。由于隔离的进程独立于宿主和其它的隔离的进程，因此也称其为容器。最初实现是基于 LXC，从 0.7 版本以后开始去除 LXC，转而使用自行开发的 libcontainer，从 1.11 版本开始，则进一步演进为用 runC 和 containerd 。
Docker优点# 作为一种新兴的虚拟化方式，Docker 跟传统的虚拟化方式相比具有众多的优势：
">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/docs/docker/1.1docker%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%AE%89%E8%A3%85/">
  <meta property="og:site_name" content="CODE&#39;NOTE">
  <meta property="og:title" content="CODE&#39;NOTE">
  <meta property="og:description" content="软件开发最大的麻烦事之一就是环境配置。计算机的环境都不相同，为了保证软件能在不同的机器上正常运行必须保证两件事：
操作系统的设置 各种库和组件的安装 比如安装一个dotnet core 应用，计算机必须有dotnet SDK，还必须有各种依赖，可能还要配置环境变量。而且换一台机器就要重新配置一遍。能不能做到软件可以带环境安装？也就是说安装的时候，把原始环境一模一样地复制过来。
虚拟机# 虚拟机（virtual machine）就是带环境安装的一种解决方案。它可以在一种操作系统里面运行另一种操作系统，比如在 Windows 系统里面运行 Linux 系统。应用程序对此毫无感知，因为虚拟机看上去跟真实系统一模一样，而对于底层系统来说，虚拟机就是一个普通文件不需要了就删掉，对其他部分毫无影响。
虽然可以通过虚拟机还原软件的原始环境。但是这个方案有几个缺点：
资源占用多：虚拟机会独占一部分内存和硬盘空间。它运行的时候其他程序就不能使用这些资源了。哪怕虚拟机里面的应用程序，真正使用的内存只有1MB，虚拟机依然需要几百MB的内存才能运行 冗余步骤多：虚拟机是完整的操作系统，一些系统级别的操作步骤，往往无法跳过，比如用户登录 启动慢：启动操作系统需要多久，启动虚拟机就需要多久。可能要等几分钟，应用程序才能真正运行 Linux 容器# 由于虚拟机存在这些缺点，Linux 发展出了另一种虚拟化技术：Linux 容器（ Linux Containers 缩写为 LXC ）Linux 容器不是模拟一个完整的操作系统，而是对进程进行隔离。或者说，在正常进程的外面套了一个保护层。对于容器里面的进程来说，它接触到的各种资源都是虚拟的，从而实现与底层系统的隔离。
由于容器是进程级别的，相比虚拟机有很多优势：
启动快：容器里面的应用，直接就是底层系统的一个进程而不是虚拟机内部的进程。所以启动容器相当于启动本机的一个进程，而不是启动一个操作系统，速度就快很多 资源占用少：容器只占用需要的资源，不占用没有用到的资源；虚拟机由于是完整的操作系统，不可避免要占用所有资源。另外，多个容器可以共享资源，虚拟机都是独享资源 体积小：容器只要包含用到的组件即可，而虚拟机是整个操作系统的打包，所以容器文件比虚拟机文件要小很多 总之，容器有点像轻量级的虚拟机，能够提供虚拟化的环境，但是成本开销小得多
下图比较了Docker和传统虚拟化方式的不同之处。传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整操作系统，在该系统上再运行所需应用进程。
容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。因此容器要比传统虚拟机更为轻便。
Docker概念# Docker 属于 Linux 容器的一种封装，提供简单易用的容器使用接口。它是目前最流行的 Linux 容器解决方案
Docker 将应用程序与该程序的依赖，打包在一个文件里面。运行这个文件，就会生成一个虚拟容器。程序在这个虚拟容器里运行，就好像在真实的物理机上运行一样。有了 Docker就不用再担心环境问题。
Docker 使用 Google 公司推出的 Go 语言 进行开发实现，基于 Linux 内核的 cgroup，namespace，以及 OverlayFS 类的 Union FS 等技术，对进程进行封装隔离，属于 操作系统层面的虚拟化技术。由于隔离的进程独立于宿主和其它的隔离的进程，因此也称其为容器。最初实现是基于 LXC，从 0.7 版本以后开始去除 LXC，转而使用自行开发的 libcontainer，从 1.11 版本开始，则进一步演进为用 runC 和 containerd 。
Docker优点# 作为一种新兴的虚拟化方式，Docker 跟传统的虚拟化方式相比具有众多的优势：">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">


  <meta itemprop="name" content="CODE&#39;NOTE">
  <meta itemprop="description" content="软件开发最大的麻烦事之一就是环境配置。计算机的环境都不相同，为了保证软件能在不同的机器上正常运行必须保证两件事：
操作系统的设置 各种库和组件的安装 比如安装一个dotnet core 应用，计算机必须有dotnet SDK，还必须有各种依赖，可能还要配置环境变量。而且换一台机器就要重新配置一遍。能不能做到软件可以带环境安装？也就是说安装的时候，把原始环境一模一样地复制过来。
虚拟机# 虚拟机（virtual machine）就是带环境安装的一种解决方案。它可以在一种操作系统里面运行另一种操作系统，比如在 Windows 系统里面运行 Linux 系统。应用程序对此毫无感知，因为虚拟机看上去跟真实系统一模一样，而对于底层系统来说，虚拟机就是一个普通文件不需要了就删掉，对其他部分毫无影响。
虽然可以通过虚拟机还原软件的原始环境。但是这个方案有几个缺点：
资源占用多：虚拟机会独占一部分内存和硬盘空间。它运行的时候其他程序就不能使用这些资源了。哪怕虚拟机里面的应用程序，真正使用的内存只有1MB，虚拟机依然需要几百MB的内存才能运行 冗余步骤多：虚拟机是完整的操作系统，一些系统级别的操作步骤，往往无法跳过，比如用户登录 启动慢：启动操作系统需要多久，启动虚拟机就需要多久。可能要等几分钟，应用程序才能真正运行 Linux 容器# 由于虚拟机存在这些缺点，Linux 发展出了另一种虚拟化技术：Linux 容器（ Linux Containers 缩写为 LXC ）Linux 容器不是模拟一个完整的操作系统，而是对进程进行隔离。或者说，在正常进程的外面套了一个保护层。对于容器里面的进程来说，它接触到的各种资源都是虚拟的，从而实现与底层系统的隔离。
由于容器是进程级别的，相比虚拟机有很多优势：
启动快：容器里面的应用，直接就是底层系统的一个进程而不是虚拟机内部的进程。所以启动容器相当于启动本机的一个进程，而不是启动一个操作系统，速度就快很多 资源占用少：容器只占用需要的资源，不占用没有用到的资源；虚拟机由于是完整的操作系统，不可避免要占用所有资源。另外，多个容器可以共享资源，虚拟机都是独享资源 体积小：容器只要包含用到的组件即可，而虚拟机是整个操作系统的打包，所以容器文件比虚拟机文件要小很多 总之，容器有点像轻量级的虚拟机，能够提供虚拟化的环境，但是成本开销小得多
下图比较了Docker和传统虚拟化方式的不同之处。传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整操作系统，在该系统上再运行所需应用进程。
容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。因此容器要比传统虚拟机更为轻便。
Docker概念# Docker 属于 Linux 容器的一种封装，提供简单易用的容器使用接口。它是目前最流行的 Linux 容器解决方案
Docker 将应用程序与该程序的依赖，打包在一个文件里面。运行这个文件，就会生成一个虚拟容器。程序在这个虚拟容器里运行，就好像在真实的物理机上运行一样。有了 Docker就不用再担心环境问题。
Docker 使用 Google 公司推出的 Go 语言 进行开发实现，基于 Linux 内核的 cgroup，namespace，以及 OverlayFS 类的 Union FS 等技术，对进程进行封装隔离，属于 操作系统层面的虚拟化技术。由于隔离的进程独立于宿主和其它的隔离的进程，因此也称其为容器。最初实现是基于 LXC，从 0.7 版本以后开始去除 LXC，转而使用自行开发的 libcontainer，从 1.11 版本开始，则进一步演进为用 runC 和 containerd 。
Docker优点# 作为一种新兴的虚拟化方式，Docker 跟传统的虚拟化方式相比具有众多的优势：">
  <meta itemprop="wordCount" content="427">

<title>1.1 Docker概念及安装 | CODE&#39;NOTE</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/docs/docker/1.1docker%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%AE%89%E8%A3%85/">
<link rel="stylesheet" href="/book.min.6970156cec683193d93c9c4edaf0d56574e4361df2e0c1be4f697ae81c3ba55f.css" integrity="sha256-aXAVbOxoMZPZPJxO2vDVZXTkNh3y4MG&#43;T2l66Bw7pV8=" crossorigin="anonymous">


  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.72bb05277db45a350ae52e783022518711f9de188da0da18be86b61b9cf0bf4c.js" integrity="sha256-crsFJ320WjUK5S54MCJRhxH53hiNoNoYvoa2G5zwv0w=" crossorigin="anonymous"></script>



  
</head>
<body dir="ltr" class="book-kind-page book-type-docs">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>CODE&#39;NOTE</span>
  </a>
</h2>


<div class="book-search hidden">
  <input id="book-search-input" type="text" 
    placeholder="Search"
    aria-label="Search"
    maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>













  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0a19d3a7daa7f2a902390735b978f141" class="toggle"  />
    <label for="section-0a19d3a7daa7f2a902390735b978f141" class="flex">
      <a role="button" class="">
        📚 .NET</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/dotnet/%E5%80%BC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/" class="">
      值类型和引用类型的内存分配</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dotnet/%E5%8F%8D%E5%B0%84%E6%8A%80%E6%9C%AF/" class="">
      反射技术</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dotnet/%E5%9F%BA%E7%A1%80%E5%90%88%E9%9B%86/" class="">
      基础合集</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dotnet/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" class="">
      多线程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dotnet/%E5%A7%94%E6%89%98%E5%92%8C%E4%BA%8B%E4%BB%B6/" class="">
      委托和事件</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dotnet/%E5%B9%B6%E8%A1%8C%E7%BC%96%E7%A8%8B/" class="">
      并行编程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dotnet/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/" class="">
      异步编程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dotnet/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="">
      数据结构</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dotnet/%E6%B3%9B%E5%9E%8B%E6%8A%80%E6%9C%AF/" class="">
      泛型技术</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dotnet/%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5/" class="">
      线程同步</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/dotnet/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" class="">
      面向对象</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a711e15e6217a03d3f896c4001f054af" class="toggle"  />
    <label for="section-a711e15e6217a03d3f896c4001f054af" class="flex">
      <a role="button" class="">
        🎭 PMI-ACP</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/acp/pmi-acp%E5%9F%BA%E7%A1%80%E4%BA%86%E8%A7%A3/" class="">
      Pmi Acp基础了解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/acp/pmi-acpdown/" class="">
      Pmi Acpdown</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/acp/pmi-acp%E5%A4%87%E8%80%83%E7%AC%94%E8%AE%B001/" class="">
      Pmi Acp备考笔记01</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/acp/pmi-acp%E5%A4%87%E8%80%83%E7%AC%94%E8%AE%B002/" class="">
      Pmi Acp备考笔记02</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/acp/pmi-acp%E5%A4%87%E8%80%83%E7%AC%94%E8%AE%B003/" class="">
      Pmi Acp备考笔记03</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-158c55270b3b873b36b554def2308a8c" class="toggle"  />
    <label for="section-158c55270b3b873b36b554def2308a8c" class="flex">
      <a role="button" class="">
        ⌛ 软件测试</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/test/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" class="">
      单元测试</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/test/%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95k6/" class="">
      压力测试k6</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/test/%E8%87%AA%E5%8A%A8%E5%8C%96ui%E6%B5%8B%E8%AF%95/" class="">
      自动化 Ui测试</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/test/%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95/" class="">
      集成测试</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9e4cd5c9690a397be164e18996eeec25" class="toggle"  />
    <label for="section-9e4cd5c9690a397be164e18996eeec25" class="flex">
      <a role="button" class="">
        ⛷️ Prometheus</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/prometheus/1.1prometheus%E7%AE%80%E4%BB%8B%E5%8F%8A%E5%AE%89%E8%A3%85/" class="">
      1.1 Prometheus简介及安装</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/prometheus/1.2exporter%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86/" class="">
      1.2 Exporter数据采集</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/prometheus/1.3promql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80/" class="">
      1.3 Prom Ql查询语言</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/prometheus/1.4alertmanager%E5%91%8A%E8%AD%A6%E5%A4%84%E7%90%86/" class="">
      1.4 Alertmanager告警处理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/prometheus/1.5grafana%E7%9B%91%E6%8E%A7%E5%8F%AF%E8%A7%86%E5%8C%96/" class="">
      1.5 Grafana监控可视化</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ed189cb26f56d17bb0a62923d94a7183" class="toggle"  />
    <label for="section-ed189cb26f56d17bb0a62923d94a7183" class="flex">
      <a role="button" class="">
        🐇 RabbitMq</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/rabbitmq/1.1rabbitmq%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%AE%89%E8%A3%85/" class="">
      1.1 Rabbit Mq概念及安装</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/rabbitmq/1.2%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D/" class="">
      1.2工作模式介绍</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/rabbitmq/1.3%E6%B6%88%E6%81%AF%E7%A1%AE%E8%AE%A4%E5%8F%8A%E6%8C%81%E4%B9%85%E5%8C%96/" class="">
      1.3消息确认及持久化</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/rabbitmq/1.4%E4%B8%A4%E7%A7%8D%E6%B6%88%E8%B4%B9%E6%A8%A1%E5%BC%8F%E5%92%8Cqos%E7%9A%84%E5%AE%9E%E7%8E%B0/" class="">
      1.4两种消费模式和 Qos的实现</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/rabbitmq/1.5channel%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95/" class="">
      1.5 Channel常见方法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/rabbitmq/1.6rabbitmq%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="">
      1.6 Rabbit Mq常用命令</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/rabbitmq/1.7rabbitmq%E5%B8%B8%E8%A7%81%E7%AD%96%E7%95%A5/" class="">
      1.7 Rabbit Mq常见策略</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/rabbitmq/1.8rabbitmq%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" class="">
      1.8 Rabbit Mq常见问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/rabbitmq/1.9rabbitmq%E9%9B%86%E7%BE%A4%E6%96%B9%E6%A1%88/" class="">
      1.9 Rabbit Mq集群方案</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/rabbitmq/%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5rabbitmq/" class="">
      客户端连接 Rabbit Mq</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-41a08237d2a583bb6567a7bd11f94f3e" class="toggle"  />
    <label for="section-41a08237d2a583bb6567a7bd11f94f3e" class="flex">
      <a role="button" class="">
        🐹 Golang</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/go/01%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="">
      01开发环境搭建</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/02%E5%8F%98%E9%87%8F%E5%92%8C%E5%B8%B8%E9%87%8F/" class="">
      02变量和常量</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/03%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="">
      03基本数据类型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/04%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%92%8C%E8%BF%90%E7%AE%97%E7%AC%A6/" class="">
      04流程控制和运算符</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/05%E6%95%B0%E7%BB%84/" class="">
      05数组</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/06%E5%88%87%E7%89%87/" class="">
      06切片</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/07map/" class="">
      07map</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/08%E5%87%BD%E6%95%B0/" class="">
      08函数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/09%E6%8C%87%E9%92%88/" class="">
      09指针</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/10%E5%8F%8D%E5%B0%84/" class="">
      10反射</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/11%E7%BB%93%E6%9E%84%E4%BD%93/" class="">
      11结构体</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/12%E6%8E%A5%E5%8F%A3/" class="">
      12接口</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/channel/" class="">
      Channel</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/csp%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%9E%8B/" class="">
      Csp并发模型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/goroutine/" class="">
      Goroutine</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/gpm%E5%8E%9F%E7%90%86%E4%B8%8E%E8%B0%83%E5%BA%A6/" class="">
      Gpm原理与调度</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/" class="">
      原子操作</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E5%AE%89%E5%85%A8%E5%92%8C%E9%94%81/" class="">
      并发安全和锁</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/%E6%A0%87%E5%87%86%E5%BA%93/flag/" class="">
      Flag</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/%E6%A0%87%E5%87%86%E5%BA%93/fmt/" class="">
      Fmt</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/%E6%A0%87%E5%87%86%E5%BA%93/log/" class="">
      Log</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/go/%E6%A0%87%E5%87%86%E5%BA%93/time/" class="">
      Time</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a212feaafca18e39712c162267ab7930" class="toggle"  />
    <label for="section-a212feaafca18e39712c162267ab7930" class="flex">
      <a role="button" class="">
        💫 Microservice</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/microservice/1.1%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8B%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/" class="">
      1.1微服务入门之项目搭建</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/microservice/1.2%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8B%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/" class="">
      1.2微服务入门之服务注册与发现</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/microservice/1.3%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8B%E7%BD%91%E5%85%B3/" class="">
      1.3微服务入门之网关</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/microservice/1.4%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8B%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF/" class="">
      1.4微服务入门之事件总线</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/microservice/1.5%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8%E4%B9%8Bdockercompose/" class="">
      1.5微服务入门之 Docker Compose</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/microservice/consul%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E5%8F%91%E7%8E%B0/" class="">
      Consul服务注册发现</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-797c59d4c24223beac308482801fe996" class="toggle"  />
    <label for="section-797c59d4c24223beac308482801fe996" class="flex">
      <a role="button" class="">
        📦 Redis</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/1.10redis%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" class="">
      1.10 Redis常见问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/1.1nosql%E6%A6%82%E8%BF%B0/" class="">
      1.1 No Sql概述</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/1.2redis%E5%AE%89%E8%A3%85/" class="">
      1.2 Redis安装</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/1.3redis%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="">
      1.3 Redis基本数据类型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/1.4redis%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="">
      1.4 Redis特殊数据类型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/1.5redis%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C/" class="">
      1.5 Redis事务操作</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/1.6redis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/" class="">
      1.6 Redis配置文件详解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/1.7redis%E6%8C%81%E4%B9%85%E5%8C%96/" class="">
      1.7 Redis持久化</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/1.8redis%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/" class="">
      1.8 Redis发布订阅</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/1.9redis%E9%9B%86%E7%BE%A4%E6%96%B9%E6%A1%88/" class="">
      1.9 Redis集群方案</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAredis%E9%9B%86%E7%BE%A4/" class="">
      使用 Docker搭建 Redis集群</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5redis/" class="">
      客户端连接 Redis</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-146aedbcf8714fb62838757a1082a467" class="toggle"  />
    <label for="section-146aedbcf8714fb62838757a1082a467" class="flex">
      <a role="button" class="">
        🔎 ELK</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/elk/1.1elastaticsearch%E5%85%A5%E9%97%A8/" class="">
      1.1 Elastatic Search入门</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/elk/1.2elastaticsearch%E9%85%8D%E7%BD%AE/" class="">
      1.2 Elastatic Search配置</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/elk/1.3%E4%BD%BF%E7%94%A8kibana%E6%93%8D%E4%BD%9Ces/" class="">
      1.3使用 Kibana操作 Es</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e876d2a6c86b79fe88fd120640b84773" class="toggle" checked />
    <label for="section-e876d2a6c86b79fe88fd120640b84773" class="flex">
      <a role="button" class="">
        🚢 Docker</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/docker/1.1docker%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%AE%89%E8%A3%85/" class="active">
      1.1 Docker概念及安装</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docker/1.2docker%E9%95%9C%E5%83%8F/" class="">
      1.2 Docker镜像</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docker/1.3docker%E5%AE%B9%E5%99%A8/" class="">
      1.3 Docker容器</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docker/1.4docker%E4%BB%93%E5%BA%93/" class="">
      1.4 Docker仓库</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docker/1.5docker%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86/" class="">
      1.5 Docker数据管理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docker/1.6docker%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F/" class="">
      1.6 Docker容器网络模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docker/1.7docker%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/" class="">
      1.7 Docker高级网络配置</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docker/1.8dockerfile/" class="">
      1.8 Dockerfile</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docker/1.9dockercompose/" class="">
      1.9 Docker Compose</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docker/2.0dockermachine/" class="">
      2.0 Docker Machine</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docker/2.1dockerswarm/" class="">
      2.1 Docker Swarm</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docker/2.2docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="">
      2.2 Docker常用命令</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docker/2.3portainer%E5%8F%AF%E8%A7%86%E5%8C%96%E9%9D%A2%E6%9D%BF/" class="">
      2.3 Portainer可视化面板</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-31ced7a6f12c0e1d312f5c9d5aa42f8e" class="toggle"  />
    <label for="section-31ced7a6f12c0e1d312f5c9d5aa42f8e" class="flex">
      <a role="button" class="">
        🕸️ K8s</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/kubernetes/kubernetes%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="">
      Kubernetes基础知识</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kubernetes/kubernetes%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85/" class="">
      Kubernetes集群安装</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b7939089f2d38db5071ac1464e01a040" class="toggle"  />
    <label for="section-b7939089f2d38db5071ac1464e01a040" class="flex">
      <a role="button" class="">
        🖥️ Linux</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/linux/centos7%E5%8D%87%E7%BA%A7gcc%E7%89%88%E6%9C%AC/" class="">
      Centos7升级gcc版本</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/linux/centos%E5%AE%89%E8%A3%85hexo/" class="">
      Centos安装 Hexo</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/linux/centos%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/" class="">
      Centos网络配置</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/linux/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="">
      Linux常用命令</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/linux/linux%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/" class="">
      Linux目录说明</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/linux/vmware%E5%AE%89%E8%A3%85centos/" class="">
      Vmware安装 Centos</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3f1b0bb4bbdd3ea5d43f21f5b8664c28" class="toggle"  />
    <label for="section-3f1b0bb4bbdd3ea5d43f21f5b8664c28" class="flex">
      <a role="button" class="">
        🛍️ Devops</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/devops/gitlab%E5%AE%89%E8%A3%85/" class="">
      Gitlab安装</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/devops/jenkins%E5%AE%89%E8%A3%85/" class="">
      Jenkins安装</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/devops/jenkins%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C/" class="">
      Jenkins常见操作</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/devops/nugetserver%E6%90%AD%E5%BB%BA/" class="">
      Nuget Server搭建</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>













</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/icons/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>1.1 Docker概念及安装</h3>

  <label for="toc-control">
    
    <img src="/icons/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#环境准备">环境准备</a></li>
    <li><a href="#查看内核版本">查看内核版本</a></li>
    <li><a href="#yum安装">Yum安装</a></li>
    <li><a href="#脚本安装">脚本安装</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><p>软件开发最大的麻烦事之一就是环境配置。计算机的环境都不相同，为了保证软件能在不同的机器上正常运行必须保证两件事：</p>
<ul>
<li>操作系统的设置</li>
<li>各种库和组件的安装</li>
</ul>
<p>比如安装一个dotnet core 应用，计算机必须有dotnet SDK，还必须有各种依赖，可能还要配置环境变量。而且换一台机器就要重新配置一遍。能不能做到软件可以带环境安装？也就是说安装的时候，把原始环境一模一样地复制过来。</p>
<h1 id="虚拟机">虚拟机<a class="anchor" href="#%e8%99%9a%e6%8b%9f%e6%9c%ba">#</a></h1>
<p>虚拟机（virtual machine）就是带环境安装的一种解决方案。它可以在一种操作系统里面运行另一种操作系统，比如在 Windows 系统里面运行 Linux 系统。应用程序对此毫无感知，因为虚拟机看上去跟真实系统一模一样，而对于底层系统来说，虚拟机就是一个普通文件不需要了就删掉，对其他部分毫无影响。</p>
<p>虽然可以通过虚拟机还原软件的原始环境。但是这个方案有几个缺点：</p>
<ul>
<li><strong>资源占用多</strong>：虚拟机会独占一部分内存和硬盘空间。它运行的时候其他程序就不能使用这些资源了。哪怕虚拟机里面的应用程序，真正使用的内存只有1MB，虚拟机依然需要几百MB的内存才能运行</li>
<li><strong>冗余步骤多</strong>：虚拟机是完整的操作系统，一些系统级别的操作步骤，往往无法跳过，比如用户登录</li>
<li><strong>启动慢</strong>：启动操作系统需要多久，启动虚拟机就需要多久。可能要等几分钟，应用程序才能真正运行</li>
</ul>
<h1 id="linux-容器">Linux 容器<a class="anchor" href="#linux-%e5%ae%b9%e5%99%a8">#</a></h1>
<p>由于虚拟机存在这些缺点，Linux 发展出了另一种虚拟化技术：Linux 容器（ <code>Linux Containers</code> 缩写为 <code>LXC</code> ）Linux 容器不是模拟一个完整的操作系统，而是对进程进行隔离。或者说，在正常进程的外面套了一个<a href="https://opensource.com/article/18/1/history-low-level-container-runtimes">保护层</a>。对于容器里面的进程来说，它接触到的各种资源都是虚拟的，从而实现与底层系统的隔离。</p>
<p>由于容器是进程级别的，相比虚拟机有很多优势：</p>
<ul>
<li><strong>启动快</strong>：容器里面的应用，直接就是底层系统的一个进程而不是虚拟机内部的进程。所以启动容器相当于启动本机的一个进程，而不是启动一个操作系统，速度就快很多</li>
<li><strong>资源占用少</strong>：容器只占用需要的资源，不占用没有用到的资源；虚拟机由于是完整的操作系统，不可避免要占用所有资源。另外，多个容器可以共享资源，虚拟机都是独享资源</li>
<li><strong>体积小</strong>：容器只要包含用到的组件即可，而虚拟机是整个操作系统的打包，所以容器文件比虚拟机文件要小很多</li>
</ul>
<blockquote class='book-hint '>
<p>总之，容器有点像轻量级的虚拟机，能够提供虚拟化的环境，但是成本开销小得多</p>
</blockquote><p>下图比较了Docker和传统虚拟化方式的不同之处。传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整操作系统，在该系统上再运行所需应用进程。</p>
<p><img src="/images/2021-09-09-13-28-12.png" alt="" /></p>
<p>容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。因此容器要比传统虚拟机更为轻便。</p>
<p><img src="/images/2021-09-09-13-28-29.png" alt="" /></p>
<h1 id="docker概念">Docker概念<a class="anchor" href="#docker%e6%a6%82%e5%bf%b5">#</a></h1>
<blockquote class='book-hint '>
<p>Docker 属于 Linux 容器的一种封装，提供简单易用的容器使用接口。它是目前最流行的 Linux 容器解决方案</p>
</blockquote><p>Docker 将应用程序与该程序的依赖，打包在一个文件里面。运行这个文件，就会生成一个虚拟容器。程序在这个虚拟容器里运行，就好像在真实的物理机上运行一样。有了 Docker就不用再担心环境问题。</p>
<p>Docker 使用 <code>Google</code> 公司推出的 <a href="https://golang.google.cn/">Go 语言</a> 进行开发实现，基于 <code>Linux</code> 内核的 <a href="https://zh.wikipedia.org/wiki/Cgroups">cgroup</a>，<a href="https://en.wikipedia.org/wiki/Linux_namespaces">namespace</a>，以及 <a href="https://docs.docker.com/storage/storagedriver/overlayfs-driver/">OverlayFS</a> 类的 <a href="https://en.wikipedia.org/wiki/Union_mount">Union FS</a> 等技术，对进程进行封装隔离，属于 <a href="https://en.wikipedia.org/wiki/Operating-system-level_virtualization">操作系统层面的虚拟化技术</a>。由于隔离的进程独立于宿主和其它的隔离的进程，因此也称其为容器。最初实现是基于 <a href="https://linuxcontainers.org/lxc/introduction/">LXC</a>，从 <code>0.7</code> 版本以后开始去除 <code>LXC</code>，转而使用自行开发的 <a href="https://github.com/docker/libcontainer">libcontainer</a>，从 <code>1.11</code> 版本开始，则进一步演进为用 <a href="https://github.com/opencontainers/runc">runC</a> 和 <a href="https://github.com/containerd/containerd">containerd</a> 。</p>
<h1 id="docker优点">Docker优点<a class="anchor" href="#docker%e4%bc%98%e7%82%b9">#</a></h1>
<p>作为一种新兴的虚拟化方式，Docker 跟传统的虚拟化方式相比具有众多的优势：</p>
<ul>
<li><strong>更高效的利用系统资源</strong>：由于容器不需要进行硬件虚拟以及运行完整操作系统等额外开销，Docker 对系统资源的利用率更高。无论是应用执行速度、内存损耗或者文件存储速度，都要比传统虚拟机技术更高效。因此，相比虚拟机技术，一个相同配置的主机，往往可以运行更多数量的应用</li>
<li><strong>更快速的启动</strong>：传统的虚拟机技术启动应用服务往往需要数分钟，而 Docker 容器应用由于直接运行于宿主内核，无需启动完整的操作系统，因此可以做到秒级、甚至毫秒级的启动时间。大大的节约了开发、测试、部署的时间</li>
<li><strong>一致的运行环境</strong>：开发过程中一个常见的问题是环境一致性问题。由于开发环境、测试环境、生产环境不一致，导致有些 bug 并未在开发过程中被发现。而 Docker 的镜像提供了除内核外完整的运行时环境，确保了应用运行环境一致性，从而不会再出现 <em>「这段代码在我机器上没问题」</em> 这类问题</li>
<li><strong>持续交付和部署</strong>：对开发和运维（<a href="https://zh.wikipedia.org/wiki/DevOps">DevOps</a>）人员来说，最希望的就是一次创建或配置，可以在任意地方正常运行。使用 Docker 可以通过定制应用镜像来实现持续集成、持续交付、部署。开发人员可以通过 <a href="https://www.bookstack.cn/read/docker_practice-v1.1.0/$image-dockerfile">Dockerfile</a> 来进行镜像构建，并结合 <a href="https://en.wikipedia.org/wiki/Continuous_integration">持续集成(Continuous Integration)</a> 系统进行集成测试，而运维人员则可以直接在生产环境中快速部署该镜像，甚至结合 <a href="https://en.wikipedia.org/wiki/Continuous_delivery">持续部署(Continuous Delivery/Deployment)</a> 系统进行自动部署。而且使用 <code>Dockerfile</code> 使镜像构建透明化，不仅仅开发团队可以理解应用运行环境，也方便运维团队理解应用运行所需条件，帮助更好的生产环境中部署该镜像</li>
<li><strong>更轻松的迁移</strong>：由于 Docker 确保了执行环境的一致性，使得应用的迁移更加容易。Docker 可以在很多平台上运行，无论是物理机、虚拟机、公有云、私有云其运行结果是一致的。因此可以很轻易的将在一个平台上运行的应用，迁移到另一个平台上，而不用担心运行环境的变化导致应用无法正常运行的情况</li>
<li><strong>更轻松的维护和扩展</strong>：Docker 使用的分层存储以及镜像的技术，使得应用重复部分的复用更为容易，也使得应用的维护更新更加简单，基于基础镜像进一步扩展镜像也变得非常简单。此外Docker 团队同各个开源项目团队一起维护了一大批高质量的 <a href="https://hub.docker.com/search/?type=image&amp;image_filter=official">官方镜像</a>，既可以直接在生产环境使用，又可以作为基础进一步定制，大大的降低了应用服务的镜像制作成本</li>
</ul>
<p><strong>Docker对比传统虚拟机总结</strong></p>
<table>
  <thead>
      <tr>
          <th>特性</th>
          <th>容器</th>
          <th>虚拟机</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>启动</td>
          <td>秒级</td>
          <td>分钟级</td>
      </tr>
      <tr>
          <td>硬盘使用</td>
          <td>一般为 <code>MB</code></td>
          <td>一般为 <code>GB</code></td>
      </tr>
      <tr>
          <td>性能</td>
          <td>接近原生</td>
          <td>弱于</td>
      </tr>
      <tr>
          <td>系统支持量</td>
          <td>单机支持上千个容器</td>
          <td>一般几十个</td>
      </tr>
  </tbody>
</table>
<h1 id="docker组成">Docker组成<a class="anchor" href="#docker%e7%bb%84%e6%88%90">#</a></h1>
<p>Docker 使用客户端-服务器 (C/S) 架构模式 使用远程API来管理和创建Docker容器。Docker 容器（Container）通过 Docker 镜像（Image）来创建，二者之间的关系类似于面向对象中的对象与类。</p>
<p>Docker由三个基本概念组成</p>
<ul>
<li><strong>仓库（Repository）</strong>：Docker用于存放镜像文件的仓库</li>
<li><strong>镜像（Image）</strong>：Image是构建容器的源代码，是一个只读的模板。由一层一层的文件系统组成的类似于虚拟机的镜像</li>
<li><strong>容器(Container）</strong>：Container是由Docker镜像创建的运行实例，类似于虚拟机。容器之间是相互隔离的，包含特定的应用及其所需的依赖文件</li>
</ul>
<blockquote class='book-hint '>
<p>✨ Docker Hub是Docker公司提供的一个注册服务器（Register）来保存多个仓库，每个仓库又可以包含多个具备不同tag的镜像</p>
</blockquote><h1 id="docker安装">Docker安装<a class="anchor" href="#docker%e5%ae%89%e8%a3%85">#</a></h1>
<p>Docker 是一个开源的商业产品，有两个版本：社区版（Community Edition，缩写为 CE）和企业版（Enterprise Edition，缩写为 EE）。企业版包含了一些收费服务，个人开发者一般用不到。</p>
<h2 id="环境准备">环境准备<a class="anchor" href="#%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87">#</a></h2>
<p>官方建议 <code>Centos7 Linux</code> 内核需要<code>3.10</code>以上</p>
<blockquote class='book-hint '>
<p>注意：使用 <code>root</code> 用户登录执行命令前无需加<code>sudo</code>，非 <code>root</code> 的所有命令前面要加 <code>sudo</code></p>
</blockquote><h2 id="查看内核版本">查看内核版本<a class="anchor" href="#%e6%9f%a5%e7%9c%8b%e5%86%85%e6%a0%b8%e7%89%88%e6%9c%ac">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@wangpengliang ~<span style="color:#f92672">]</span><span style="color:#75715e"># uname -r</span>
</span></span><span style="display:flex;"><span>3.10.0-1160.25.1.el7.x86_64</span></span></code></pre></div><h2 id="yum安装">Yum安装<a class="anchor" href="#yum%e5%ae%89%e8%a3%85">#</a></h2>
<ol>
<li>更新 yum 包。可选项：如之后出现不兼容的情况的话就必须执行</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>yum -y update</span></span></code></pre></div><ol start="2">
<li>​	安装必要系统工具。<code>yum-util</code> 提供 <code>yum-config-manager</code> 功能，另外两个是 <code>devicemapper</code> 驱动依赖的</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>yum install -y yum-utils device-mapper-persistent-data lvm2</span></span></code></pre></div><ol start="3">
<li>设置 yum 源。下面两个都可用</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">yum</span><span style="color:#f92672">-</span><span style="color:#a6e22e">config</span><span style="color:#f92672">-</span><span style="color:#a6e22e">manager</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">add</span><span style="color:#f92672">-</span><span style="color:#a6e22e">repo</span> <span style="color:#a6e22e">http</span><span style="color:#f92672">:</span><span style="color:#75715e">//download.docker.com/linux/centos/docker-ce.repo
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">yum</span><span style="color:#f92672">-</span><span style="color:#a6e22e">config</span><span style="color:#f92672">-</span><span style="color:#a6e22e">manager</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">add</span><span style="color:#f92672">-</span><span style="color:#a6e22e">repo</span> <span style="color:#a6e22e">http</span><span style="color:#f92672">:</span><span style="color:#75715e">//mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</span></span></span></code></pre></div><ol start="4">
<li>查看可用版本</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@wangpengliang ~<span style="color:#f92672">]</span><span style="color:#75715e"># yum list docker-ce --showduplicates | sort -r</span>
</span></span><span style="display:flex;"><span>已加载插件：fastestmirror
</span></span><span style="display:flex;"><span>可安装的软件包
</span></span><span style="display:flex;"><span> * updates: mirrors.163.com
</span></span><span style="display:flex;"><span>Loading mirror speeds from cached hostfile
</span></span><span style="display:flex;"><span> * extras: mirrors.163.com
</span></span><span style="display:flex;"><span>docker-ce.x86_64            3:20.10.6-3.el7                     docker-ce-stable
</span></span><span style="display:flex;"><span>docker-ce.x86_64            3:20.10.5-3.el7                     docker-ce-stable
</span></span><span style="display:flex;"><span>docker-ce.x86_64            3:20.10.4-3.el7                     docker-ce-stable
</span></span><span style="display:flex;"><span>docker-ce.x86_64            3:20.10.3-3.el7                     docker-ce-stable
</span></span><span style="display:flex;"><span>docker-ce.x86_64            3:20.10.2-3.el7                     docker-ce-stable
</span></span><span style="display:flex;"><span>docker-ce.x86_64            3:20.10.1-3.el7                     docker-ce-stable
</span></span><span style="display:flex;"><span>docker-ce.x86_64            3:20.10.0-3.el7                     docker-ce-stable
</span></span><span style="display:flex;"><span>docker-ce.x86_64            3:19.03.9-3.el7                     docker-ce-stable
</span></span><span style="display:flex;"><span>docker-ce.x86_64            3:19.03.8-3.el7                     docker-ce-stable
</span></span><span style="display:flex;"><span>docker-ce.x86_64            3:19.03.7-3.el7                     docker-ce-stable
</span></span><span style="display:flex;"><span>docker-ce.x86_64            3:19.03.6-3.el7                     docker-ce-stable
</span></span><span style="display:flex;"><span>docker-ce.x86_64            3:19.03.5-3.el7                     docker-ce-stable
</span></span><span style="display:flex;"><span> * centos-sclo-sclo: mirrors.163.com
</span></span><span style="display:flex;"><span> * centos-sclo-rh: mirrors.163.com
</span></span><span style="display:flex;"><span> * base: mirrors.163.com</span></span></code></pre></div><ol start="5">
<li>选择版本并安装</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>格式：yum install docker-ce-版本号
</span></span><span style="display:flex;"><span>yum -y install docker-ce-20.10.6</span></span></code></pre></div><p><img src="/images/2021-09-09-13-32-36.png" alt="" />
6. 启动并设置开机自启</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl start docker <span style="color:#f92672">&amp;&amp;</span> systemctl enable docker</span></span></code></pre></div><p>查看安装版本</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@wangpengliang ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker version</span>
</span></span><span style="display:flex;"><span>Client: Docker Engine - Community
</span></span><span style="display:flex;"><span> Version:           20.10.6
</span></span><span style="display:flex;"><span> API version:       1.41
</span></span><span style="display:flex;"><span> Go version:        go1.13.15
</span></span><span style="display:flex;"><span> Git commit:        370c289
</span></span><span style="display:flex;"><span> Built:             Fri Apr  <span style="color:#ae81ff">9</span> 22:45:33 <span style="color:#ae81ff">2021</span>
</span></span><span style="display:flex;"><span> OS/Arch:           linux/amd64
</span></span><span style="display:flex;"><span> Context:           default
</span></span><span style="display:flex;"><span> Experimental:      true
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Server: Docker Engine - Community
</span></span><span style="display:flex;"><span> Engine:
</span></span><span style="display:flex;"><span>  Version:          20.10.6
</span></span><span style="display:flex;"><span>  API version:      1.41 <span style="color:#f92672">(</span>minimum version 1.12<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>  Go version:       go1.13.15
</span></span><span style="display:flex;"><span>  Git commit:       8728dd2
</span></span><span style="display:flex;"><span>  Built:            Fri Apr  <span style="color:#ae81ff">9</span> 22:43:57 <span style="color:#ae81ff">2021</span>
</span></span><span style="display:flex;"><span>  OS/Arch:          linux/amd64
</span></span><span style="display:flex;"><span>  Experimental:     false
</span></span><span style="display:flex;"><span> containerd:
</span></span><span style="display:flex;"><span>  Version:          1.4.4
</span></span><span style="display:flex;"><span>  GitCommit:        05f951a3781f4f2c1911b05e61c160e9c30eaa8e
</span></span><span style="display:flex;"><span> runc:
</span></span><span style="display:flex;"><span>  Version:          1.0.0-rc93
</span></span><span style="display:flex;"><span>  GitCommit:        12644e614e25b05da6fd08a38ffa0cfe1903fdec
</span></span><span style="display:flex;"><span> docker-init:
</span></span><span style="display:flex;"><span>  Version:          0.19.0
</span></span><span style="display:flex;"><span>  GitCommit:        de40ad0</span></span></code></pre></div><ol start="7">
<li>测试运行</li>
</ol>
<blockquote class='book-hint '>
<p>由于本地没有 hello-world 这个镜像，正常情况下会下载一个 hello-world 的镜像并在容器内运行</p>
</blockquote><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run hello-world</span></span></code></pre></div><h2 id="脚本安装">脚本安装<a class="anchor" href="#%e8%84%9a%e6%9c%ac%e5%ae%89%e8%a3%85">#</a></h2>
<p><strong>必备条件</strong></p>
<ul>
<li>
<p>使用 sudo 或 root 权限登录 Centos</p>
</li>
<li>
<p>确保 yum 包更新到最新</p>
</li>
</ul>
<ol>
<li>执行安装脚本</li>
</ol>
<blockquote class='book-hint '>
<p>执行脚本会添加 docker.repo 源并安装 Docker</p>
</blockquote><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -fsSL https://get.docker.com -o get-docker.sh
</span></span><span style="display:flex;"><span>sh get-docker.sh</span></span></code></pre></div><ol start="2">
<li>启动进程</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl start docker</span></span></code></pre></div><ol start="3">
<li>测试运行</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo docker run hello-world</span></span></code></pre></div><h1 id="docker-卸载">Docker 卸载<a class="anchor" href="#docker-%e5%8d%b8%e8%bd%bd">#</a></h1>
<p><strong>1)：查看当前docker状态，如果是运行状态则停掉</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl status docker
</span></span><span style="display:flex;"><span>systemctl stop docker</span></span></code></pre></div><p><strong>2)：查看yum安装的docker文件包</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> yum list installed |grep docker</span></span></code></pre></div><p><strong>3)：查看docker相关的rpm源文件</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rpm -qa |grep docker</span></span></code></pre></div><p><strong>4)：删除所有安装的docker文件包</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> yum -y remove docker.x86_64</span></span></code></pre></div><p><strong>其他docker相关的安装包同样删除，删完之后再查看下docker rpm源</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rpm -qa |grep docker</span></span></code></pre></div><p><strong>5)：删除docker的镜像文件，默认在</strong><code>**/var/lib/docker**</code><strong>目录下</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rm -rf /var/lib/docker</span></span></code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">

<div>

</div>

<div>

</div>

</div>





  
  
  
  <div class="flex flex-wrap justify-between">
    <span>
    
      <a href="/docs/elk/1.3%E4%BD%BF%E7%94%A8kibana%E6%93%8D%E4%BD%9Ces/" class="flex align-center">
        <img src="/icons/backward.svg" class="book-icon" alt="Backward" />
        <span>1.3使用 Kibana操作 Es</span>
      </a>
    
    </span>
    <span>
    
      <a href="/docs/docker/1.2docker%E9%95%9C%E5%83%8F/" class="flex align-center">
        <span>1.2 Docker镜像</span>
        <img src="/icons/forward.svg" class="book-icon" alt="Forward" />
      </a>
    
    </span>
  </div>
  


 
        
  
 
        
        
  
 
        
  
  
    <script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script>
  

      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  
  <aside class="book-toc">
    <div class="book-toc-content">
      
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#环境准备">环境准备</a></li>
    <li><a href="#查看内核版本">查看内核版本</a></li>
    <li><a href="#yum安装">Yum安装</a></li>
    <li><a href="#脚本安装">脚本安装</a></li>
  </ul>
</nav>



    </div>
  </aside>
  
 
  </main>

  
</body>
</html>




















